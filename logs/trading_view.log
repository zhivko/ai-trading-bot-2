2025-09-03 15:43:05,601 - logging_config - INFO - AppTradingView.py:75 - Application startup...
2025-09-03 15:43:05,607 - logging_config - INFO - redis_utils.py:32 - Successfully connected to Redis
2025-09-03 15:43:05,607 - logging_config - INFO - AppTradingView.py:80 - üîß STARTING BACKGROUND TASK: Creating fetch_and_publish_klines task...
2025-09-03 15:43:05,607 - logging_config - INFO - background_tasks.py:15 - üöÄ STARTING BACKGROUND TASK: fetch_and_publish_klines
2025-09-03 15:43:06,724 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for BTCUSDT from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:43:06,725 - logging_config - INFO - AppTradingView.py:391 - Email found in session for BTCUSDT request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 15:43:07,098 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:43:07,098 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 15:43:07,482 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 15:43:07,482 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1729748213569, x_axis_max: 1768353553651
2025-09-03 15:43:07,482 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1729748213569, max_timestamp: 1768353553651
2025-09-03 15:43:07,482 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1729748213.569, max=1768353553.651
2025-09-03 15:43:07,482 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2024-10-24T05:36:53.569000+00:00, max=2026-01-14T01:19:13.651000+00:00
2025-09-03 15:43:07,482 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1729748213569, 'xAxisMax': 1768353553651, 'yAxisMin': 94928.18414199521, 'yAxisMax': 141343.2640397128, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:07,665 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 15:43:07,851 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": "2024-10-24T05:36:53.569Z",
  "to_ts": "2026-01-14T01:19:13.651Z"
}
2025-09-03 15:43:07,852 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 15:43:07,852 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 2024-10-24T05:36:53.569Z (type: <class 'str'>)
2025-09-03 15:43:07,852 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 2026-01-14T01:19:13.651Z (type: <class 'str'>)
2025-09-03 15:43:07,852 - logging_config - INFO - websocket_handlers.py:756 - [TIMESTAMP DEBUG] Timestamps are ISO strings (correct format)
2025-09-03 15:43:07,853 - logging_config - INFO - websocket_handlers.py:763 - [TIMESTAMP CONVERSION] ISO strings -> Unix seconds:
2025-09-03 15:43:07,853 - logging_config - INFO - websocket_handlers.py:764 -   2024-10-24T05:36:53.569Z -> 1729748213 (2024-10-24 05:36:53 UTC)
2025-09-03 15:43:07,853 - logging_config - INFO - websocket_handlers.py:765 -   2026-01-14T01:19:13.651Z -> 1768353553 (2026-01-14 01:19:13 UTC)
2025-09-03 15:43:07,853 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 15:43:07,853 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1729748213 (type: <class 'int'>)
2025-09-03 15:43:07,853 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1768353553 (type: <class 'int'>)
2025-09-03 15:43:07,853 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 15:43:07,853 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 15:43:07,853 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 15:43:07,853 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 2024-10-24T05:36:53.569Z (type: <class 'str'>)
2025-09-03 15:43:07,853 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 2026-01-14T01:19:13.651Z (type: <class 'str'>)
2025-09-03 15:43:07,853 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 15:43:07,853 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 15:43:07,853 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 15:43:07,853 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=None, to_ts=None
2025-09-03 15:43:07,853 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1729748213, to_ts=1768353553
2025-09-03 15:43:07,854 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 15:43:07,854 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: False
2025-09-03 15:43:07,854 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 15:43:07,854 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 15:43:07,854 - logging_config - INFO - websocket_handlers.py:846 -     From: 2024-10-24 05:36:53 UTC (1729748213)
2025-09-03 15:43:07,854 - logging_config - INFO - websocket_handlers.py:847 -     To: 2026-01-14 01:19:13 UTC (1768353553)
2025-09-03 15:43:07,854 - logging_config - INFO - websocket_handlers.py:848 -     Range: 38605340 seconds (10723.7 hours)
2025-09-03 15:43:07,854 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 15:43:07,854 - logging_config - INFO - websocket_handlers.py:851 -     From: 2024-10-24 07:36:53 Central Europe Summer Time
2025-09-03 15:43:07,854 - logging_config - INFO - websocket_handlers.py:852 -     To: 2026-01-14 03:19:13 Central Europe Summer Time
2025-09-03 15:43:07,854 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 15:43:07,854 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 15:43:07,854 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 15:43:07,854 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 15:43:07,854 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 15:43:07,855 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 15:43:07,855 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1729748213, to_ts=1768353553
2025-09-03 15:43:07,855 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2024-10-24 07:36:53 to 2026-01-14 03:19:13
2025-09-03 15:43:07,855 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 15:43:07,855 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 15:43:07,855 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 15:43:07,855 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 15:43:07,855 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2024-10-24 05:36 to 2026-01-14 01:19
2025-09-03 15:43:07,855 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1768353553
2025-09-03 15:43:07,855 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: False
2025-09-03 15:43:07,855 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:43:07,855 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1729748213, to_ts=1768353553, resolution=1d
2025-09-03 15:43:07,855 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 15:43:07,855 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 15:43:07,856 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 15:43:07,856 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 15:43:07,856 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 15:43:07,856 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 15:43:07,857 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 15:43:07,857 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 15:43:07,857 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 15:43:07,857 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 15:43:07,857 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 15:43:07,857 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1729748213, to_ts=1768353553
2025-09-03 15:43:07,857 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1729748213, 1768353553]
2025-09-03 15:43:07,857 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 15:43:07,857 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1729748213 (type: <class 'int'>)
2025-09-03 15:43:07,857 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1768353553 (type: <class 'int'>)
2025-09-03 15:43:07,857 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1729748213 appears to be in SECONDS (correct for Redis)
2025-09-03 15:43:07,857 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 15:43:07,861 - logging_config - INFO - redis_utils.py:159 - Found 314 cached klines for BTCUSDT 1d between 1729748213 and 1768353553
2025-09-03 15:43:07,862 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 15:43:07,862 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~446
2025-09-03 15:43:07,862 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 314
2025-09-03 15:43:07,862 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 15:43:07,862 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 314 klines from Redis for BTCUSDT
2025-09-03 15:43:07,863 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 314 klines in Redis cache for BTCUSDT
2025-09-03 15:43:07,863 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 15:43:07,863 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:43:07,863 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 314
2025-09-03 15:43:07,863 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 314 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:43:07,864 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1729748213 and 1768353553
2025-09-03 15:43:07,868 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 314, Cleaned data points: 314
2025-09-03 15:43:07,868 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 15:43:07,868 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2024-10-25 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:07,868 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 15:43:07,871 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 314 rows
2025-09-03 15:43:07,871 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-10-25 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:07,871 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-10-25 00:00:00'), Timestamp('2024-10-26 00:00:00'), Timestamp('2024-10-27 00:00:00'), Timestamp('2024-10-28 00:00:00'), Timestamp('2024-10-29 00:00:00')]
2025-09-03 15:43:07,872 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:43:07,873 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 314 total rows
2025-09-03 15:43:07,873 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 314 total rows
2025-09-03 15:43:07,873 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 314 total rows
2025-09-03 15:43:07,873 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:43:07,873 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-10-25 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:07,874 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 314
2025-09-03 15:43:07,874 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 15:43:07,874 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 15:43:07,874 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 314
2025-09-03 15:43:07,877 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 314 rows
2025-09-03 15:43:07,877 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-10-25 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:07,878 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-10-25 00:00:00'), Timestamp('2024-10-26 00:00:00'), Timestamp('2024-10-27 00:00:00'), Timestamp('2024-10-28 00:00:00'), Timestamp('2024-10-29 00:00:00')]
2025-09-03 15:43:07,878 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:43:07,878 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 314 total rows
2025-09-03 15:43:07,878 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 314 total rows
2025-09-03 15:43:07,878 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:43:07,879 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-10-25 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:07,879 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 314
2025-09-03 15:43:07,879 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 15:43:07,879 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 15:43:07,879 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 314
2025-09-03 15:43:07,881 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 314 rows
2025-09-03 15:43:07,881 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-10-25 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:07,882 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-10-25 00:00:00'), Timestamp('2024-10-26 00:00:00'), Timestamp('2024-10-27 00:00:00'), Timestamp('2024-10-28 00:00:00'), Timestamp('2024-10-29 00:00:00')]
2025-09-03 15:43:07,882 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:43:07,882 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 314 total rows
2025-09-03 15:43:07,883 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 314 total rows
2025-09-03 15:43:07,883 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:43:07,883 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-10-25 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:07,883 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 314
2025-09-03 15:43:07,884 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 15:43:07,884 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 15:43:07,884 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 314
2025-09-03 15:43:07,886 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 314 rows
2025-09-03 15:43:07,886 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-10-25 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:07,886 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-10-25 00:00:00'), Timestamp('2024-10-26 00:00:00'), Timestamp('2024-10-27 00:00:00'), Timestamp('2024-10-28 00:00:00'), Timestamp('2024-10-29 00:00:00')]
2025-09-03 15:43:07,886 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:43:07,887 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 314 total rows
2025-09-03 15:43:07,887 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 314 total rows
2025-09-03 15:43:07,887 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:43:07,887 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-10-25 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:07,888 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 314
2025-09-03 15:43:07,888 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 15:43:07,888 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 15:43:07,888 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 314
2025-09-03 15:43:07,890 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 314 rows
2025-09-03 15:43:07,891 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-10-25 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:07,891 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-10-25 00:00:00'), Timestamp('2024-10-26 00:00:00'), Timestamp('2024-10-27 00:00:00'), Timestamp('2024-10-28 00:00:00'), Timestamp('2024-10-29 00:00:00')]
2025-09-03 15:43:07,891 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:43:07,891 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 314 total rows
2025-09-03 15:43:07,892 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 314 total rows
2025-09-03 15:43:07,892 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:43:07,892 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-10-25 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:07,892 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 15:43:07,893 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:43:11,192 - logging_config - INFO - utility_endpoints.py:168 - POST /settings: RAW data received from client for symbol 'BTCUSDT': {'symbol': 'BTCUSDT', 'resolution': '1d', 'range': '30d', 'xAxisMin': 1727268972365, 'xAxisMax': 1769934092891, 'yAxisMin': 92054.96421318922, 'yAxisMax': 143351.56067630433, 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'useLocalOllama': False, 'localOllamaModelName': '', 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'showAgentTrades': False, 'streamDeltaTime': 0, 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:11,192 - logging_config - INFO - utility_endpoints.py:199 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: current_symbol_settings compiled for Redis save: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1727268972365, 'xAxisMax': 1769934092891, 'yAxisMin': 92054.96421318922, 'yAxisMax': 143351.56067630433, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:11,192 - logging_config - INFO - utility_endpoints.py:201 - POST /settings for BTCUSDT: Client sent streamDeltaTime: 0. Value to be saved in Redis for streamDeltaTime: 0
2025-09-03 15:43:11,193 - logging_config - INFO - utility_endpoints.py:204 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: Settings updated in Redis for BTCUSDT: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1727268972365, 'xAxisMax': 1769934092891, 'yAxisMin': 92054.96421318922, 'yAxisMax': 143351.56067630433, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:11,371 - logging_config - INFO - utility_endpoints.py:168 - POST /settings: RAW data received from client for symbol 'BTCUSDT': {'symbol': 'BTCUSDT', 'resolution': '1d', 'range': '30d', 'xAxisMin': 1721500835044, 'xAxisMax': 1773611333881, 'yAxisMin': 85370.20636079305, 'yAxisMax': 148024.01076507109, 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'useLocalOllama': False, 'localOllamaModelName': '', 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'showAgentTrades': False, 'streamDeltaTime': 0, 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:11,372 - logging_config - INFO - utility_endpoints.py:168 - POST /settings: RAW data received from client for symbol 'BTCUSDT': {'symbol': 'BTCUSDT', 'resolution': '1d', 'range': '30d', 'xAxisMin': 1724528987088, 'xAxisMax': 1771680858894, 'yAxisMin': 88879.56510663746, 'yAxisMax': 145571.07171393442, 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'useLocalOllama': False, 'localOllamaModelName': '', 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'showAgentTrades': False, 'streamDeltaTime': 0, 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:11,372 - logging_config - INFO - utility_endpoints.py:199 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: current_symbol_settings compiled for Redis save: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1721500835044, 'xAxisMax': 1773611333881, 'yAxisMin': 85370.20636079305, 'yAxisMax': 148024.01076507109, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:11,372 - logging_config - INFO - utility_endpoints.py:201 - POST /settings for BTCUSDT: Client sent streamDeltaTime: 0. Value to be saved in Redis for streamDeltaTime: 0
2025-09-03 15:43:11,375 - logging_config - INFO - utility_endpoints.py:199 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: current_symbol_settings compiled for Redis save: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1724528987088, 'xAxisMax': 1771680858894, 'yAxisMin': 88879.56510663746, 'yAxisMax': 145571.07171393442, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:11,375 - logging_config - INFO - utility_endpoints.py:201 - POST /settings for BTCUSDT: Client sent streamDeltaTime: 0. Value to be saved in Redis for streamDeltaTime: 0
2025-09-03 15:43:11,375 - logging_config - INFO - utility_endpoints.py:204 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: Settings updated in Redis for BTCUSDT: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1721500835044, 'xAxisMax': 1773611333881, 'yAxisMin': 85370.20636079305, 'yAxisMax': 148024.01076507109, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:11,376 - logging_config - INFO - utility_endpoints.py:204 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: Settings updated in Redis for BTCUSDT: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1724528987088, 'xAxisMax': 1771680858894, 'yAxisMin': 88879.56510663746, 'yAxisMax': 145571.07171393442, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:11,874 - logging_config - INFO - utility_endpoints.py:168 - POST /settings: RAW data received from client for symbol 'BTCUSDT': {'symbol': 'BTCUSDT', 'resolution': '1d', 'range': '30d', 'xAxisMin': 1714771706543, 'xAxisMax': 1778415216502, 'yAxisMin': 80040.16173946866, 'yAxisMax': 156565.69124808168, 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'useLocalOllama': False, 'localOllamaModelName': '', 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'showAgentTrades': False, 'streamDeltaTime': 0, 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:11,875 - logging_config - INFO - utility_endpoints.py:199 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: current_symbol_settings compiled for Redis save: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1714771706543, 'xAxisMax': 1778415216502, 'yAxisMin': 80040.16173946866, 'yAxisMax': 156565.69124808168, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:11,875 - logging_config - INFO - utility_endpoints.py:201 - POST /settings for BTCUSDT: Client sent streamDeltaTime: 0. Value to be saved in Redis for streamDeltaTime: 0
2025-09-03 15:43:11,875 - logging_config - INFO - utility_endpoints.py:204 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: Settings updated in Redis for BTCUSDT: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1714771706543, 'xAxisMax': 1778415216502, 'yAxisMin': 80040.16173946866, 'yAxisMax': 156565.69124808168, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:14,056 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": 1682949951563,
  "to_ts": 1810236971481
}
2025-09-03 15:43:14,056 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 15:43:14,056 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 1682949951563 (type: <class 'int'>)
2025-09-03 15:43:14,056 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 1810236971481 (type: <class 'int'>)
2025-09-03 15:43:14,056 - logging_config - WARNING - websocket_handlers.py:771 - [TIMESTAMP DEBUG] from_ts 1682949951563 appears to be in MILLISECONDS (should be seconds)
2025-09-03 15:43:14,056 - logging_config - INFO - websocket_handlers.py:772 -   Converting to seconds: 1682949951
2025-09-03 15:43:14,056 - logging_config - INFO - websocket_handlers.py:776 - [TIMESTAMP CONVERSION] Client milliseconds -> Server seconds:
2025-09-03 15:43:14,056 - logging_config - INFO - websocket_handlers.py:777 -   1682949951563 -> 1682949951 (2023-05-01 14:05:51 UTC)
2025-09-03 15:43:14,056 - logging_config - INFO - websocket_handlers.py:778 -   1810236971481 -> 1810236971 (2027-05-13 19:36:11 UTC)
2025-09-03 15:43:14,057 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 15:43:14,057 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1682949951 (type: <class 'int'>)
2025-09-03 15:43:14,057 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1810236971 (type: <class 'int'>)
2025-09-03 15:43:14,057 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 15:43:14,057 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 15:43:14,057 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 15:43:14,057 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 1682949951563 (type: <class 'int'>)
2025-09-03 15:43:14,057 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 1810236971481 (type: <class 'int'>)
2025-09-03 15:43:14,057 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 15:43:14,057 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 15:43:14,057 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 15:43:14,057 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=1729748213, to_ts=1768353553
2025-09-03 15:43:14,057 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1682949951, to_ts=1810236971
2025-09-03 15:43:14,057 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 15:43:14,057 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: True
2025-09-03 15:43:14,057 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 15:43:14,057 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 15:43:14,058 - logging_config - INFO - websocket_handlers.py:846 -     From: 2023-05-01 14:05:51 UTC (1682949951)
2025-09-03 15:43:14,058 - logging_config - INFO - websocket_handlers.py:847 -     To: 2027-05-13 19:36:11 UTC (1810236971)
2025-09-03 15:43:14,058 - logging_config - INFO - websocket_handlers.py:848 -     Range: 127287020 seconds (35357.5 hours)
2025-09-03 15:43:14,058 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 15:43:14,058 - logging_config - INFO - websocket_handlers.py:851 -     From: 2023-05-01 16:05:51 Central Europe Summer Time
2025-09-03 15:43:14,058 - logging_config - INFO - websocket_handlers.py:852 -     To: 2027-05-13 21:36:11 Central Europe Summer Time
2025-09-03 15:43:14,058 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 15:43:14,058 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 15:43:14,058 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 15:43:14,058 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 15:43:14,058 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 15:43:14,058 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 15:43:14,058 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1682949951, to_ts=1810236971
2025-09-03 15:43:14,060 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2023-05-01 16:05:51 to 2027-05-13 21:36:11
2025-09-03 15:43:14,060 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 15:43:14,060 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 15:43:14,060 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 15:43:14,060 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 15:43:14,060 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2023-05-01 14:05 to 2027-05-13 19:36
2025-09-03 15:43:14,060 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1810236971
2025-09-03 15:43:14,060 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: True
2025-09-03 15:43:14,060 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:43:14,060 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1682949951, to_ts=1810236971, resolution=1d
2025-09-03 15:43:14,060 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 15:43:14,061 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 15:43:14,061 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 15:43:14,061 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 15:43:14,061 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 15:43:14,061 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 15:43:14,062 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 15:43:14,062 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 15:43:14,062 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 15:43:14,062 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 15:43:14,063 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 15:43:14,063 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1682949951, to_ts=1810236971
2025-09-03 15:43:14,063 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1682949951, 1810236971]
2025-09-03 15:43:14,063 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 15:43:14,063 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1682949951 (type: <class 'int'>)
2025-09-03 15:43:14,063 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1810236971 (type: <class 'int'>)
2025-09-03 15:43:14,063 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1682949951 appears to be in SECONDS (correct for Redis)
2025-09-03 15:43:14,063 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 15:43:14,069 - logging_config - INFO - redis_utils.py:159 - Found 856 cached klines for BTCUSDT 1d between 1682949951 and 1810236971
2025-09-03 15:43:14,069 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 15:43:14,069 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~1473
2025-09-03 15:43:14,070 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 856
2025-09-03 15:43:14,070 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 15:43:14,070 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 856 klines from Redis for BTCUSDT
2025-09-03 15:43:14,070 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 856 klines in Redis cache for BTCUSDT
2025-09-03 15:43:14,070 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 15:43:14,070 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:43:14,071 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 856
2025-09-03 15:43:14,071 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 856 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:43:14,073 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1682949951 and 1810236971
2025-09-03 15:43:14,076 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 856, Cleaned data points: 856
2025-09-03 15:43:14,076 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 15:43:14,077 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2023-05-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:14,077 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 15:43:14,080 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 856 rows
2025-09-03 15:43:14,080 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-05-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:14,080 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-05-02 00:00:00'), Timestamp('2023-05-03 00:00:00'), Timestamp('2023-05-04 00:00:00'), Timestamp('2023-05-05 00:00:00'), Timestamp('2023-05-06 00:00:00')]
2025-09-03 15:43:14,080 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:43:14,081 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 856 total rows
2025-09-03 15:43:14,081 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 856 total rows
2025-09-03 15:43:14,081 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 856 total rows
2025-09-03 15:43:14,081 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:43:14,081 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-05-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:14,082 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 856
2025-09-03 15:43:14,082 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 15:43:14,082 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 15:43:14,083 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 856
2025-09-03 15:43:14,085 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 856 rows
2025-09-03 15:43:14,085 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-05-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:14,085 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-05-02 00:00:00'), Timestamp('2023-05-03 00:00:00'), Timestamp('2023-05-04 00:00:00'), Timestamp('2023-05-05 00:00:00'), Timestamp('2023-05-06 00:00:00')]
2025-09-03 15:43:14,085 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:43:14,086 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 856 total rows
2025-09-03 15:43:14,086 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 856 total rows
2025-09-03 15:43:14,086 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:43:14,086 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-05-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:14,087 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 856
2025-09-03 15:43:14,087 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 15:43:14,087 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 15:43:14,087 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 856
2025-09-03 15:43:14,089 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 856 rows
2025-09-03 15:43:14,089 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-05-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:14,090 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-05-02 00:00:00'), Timestamp('2023-05-03 00:00:00'), Timestamp('2023-05-04 00:00:00'), Timestamp('2023-05-05 00:00:00'), Timestamp('2023-05-06 00:00:00')]
2025-09-03 15:43:14,090 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:43:14,090 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 856 total rows
2025-09-03 15:43:14,090 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 856 total rows
2025-09-03 15:43:14,090 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:43:14,090 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-05-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:14,091 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 856
2025-09-03 15:43:14,091 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 15:43:14,091 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 15:43:14,091 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 856
2025-09-03 15:43:14,093 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 856 rows
2025-09-03 15:43:14,093 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-05-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:14,093 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-05-02 00:00:00'), Timestamp('2023-05-03 00:00:00'), Timestamp('2023-05-04 00:00:00'), Timestamp('2023-05-05 00:00:00'), Timestamp('2023-05-06 00:00:00')]
2025-09-03 15:43:14,095 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:43:14,095 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 856 total rows
2025-09-03 15:43:14,095 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 856 total rows
2025-09-03 15:43:14,095 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:43:14,095 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-05-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:14,096 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 856
2025-09-03 15:43:14,096 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 15:43:14,096 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 15:43:14,096 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 856
2025-09-03 15:43:14,098 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 856 rows
2025-09-03 15:43:14,098 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-05-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:14,098 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-05-02 00:00:00'), Timestamp('2023-05-03 00:00:00'), Timestamp('2023-05-04 00:00:00'), Timestamp('2023-05-05 00:00:00'), Timestamp('2023-05-06 00:00:00')]
2025-09-03 15:43:14,099 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:43:14,099 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 856 total rows
2025-09-03 15:43:14,099 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 856 total rows
2025-09-03 15:43:14,099 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:43:14,099 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-05-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:14,100 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 15:43:14,100 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:43:24,640 - logging_config - INFO - utility_endpoints.py:168 - POST /settings: RAW data received from client for symbol 'BTCUSDT': {'symbol': 'BTCUSDT', 'resolution': '1d', 'range': '30d', 'xAxisMin': 1709987409218, 'xAxisMax': 1795897161681, 'yAxisMin': 73310.15426201514, 'yAxisMax': 176608.8142736338, 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'useLocalOllama': False, 'localOllamaModelName': '', 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'showAgentTrades': False, 'streamDeltaTime': 0, 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:24,640 - logging_config - INFO - utility_endpoints.py:199 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: current_symbol_settings compiled for Redis save: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1709987409218, 'xAxisMax': 1795897161681, 'yAxisMin': 73310.15426201514, 'yAxisMax': 176608.8142736338, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:24,640 - logging_config - INFO - utility_endpoints.py:201 - POST /settings for BTCUSDT: Client sent streamDeltaTime: 0. Value to be saved in Redis for streamDeltaTime: 0
2025-09-03 15:43:24,640 - logging_config - INFO - utility_endpoints.py:204 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: Settings updated in Redis for BTCUSDT: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1709987409218, 'xAxisMax': 1795897161681, 'yAxisMin': 73310.15426201514, 'yAxisMax': 176608.8142736338, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:24,727 - logging_config - INFO - utility_endpoints.py:168 - POST /settings: RAW data received from client for symbol 'BTCUSDT': {'symbol': 'BTCUSDT', 'resolution': '1d', 'range': '30d', 'xAxisMin': 1708044573736, 'xAxisMax': 1802989533737, 'yAxisMin': 70579.24830511698, 'yAxisMax': 184741.92322614178, 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'useLocalOllama': False, 'localOllamaModelName': '', 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'showAgentTrades': False, 'streamDeltaTime': 0, 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:24,727 - logging_config - INFO - utility_endpoints.py:199 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: current_symbol_settings compiled for Redis save: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1708044573736, 'xAxisMax': 1802989533737, 'yAxisMin': 70579.24830511698, 'yAxisMax': 184741.92322614178, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:24,727 - logging_config - INFO - utility_endpoints.py:201 - POST /settings for BTCUSDT: Client sent streamDeltaTime: 0. Value to be saved in Redis for streamDeltaTime: 0
2025-09-03 15:43:24,728 - logging_config - INFO - utility_endpoints.py:204 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: Settings updated in Redis for BTCUSDT: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1708044573736, 'xAxisMax': 1802989533737, 'yAxisMin': 70579.24830511698, 'yAxisMax': 184741.92322614178, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:27,111 - logging_config - INFO - utility_endpoints.py:168 - POST /settings: RAW data received from client for symbol 'BTCUSDT': {'symbol': 'BTCUSDT', 'resolution': '1d', 'range': '30d', 'xAxisMin': 1679292000000, 'xAxisMax': 1760551200000, 'yAxisMin': 19182.385000000002, 'yAxisMax': 129589.715, 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'useLocalOllama': False, 'localOllamaModelName': '', 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'showAgentTrades': False, 'streamDeltaTime': 0, 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:27,113 - logging_config - INFO - utility_endpoints.py:199 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: current_symbol_settings compiled for Redis save: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1679292000000, 'xAxisMax': 1760551200000, 'yAxisMin': 19182.385000000002, 'yAxisMax': 129589.715, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:27,113 - logging_config - INFO - utility_endpoints.py:201 - POST /settings for BTCUSDT: Client sent streamDeltaTime: 0. Value to be saved in Redis for streamDeltaTime: 0
2025-09-03 15:43:27,114 - logging_config - INFO - utility_endpoints.py:204 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: Settings updated in Redis for BTCUSDT: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1679292000000, 'xAxisMax': 1760551200000, 'yAxisMin': 19182.385000000002, 'yAxisMax': 129589.715, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:43:29,622 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": 1638662400000,
  "to_ts": 1801180800000
}
2025-09-03 15:43:29,622 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 15:43:29,622 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 1638662400000 (type: <class 'int'>)
2025-09-03 15:43:29,622 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 1801180800000 (type: <class 'int'>)
2025-09-03 15:43:29,622 - logging_config - WARNING - websocket_handlers.py:771 - [TIMESTAMP DEBUG] from_ts 1638662400000 appears to be in MILLISECONDS (should be seconds)
2025-09-03 15:43:29,622 - logging_config - INFO - websocket_handlers.py:772 -   Converting to seconds: 1638662400
2025-09-03 15:43:29,622 - logging_config - INFO - websocket_handlers.py:776 - [TIMESTAMP CONVERSION] Client milliseconds -> Server seconds:
2025-09-03 15:43:29,622 - logging_config - INFO - websocket_handlers.py:777 -   1638662400000 -> 1638662400 (2021-12-05 00:00:00 UTC)
2025-09-03 15:43:29,623 - logging_config - INFO - websocket_handlers.py:778 -   1801180800000 -> 1801180800 (2027-01-29 00:00:00 UTC)
2025-09-03 15:43:29,623 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 15:43:29,623 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1638662400 (type: <class 'int'>)
2025-09-03 15:43:29,623 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1801180800 (type: <class 'int'>)
2025-09-03 15:43:29,623 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 15:43:29,623 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 15:43:29,623 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 15:43:29,623 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 1638662400000 (type: <class 'int'>)
2025-09-03 15:43:29,623 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 1801180800000 (type: <class 'int'>)
2025-09-03 15:43:29,623 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 15:43:29,623 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 15:43:29,623 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 15:43:29,623 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=1682949951, to_ts=1810236971
2025-09-03 15:43:29,623 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1638662400, to_ts=1801180800
2025-09-03 15:43:29,623 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 15:43:29,623 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: True
2025-09-03 15:43:29,623 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 15:43:29,624 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 15:43:29,624 - logging_config - INFO - websocket_handlers.py:846 -     From: 2021-12-05 00:00:00 UTC (1638662400)
2025-09-03 15:43:29,624 - logging_config - INFO - websocket_handlers.py:847 -     To: 2027-01-29 00:00:00 UTC (1801180800)
2025-09-03 15:43:29,624 - logging_config - INFO - websocket_handlers.py:848 -     Range: 162518400 seconds (45144.0 hours)
2025-09-03 15:43:29,624 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 15:43:29,624 - logging_config - INFO - websocket_handlers.py:851 -     From: 2021-12-05 02:00:00 Central Europe Summer Time
2025-09-03 15:43:29,624 - logging_config - INFO - websocket_handlers.py:852 -     To: 2027-01-29 02:00:00 Central Europe Summer Time
2025-09-03 15:43:29,624 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 15:43:29,624 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 15:43:29,624 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 15:43:29,624 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 15:43:29,624 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 15:43:29,624 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 15:43:29,624 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1638662400, to_ts=1801180800
2025-09-03 15:43:29,625 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2021-12-05 02:00:00 to 2027-01-29 02:00:00
2025-09-03 15:43:29,625 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 15:43:29,625 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 15:43:29,625 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 15:43:29,625 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 15:43:29,625 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2021-12-05 00:00 to 2027-01-29 00:00
2025-09-03 15:43:29,625 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1801180800
2025-09-03 15:43:29,625 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: True
2025-09-03 15:43:29,625 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:43:29,625 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1638662400, to_ts=1801180800, resolution=1d
2025-09-03 15:43:29,625 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 15:43:29,625 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 15:43:29,625 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 15:43:29,626 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 15:43:29,626 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 15:43:29,626 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 15:43:29,627 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 15:43:29,627 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 15:43:29,627 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 15:43:29,627 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 15:43:29,628 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 15:43:29,628 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1638662400, to_ts=1801180800
2025-09-03 15:43:29,628 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1638662400, 1801180800]
2025-09-03 15:43:29,628 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 15:43:29,628 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1638662400 (type: <class 'int'>)
2025-09-03 15:43:29,628 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1801180800 (type: <class 'int'>)
2025-09-03 15:43:29,628 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1638662400 appears to be in SECONDS (correct for Redis)
2025-09-03 15:43:29,628 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 15:43:29,635 - logging_config - INFO - redis_utils.py:159 - Found 1000 cached klines for BTCUSDT 1d between 1638662400 and 1801180800
2025-09-03 15:43:29,635 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 15:43:29,636 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~1881
2025-09-03 15:43:29,636 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 1000
2025-09-03 15:43:29,636 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 15:43:29,636 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 1000 klines from Redis for BTCUSDT
2025-09-03 15:43:29,637 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 1000 klines in Redis cache for BTCUSDT
2025-09-03 15:43:29,637 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 15:43:29,637 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:43:29,637 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 1000
2025-09-03 15:43:29,637 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 1000 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:43:29,638 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1638662400 and 1801180800
2025-09-03 15:43:29,642 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 1000, Cleaned data points: 1000
2025-09-03 15:43:29,642 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 15:43:29,642 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2022-12-09 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:29,643 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 15:43:29,645 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 1000 rows
2025-09-03 15:43:29,645 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2022-12-09 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:29,646 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2022-12-09 00:00:00'), Timestamp('2022-12-10 00:00:00'), Timestamp('2022-12-11 00:00:00'), Timestamp('2022-12-12 00:00:00'), Timestamp('2022-12-13 00:00:00')]
2025-09-03 15:43:29,646 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:43:29,646 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 1000 total rows
2025-09-03 15:43:29,646 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 1000 total rows
2025-09-03 15:43:29,646 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 1000 total rows
2025-09-03 15:43:29,647 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:43:29,647 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2022-12-09 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:29,647 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 1000
2025-09-03 15:43:29,647 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 15:43:29,648 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 15:43:29,648 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 1000
2025-09-03 15:43:29,650 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 1000 rows
2025-09-03 15:43:29,650 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2022-12-09 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:29,650 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2022-12-09 00:00:00'), Timestamp('2022-12-10 00:00:00'), Timestamp('2022-12-11 00:00:00'), Timestamp('2022-12-12 00:00:00'), Timestamp('2022-12-13 00:00:00')]
2025-09-03 15:43:29,651 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:43:29,651 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 1000 total rows
2025-09-03 15:43:29,651 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 1000 total rows
2025-09-03 15:43:29,651 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:43:29,651 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2022-12-09 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:29,652 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 1000
2025-09-03 15:43:29,652 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 15:43:29,652 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 15:43:29,652 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 1000
2025-09-03 15:43:29,655 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 1000 rows
2025-09-03 15:43:29,655 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2022-12-09 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:29,655 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2022-12-09 00:00:00'), Timestamp('2022-12-10 00:00:00'), Timestamp('2022-12-11 00:00:00'), Timestamp('2022-12-12 00:00:00'), Timestamp('2022-12-13 00:00:00')]
2025-09-03 15:43:29,656 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:43:29,656 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 1000 total rows
2025-09-03 15:43:29,656 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 1000 total rows
2025-09-03 15:43:29,656 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:43:29,656 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2022-12-09 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:29,657 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 1000
2025-09-03 15:43:29,657 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 15:43:29,657 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 15:43:29,657 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 1000
2025-09-03 15:43:29,659 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 1000 rows
2025-09-03 15:43:29,659 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2022-12-09 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:29,660 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2022-12-09 00:00:00'), Timestamp('2022-12-10 00:00:00'), Timestamp('2022-12-11 00:00:00'), Timestamp('2022-12-12 00:00:00'), Timestamp('2022-12-13 00:00:00')]
2025-09-03 15:43:29,660 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:43:29,660 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 1000 total rows
2025-09-03 15:43:29,660 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 1000 total rows
2025-09-03 15:43:29,660 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:43:29,661 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2022-12-09 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:29,661 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 1000
2025-09-03 15:43:29,661 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 15:43:29,661 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 15:43:29,661 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 1000
2025-09-03 15:43:29,664 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 1000 rows
2025-09-03 15:43:29,664 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2022-12-09 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:29,664 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2022-12-09 00:00:00'), Timestamp('2022-12-10 00:00:00'), Timestamp('2022-12-11 00:00:00'), Timestamp('2022-12-12 00:00:00'), Timestamp('2022-12-13 00:00:00')]
2025-09-03 15:43:29,665 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:43:29,665 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 1000 total rows
2025-09-03 15:43:29,665 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 1000 total rows
2025-09-03 15:43:29,665 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:43:29,665 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2022-12-09 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:43:29,666 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 15:43:29,666 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:44:07,713 - logging_config - ERROR - websocket_handlers.py:711 - Failed to receive WebSocket message for BTCUSDT: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
Traceback (most recent call last):
  File "c:\git\ai-trading-bot-2\websocket_handlers.py", line 706, in stream_combined_data_websocket_endpoint
    message = await asyncio.wait_for(websocket.receive_json(), timeout=1.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-09-03 15:44:13,295 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 15:44:36,367 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for BTCUSDT from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:44:36,367 - logging_config - INFO - AppTradingView.py:391 - Email found in session for BTCUSDT request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 15:44:36,373 - logging_config - INFO - utility_endpoints.py:282 - Log stream generator cancelled.
2025-09-03 15:44:36,498 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:44:36,498 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 15:44:36,507 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 15:44:36,507 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1679292000000, x_axis_max: 1760551200000
2025-09-03 15:44:36,508 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1679292000000, max_timestamp: 1760551200000
2025-09-03 15:44:36,508 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1679292000.0, max=1760551200.0
2025-09-03 15:44:36,508 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2023-03-20T06:00:00+00:00, max=2025-10-15T18:00:00+00:00
2025-09-03 15:44:36,508 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1679292000000, 'xAxisMax': 1760551200000, 'yAxisMin': 19182.385000000002, 'yAxisMax': 129589.715, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:44:36,537 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 15:44:36,541 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": "2023-03-20T06:00:00.000Z",
  "to_ts": "2025-10-15T18:00:00.000Z"
}
2025-09-03 15:44:36,541 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 15:44:36,541 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 2023-03-20T06:00:00.000Z (type: <class 'str'>)
2025-09-03 15:44:36,541 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 2025-10-15T18:00:00.000Z (type: <class 'str'>)
2025-09-03 15:44:36,542 - logging_config - INFO - websocket_handlers.py:756 - [TIMESTAMP DEBUG] Timestamps are ISO strings (correct format)
2025-09-03 15:44:36,542 - logging_config - INFO - websocket_handlers.py:763 - [TIMESTAMP CONVERSION] ISO strings -> Unix seconds:
2025-09-03 15:44:36,542 - logging_config - INFO - websocket_handlers.py:764 -   2023-03-20T06:00:00.000Z -> 1679292000 (2023-03-20 06:00:00 UTC)
2025-09-03 15:44:36,542 - logging_config - INFO - websocket_handlers.py:765 -   2025-10-15T18:00:00.000Z -> 1760551200 (2025-10-15 18:00:00 UTC)
2025-09-03 15:44:36,542 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 15:44:36,542 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1679292000 (type: <class 'int'>)
2025-09-03 15:44:36,542 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1760551200 (type: <class 'int'>)
2025-09-03 15:44:36,542 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 15:44:36,542 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 15:44:36,542 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 15:44:36,542 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 2023-03-20T06:00:00.000Z (type: <class 'str'>)
2025-09-03 15:44:36,543 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 2025-10-15T18:00:00.000Z (type: <class 'str'>)
2025-09-03 15:44:36,543 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 15:44:36,543 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 15:44:36,543 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 15:44:36,543 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=None, to_ts=None
2025-09-03 15:44:36,543 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1679292000, to_ts=1760551200
2025-09-03 15:44:36,543 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 15:44:36,543 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: False
2025-09-03 15:44:36,543 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 15:44:36,543 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 15:44:36,543 - logging_config - INFO - websocket_handlers.py:846 -     From: 2023-03-20 06:00:00 UTC (1679292000)
2025-09-03 15:44:36,543 - logging_config - INFO - websocket_handlers.py:847 -     To: 2025-10-15 18:00:00 UTC (1760551200)
2025-09-03 15:44:36,543 - logging_config - INFO - websocket_handlers.py:848 -     Range: 81259200 seconds (22572.0 hours)
2025-09-03 15:44:36,543 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 15:44:36,543 - logging_config - INFO - websocket_handlers.py:851 -     From: 2023-03-20 08:00:00 Central Europe Summer Time
2025-09-03 15:44:36,544 - logging_config - INFO - websocket_handlers.py:852 -     To: 2025-10-15 20:00:00 Central Europe Summer Time
2025-09-03 15:44:36,544 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 15:44:36,544 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 15:44:36,544 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 15:44:36,544 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 15:44:36,544 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 15:44:36,544 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 15:44:36,544 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1679292000, to_ts=1760551200
2025-09-03 15:44:36,544 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2023-03-20 08:00:00 to 2025-10-15 20:00:00
2025-09-03 15:44:36,544 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 15:44:36,544 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 15:44:36,544 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 15:44:36,544 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 15:44:36,545 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2023-03-20 06:00 to 2025-10-15 18:00
2025-09-03 15:44:36,545 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1760551200
2025-09-03 15:44:36,545 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: False
2025-09-03 15:44:36,545 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:44:36,545 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1679292000, to_ts=1760551200, resolution=1d
2025-09-03 15:44:36,545 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 15:44:36,545 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 15:44:36,545 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 15:44:36,545 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 15:44:36,545 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 15:44:36,545 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 15:44:36,546 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 15:44:36,546 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 15:44:36,546 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 15:44:36,546 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 15:44:36,546 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 15:44:36,546 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1679292000, to_ts=1760551200
2025-09-03 15:44:36,547 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1679292000, 1760551200]
2025-09-03 15:44:36,547 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 15:44:36,547 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1679292000 (type: <class 'int'>)
2025-09-03 15:44:36,547 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1760551200 (type: <class 'int'>)
2025-09-03 15:44:36,547 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1679292000 appears to be in SECONDS (correct for Redis)
2025-09-03 15:44:36,547 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 15:44:36,550 - logging_config - INFO - redis_utils.py:159 - Found 898 cached klines for BTCUSDT 1d between 1679292000 and 1760551200
2025-09-03 15:44:36,551 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 15:44:36,551 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~940
2025-09-03 15:44:36,551 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 898
2025-09-03 15:44:36,551 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 15:44:36,551 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 898 klines from Redis for BTCUSDT
2025-09-03 15:44:36,551 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 898 klines in Redis cache for BTCUSDT
2025-09-03 15:44:36,551 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 15:44:36,551 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:44:36,551 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 898
2025-09-03 15:44:36,552 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 898 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:44:36,553 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1679292000 and 1760551200
2025-09-03 15:44:36,556 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 898, Cleaned data points: 898
2025-09-03 15:44:36,556 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 15:44:36,556 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:36,557 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 15:44:36,559 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:44:36,560 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:36,560 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:44:36,560 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:44:36,560 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 898 total rows
2025-09-03 15:44:36,560 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 898 total rows
2025-09-03 15:44:36,560 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 898 total rows
2025-09-03 15:44:36,560 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:44:36,560 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:36,561 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:44:36,561 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 15:44:36,561 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 15:44:36,561 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 898
2025-09-03 15:44:36,563 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:44:36,563 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:36,563 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:44:36,563 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:44:36,563 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 898 total rows
2025-09-03 15:44:36,564 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 898 total rows
2025-09-03 15:44:36,564 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:44:36,564 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:36,564 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:44:36,564 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 15:44:36,564 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 15:44:36,564 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 898
2025-09-03 15:44:36,566 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:44:36,566 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:36,566 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:44:36,566 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:44:36,567 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 898 total rows
2025-09-03 15:44:36,567 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 898 total rows
2025-09-03 15:44:36,567 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:44:36,567 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:36,567 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:44:36,567 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 15:44:36,567 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 15:44:36,567 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 898
2025-09-03 15:44:36,570 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:44:36,570 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:36,570 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:44:36,570 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:44:36,570 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 898 total rows
2025-09-03 15:44:36,571 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 898 total rows
2025-09-03 15:44:36,571 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:44:36,571 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:36,571 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:44:36,571 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 15:44:36,571 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 15:44:36,572 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 898
2025-09-03 15:44:36,573 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:44:36,573 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:36,573 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:44:36,573 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:44:36,574 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 898 total rows
2025-09-03 15:44:36,574 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 898 total rows
2025-09-03 15:44:36,574 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:44:36,574 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:36,574 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 15:44:36,574 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:44:49,907 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for BTCUSDT from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:44:49,907 - logging_config - INFO - AppTradingView.py:391 - Email found in session for BTCUSDT request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 15:44:49,912 - logging_config - INFO - utility_endpoints.py:282 - Log stream generator cancelled.
2025-09-03 15:44:49,916 - logging_config - ERROR - websocket_handlers.py:711 - Failed to receive WebSocket message for BTCUSDT: (1001, '')
Traceback (most recent call last):
  File "c:\git\ai-trading-bot-2\websocket_handlers.py", line 706, in stream_combined_data_websocket_endpoint
    message = await asyncio.wait_for(websocket.receive_json(), timeout=1.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1001, '')
2025-09-03 15:44:50,010 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:44:50,010 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 15:44:50,043 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 15:44:50,043 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1679292000000, x_axis_max: 1760551200000
2025-09-03 15:44:50,043 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1679292000000, max_timestamp: 1760551200000
2025-09-03 15:44:50,043 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1679292000.0, max=1760551200.0
2025-09-03 15:44:50,043 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2023-03-20T06:00:00+00:00, max=2025-10-15T18:00:00+00:00
2025-09-03 15:44:50,043 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1679292000000, 'xAxisMax': 1760551200000, 'yAxisMin': 19182.385000000002, 'yAxisMax': 129589.715, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:44:50,069 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 15:44:50,086 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": "2023-03-20T06:00:00.000Z",
  "to_ts": "2025-10-15T18:00:00.000Z"
}
2025-09-03 15:44:50,086 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 15:44:50,086 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 2023-03-20T06:00:00.000Z (type: <class 'str'>)
2025-09-03 15:44:50,086 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 2025-10-15T18:00:00.000Z (type: <class 'str'>)
2025-09-03 15:44:50,086 - logging_config - INFO - websocket_handlers.py:756 - [TIMESTAMP DEBUG] Timestamps are ISO strings (correct format)
2025-09-03 15:44:50,086 - logging_config - INFO - websocket_handlers.py:763 - [TIMESTAMP CONVERSION] ISO strings -> Unix seconds:
2025-09-03 15:44:50,086 - logging_config - INFO - websocket_handlers.py:764 -   2023-03-20T06:00:00.000Z -> 1679292000 (2023-03-20 06:00:00 UTC)
2025-09-03 15:44:50,086 - logging_config - INFO - websocket_handlers.py:765 -   2025-10-15T18:00:00.000Z -> 1760551200 (2025-10-15 18:00:00 UTC)
2025-09-03 15:44:50,086 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 15:44:50,087 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1679292000 (type: <class 'int'>)
2025-09-03 15:44:50,087 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1760551200 (type: <class 'int'>)
2025-09-03 15:44:50,087 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 15:44:50,087 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 15:44:50,087 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 15:44:50,087 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 2023-03-20T06:00:00.000Z (type: <class 'str'>)
2025-09-03 15:44:50,087 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 2025-10-15T18:00:00.000Z (type: <class 'str'>)
2025-09-03 15:44:50,087 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 15:44:50,087 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 15:44:50,087 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 15:44:50,087 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=None, to_ts=None
2025-09-03 15:44:50,087 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1679292000, to_ts=1760551200
2025-09-03 15:44:50,087 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 15:44:50,087 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: False
2025-09-03 15:44:50,087 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 15:44:50,087 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 15:44:50,087 - logging_config - INFO - websocket_handlers.py:846 -     From: 2023-03-20 06:00:00 UTC (1679292000)
2025-09-03 15:44:50,088 - logging_config - INFO - websocket_handlers.py:847 -     To: 2025-10-15 18:00:00 UTC (1760551200)
2025-09-03 15:44:50,088 - logging_config - INFO - websocket_handlers.py:848 -     Range: 81259200 seconds (22572.0 hours)
2025-09-03 15:44:50,088 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 15:44:50,088 - logging_config - INFO - websocket_handlers.py:851 -     From: 2023-03-20 08:00:00 Central Europe Summer Time
2025-09-03 15:44:50,088 - logging_config - INFO - websocket_handlers.py:852 -     To: 2025-10-15 20:00:00 Central Europe Summer Time
2025-09-03 15:44:50,088 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 15:44:50,088 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 15:44:50,088 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 15:44:50,088 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 15:44:50,089 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 15:44:50,089 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 15:44:50,089 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1679292000, to_ts=1760551200
2025-09-03 15:44:50,089 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2023-03-20 08:00:00 to 2025-10-15 20:00:00
2025-09-03 15:44:50,089 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 15:44:50,089 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 15:44:50,089 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 15:44:50,089 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 15:44:50,089 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2023-03-20 06:00 to 2025-10-15 18:00
2025-09-03 15:44:50,089 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1760551200
2025-09-03 15:44:50,089 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: False
2025-09-03 15:44:50,089 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:44:50,089 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1679292000, to_ts=1760551200, resolution=1d
2025-09-03 15:44:50,089 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 15:44:50,089 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 15:44:50,089 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 15:44:50,090 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 15:44:50,090 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 15:44:50,090 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 15:44:50,090 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 15:44:50,091 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 15:44:50,091 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 15:44:50,091 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 15:44:50,091 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 15:44:50,091 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1679292000, to_ts=1760551200
2025-09-03 15:44:50,091 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1679292000, 1760551200]
2025-09-03 15:44:50,091 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 15:44:50,091 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1679292000 (type: <class 'int'>)
2025-09-03 15:44:50,091 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1760551200 (type: <class 'int'>)
2025-09-03 15:44:50,091 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1679292000 appears to be in SECONDS (correct for Redis)
2025-09-03 15:44:50,092 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 15:44:50,096 - logging_config - INFO - redis_utils.py:159 - Found 898 cached klines for BTCUSDT 1d between 1679292000 and 1760551200
2025-09-03 15:44:50,096 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 15:44:50,096 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~940
2025-09-03 15:44:50,096 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 898
2025-09-03 15:44:50,096 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 15:44:50,096 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 898 klines from Redis for BTCUSDT
2025-09-03 15:44:50,096 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 898 klines in Redis cache for BTCUSDT
2025-09-03 15:44:50,096 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 15:44:50,097 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:44:50,097 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 898
2025-09-03 15:44:50,097 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 898 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:44:50,098 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1679292000 and 1760551200
2025-09-03 15:44:50,101 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 898, Cleaned data points: 898
2025-09-03 15:44:50,101 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 15:44:50,102 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:50,102 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 15:44:50,104 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:44:50,104 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:50,104 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:44:50,104 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:44:50,104 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 898 total rows
2025-09-03 15:44:50,104 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 898 total rows
2025-09-03 15:44:50,105 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 898 total rows
2025-09-03 15:44:50,105 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:44:50,105 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:50,105 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:44:50,105 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 15:44:50,105 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 15:44:50,105 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 898
2025-09-03 15:44:50,107 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:44:50,107 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:50,107 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:44:50,108 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:44:50,108 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 898 total rows
2025-09-03 15:44:50,108 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 898 total rows
2025-09-03 15:44:50,108 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:44:50,108 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:50,109 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:44:50,109 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 15:44:50,109 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 15:44:50,109 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 898
2025-09-03 15:44:50,111 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:44:50,111 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:50,111 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:44:50,111 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:44:50,111 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 898 total rows
2025-09-03 15:44:50,111 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 898 total rows
2025-09-03 15:44:50,111 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:44:50,111 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:50,112 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:44:50,112 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 15:44:50,112 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 15:44:50,112 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 898
2025-09-03 15:44:50,114 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:44:50,114 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:50,114 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:44:50,114 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:44:50,114 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 898 total rows
2025-09-03 15:44:50,114 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 898 total rows
2025-09-03 15:44:50,115 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:44:50,115 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:50,115 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:44:50,115 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 15:44:50,115 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 15:44:50,115 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 898
2025-09-03 15:44:50,116 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:44:50,117 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:50,117 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:44:50,117 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:44:50,118 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 898 total rows
2025-09-03 15:44:50,118 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 898 total rows
2025-09-03 15:44:50,118 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:44:50,118 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:44:50,118 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 15:44:50,119 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:45:12,539 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for BTCUSDT from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:45:12,539 - logging_config - INFO - AppTradingView.py:391 - Email found in session for BTCUSDT request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 15:45:12,571 - logging_config - ERROR - websocket_handlers.py:711 - Failed to receive WebSocket message for BTCUSDT: (1001, '')
Traceback (most recent call last):
  File "c:\git\ai-trading-bot-2\websocket_handlers.py", line 706, in stream_combined_data_websocket_endpoint
    message = await asyncio.wait_for(websocket.receive_json(), timeout=1.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1001, '')
2025-09-03 15:45:12,572 - logging_config - INFO - utility_endpoints.py:282 - Log stream generator cancelled.
2025-09-03 15:45:12,642 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:45:12,642 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 15:45:12,678 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 15:45:12,679 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1679292000000, x_axis_max: 1760551200000
2025-09-03 15:45:12,679 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1679292000000, max_timestamp: 1760551200000
2025-09-03 15:45:12,679 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1679292000.0, max=1760551200.0
2025-09-03 15:45:12,679 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2023-03-20T06:00:00+00:00, max=2025-10-15T18:00:00+00:00
2025-09-03 15:45:12,679 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1679292000000, 'xAxisMax': 1760551200000, 'yAxisMin': 19182.385000000002, 'yAxisMax': 129589.715, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:45:12,748 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 15:45:12,777 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": "2023-03-20T06:00:00.000Z",
  "to_ts": "2025-10-15T18:00:00.000Z"
}
2025-09-03 15:45:12,777 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 15:45:12,777 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 2023-03-20T06:00:00.000Z (type: <class 'str'>)
2025-09-03 15:45:12,777 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 2025-10-15T18:00:00.000Z (type: <class 'str'>)
2025-09-03 15:45:12,777 - logging_config - INFO - websocket_handlers.py:756 - [TIMESTAMP DEBUG] Timestamps are ISO strings (correct format)
2025-09-03 15:45:12,777 - logging_config - INFO - websocket_handlers.py:763 - [TIMESTAMP CONVERSION] ISO strings -> Unix seconds:
2025-09-03 15:45:12,777 - logging_config - INFO - websocket_handlers.py:764 -   2023-03-20T06:00:00.000Z -> 1679292000 (2023-03-20 06:00:00 UTC)
2025-09-03 15:45:12,779 - logging_config - INFO - websocket_handlers.py:765 -   2025-10-15T18:00:00.000Z -> 1760551200 (2025-10-15 18:00:00 UTC)
2025-09-03 15:45:12,779 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 15:45:12,779 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1679292000 (type: <class 'int'>)
2025-09-03 15:45:12,779 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1760551200 (type: <class 'int'>)
2025-09-03 15:45:12,779 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 15:45:12,779 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 15:45:12,779 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 15:45:12,779 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 2023-03-20T06:00:00.000Z (type: <class 'str'>)
2025-09-03 15:45:12,779 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 2025-10-15T18:00:00.000Z (type: <class 'str'>)
2025-09-03 15:45:12,779 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 15:45:12,779 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 15:45:12,779 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 15:45:12,779 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=None, to_ts=None
2025-09-03 15:45:12,779 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1679292000, to_ts=1760551200
2025-09-03 15:45:12,779 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 15:45:12,779 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: False
2025-09-03 15:45:12,780 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 15:45:12,780 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 15:45:12,780 - logging_config - INFO - websocket_handlers.py:846 -     From: 2023-03-20 06:00:00 UTC (1679292000)
2025-09-03 15:45:12,780 - logging_config - INFO - websocket_handlers.py:847 -     To: 2025-10-15 18:00:00 UTC (1760551200)
2025-09-03 15:45:12,780 - logging_config - INFO - websocket_handlers.py:848 -     Range: 81259200 seconds (22572.0 hours)
2025-09-03 15:45:12,780 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 15:45:12,780 - logging_config - INFO - websocket_handlers.py:851 -     From: 2023-03-20 08:00:00 Central Europe Summer Time
2025-09-03 15:45:12,780 - logging_config - INFO - websocket_handlers.py:852 -     To: 2025-10-15 20:00:00 Central Europe Summer Time
2025-09-03 15:45:12,780 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 15:45:12,780 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 15:45:12,780 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 15:45:12,780 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 15:45:12,780 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 15:45:12,780 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 15:45:12,780 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1679292000, to_ts=1760551200
2025-09-03 15:45:12,780 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2023-03-20 08:00:00 to 2025-10-15 20:00:00
2025-09-03 15:45:12,780 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 15:45:12,781 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 15:45:12,781 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 15:45:12,781 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 15:45:12,781 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2023-03-20 06:00 to 2025-10-15 18:00
2025-09-03 15:45:12,781 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1760551200
2025-09-03 15:45:12,781 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: False
2025-09-03 15:45:12,781 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:45:12,781 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1679292000, to_ts=1760551200, resolution=1d
2025-09-03 15:45:12,781 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 15:45:12,781 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 15:45:12,782 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 15:45:12,782 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 15:45:12,782 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 15:45:12,782 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 15:45:12,783 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 15:45:12,783 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 15:45:12,783 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 15:45:12,783 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 15:45:12,783 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 15:45:12,783 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1679292000, to_ts=1760551200
2025-09-03 15:45:12,784 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1679292000, 1760551200]
2025-09-03 15:45:12,784 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 15:45:12,784 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1679292000 (type: <class 'int'>)
2025-09-03 15:45:12,784 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1760551200 (type: <class 'int'>)
2025-09-03 15:45:12,784 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1679292000 appears to be in SECONDS (correct for Redis)
2025-09-03 15:45:12,784 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 15:45:12,787 - logging_config - INFO - redis_utils.py:159 - Found 898 cached klines for BTCUSDT 1d between 1679292000 and 1760551200
2025-09-03 15:45:12,788 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 15:45:12,788 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~940
2025-09-03 15:45:12,788 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 898
2025-09-03 15:45:12,788 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 15:45:12,788 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 898 klines from Redis for BTCUSDT
2025-09-03 15:45:12,788 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 898 klines in Redis cache for BTCUSDT
2025-09-03 15:45:12,789 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 15:45:12,789 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:45:12,789 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 898
2025-09-03 15:45:12,789 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 898 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:45:12,790 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1679292000 and 1760551200
2025-09-03 15:45:12,793 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 898, Cleaned data points: 898
2025-09-03 15:45:12,794 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 15:45:12,794 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:12,794 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 15:45:12,796 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:45:12,796 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:12,796 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:45:12,797 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:45:12,797 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 898 total rows
2025-09-03 15:45:12,797 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 898 total rows
2025-09-03 15:45:12,797 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 898 total rows
2025-09-03 15:45:12,797 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:45:12,797 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:12,798 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:45:12,798 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 15:45:12,798 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 15:45:12,798 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 898
2025-09-03 15:45:12,800 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:45:12,800 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:12,800 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:45:12,800 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:45:12,800 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 898 total rows
2025-09-03 15:45:12,800 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 898 total rows
2025-09-03 15:45:12,801 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:45:12,801 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:12,801 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:45:12,801 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 15:45:12,801 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 15:45:12,801 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 898
2025-09-03 15:45:12,803 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:45:12,804 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:12,804 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:45:12,804 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:45:12,804 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 898 total rows
2025-09-03 15:45:12,804 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 898 total rows
2025-09-03 15:45:12,804 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:45:12,805 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:12,806 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:45:12,806 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 15:45:12,806 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 15:45:12,806 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 898
2025-09-03 15:45:12,808 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:45:12,808 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:12,808 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:45:12,808 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:45:12,808 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 898 total rows
2025-09-03 15:45:12,808 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 898 total rows
2025-09-03 15:45:12,808 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:45:12,809 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:12,809 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:45:12,809 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 15:45:12,809 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 15:45:12,809 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 898
2025-09-03 15:45:12,811 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:45:12,811 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:12,811 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:45:12,811 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:45:12,811 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 898 total rows
2025-09-03 15:45:12,811 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 898 total rows
2025-09-03 15:45:12,812 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:45:12,812 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:12,812 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 15:45:12,812 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:45:22,451 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 15:45:27,783 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for BTCUSDT from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:45:27,784 - logging_config - INFO - AppTradingView.py:391 - Email found in session for BTCUSDT request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 15:45:28,294 - logging_config - INFO - utility_endpoints.py:282 - Log stream generator cancelled.
2025-09-03 15:45:28,480 - logging_config - ERROR - websocket_handlers.py:711 - Failed to receive WebSocket message for BTCUSDT: (1001, '')
Traceback (most recent call last):
  File "c:\git\ai-trading-bot-2\websocket_handlers.py", line 706, in stream_combined_data_websocket_endpoint
    message = await asyncio.wait_for(websocket.receive_json(), timeout=1.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1001, '')
2025-09-03 15:45:28,672 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:45:28,672 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 15:45:29,062 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 15:45:29,062 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1679292000000, x_axis_max: 1760551200000
2025-09-03 15:45:29,062 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1679292000000, max_timestamp: 1760551200000
2025-09-03 15:45:29,062 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1679292000.0, max=1760551200.0
2025-09-03 15:45:29,062 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2023-03-20T06:00:00+00:00, max=2025-10-15T18:00:00+00:00
2025-09-03 15:45:29,063 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1679292000000, 'xAxisMax': 1760551200000, 'yAxisMin': 19182.385000000002, 'yAxisMax': 129589.715, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:45:29,250 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 15:45:29,437 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": "2023-03-20T06:00:00.000Z",
  "to_ts": "2025-10-15T18:00:00.000Z"
}
2025-09-03 15:45:29,437 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 15:45:29,437 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 2023-03-20T06:00:00.000Z (type: <class 'str'>)
2025-09-03 15:45:29,437 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 2025-10-15T18:00:00.000Z (type: <class 'str'>)
2025-09-03 15:45:29,437 - logging_config - INFO - websocket_handlers.py:756 - [TIMESTAMP DEBUG] Timestamps are ISO strings (correct format)
2025-09-03 15:45:29,437 - logging_config - INFO - websocket_handlers.py:763 - [TIMESTAMP CONVERSION] ISO strings -> Unix seconds:
2025-09-03 15:45:29,437 - logging_config - INFO - websocket_handlers.py:764 -   2023-03-20T06:00:00.000Z -> 1679292000 (2023-03-20 06:00:00 UTC)
2025-09-03 15:45:29,437 - logging_config - INFO - websocket_handlers.py:765 -   2025-10-15T18:00:00.000Z -> 1760551200 (2025-10-15 18:00:00 UTC)
2025-09-03 15:45:29,439 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 15:45:29,439 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1679292000 (type: <class 'int'>)
2025-09-03 15:45:29,439 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1760551200 (type: <class 'int'>)
2025-09-03 15:45:29,439 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 15:45:29,439 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 15:45:29,439 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 15:45:29,439 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 2023-03-20T06:00:00.000Z (type: <class 'str'>)
2025-09-03 15:45:29,439 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 2025-10-15T18:00:00.000Z (type: <class 'str'>)
2025-09-03 15:45:29,439 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 15:45:29,439 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 15:45:29,439 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 15:45:29,439 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=None, to_ts=None
2025-09-03 15:45:29,439 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1679292000, to_ts=1760551200
2025-09-03 15:45:29,439 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 15:45:29,439 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: False
2025-09-03 15:45:29,439 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:846 -     From: 2023-03-20 06:00:00 UTC (1679292000)
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:847 -     To: 2025-10-15 18:00:00 UTC (1760551200)
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:848 -     Range: 81259200 seconds (22572.0 hours)
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:851 -     From: 2023-03-20 08:00:00 Central Europe Summer Time
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:852 -     To: 2025-10-15 20:00:00 Central Europe Summer Time
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1679292000, to_ts=1760551200
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2023-03-20 08:00:00 to 2025-10-15 20:00:00
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2023-03-20 06:00 to 2025-10-15 18:00
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1760551200
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: False
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1679292000, to_ts=1760551200, resolution=1d
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 15:45:29,440 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 15:45:29,442 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 15:45:29,442 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 15:45:29,442 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 15:45:29,442 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 15:45:29,443 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 15:45:29,443 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 15:45:29,443 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 15:45:29,443 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 15:45:29,443 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1679292000, to_ts=1760551200
2025-09-03 15:45:29,443 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1679292000, 1760551200]
2025-09-03 15:45:29,443 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 15:45:29,444 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1679292000 (type: <class 'int'>)
2025-09-03 15:45:29,444 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1760551200 (type: <class 'int'>)
2025-09-03 15:45:29,444 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1679292000 appears to be in SECONDS (correct for Redis)
2025-09-03 15:45:29,444 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 15:45:29,449 - logging_config - INFO - redis_utils.py:159 - Found 898 cached klines for BTCUSDT 1d between 1679292000 and 1760551200
2025-09-03 15:45:29,449 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 15:45:29,449 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~940
2025-09-03 15:45:29,449 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 898
2025-09-03 15:45:29,449 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 15:45:29,450 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 898 klines from Redis for BTCUSDT
2025-09-03 15:45:29,450 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 898 klines in Redis cache for BTCUSDT
2025-09-03 15:45:29,450 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 15:45:29,450 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:45:29,450 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 898
2025-09-03 15:45:29,450 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 898 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:45:29,638 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1679292000 and 1760551200
2025-09-03 15:45:29,643 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 898, Cleaned data points: 898
2025-09-03 15:45:29,643 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 15:45:29,643 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:29,643 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 15:45:29,646 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:45:29,646 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:29,646 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:45:29,646 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:45:29,647 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 898 total rows
2025-09-03 15:45:29,647 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 898 total rows
2025-09-03 15:45:29,647 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 898 total rows
2025-09-03 15:45:29,647 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:45:29,647 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:29,648 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:45:29,648 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 15:45:29,648 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 15:45:29,648 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 898
2025-09-03 15:45:29,650 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:45:29,650 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:29,651 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:45:29,651 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:45:29,651 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 898 total rows
2025-09-03 15:45:29,651 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 898 total rows
2025-09-03 15:45:29,651 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:45:29,651 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:29,652 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:45:29,652 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 15:45:29,652 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 15:45:29,652 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 898
2025-09-03 15:45:29,654 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:45:29,654 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:29,654 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:45:29,654 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:45:29,654 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 898 total rows
2025-09-03 15:45:29,654 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 898 total rows
2025-09-03 15:45:29,655 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:45:29,655 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:29,655 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:45:29,655 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 15:45:29,656 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 15:45:29,656 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 898
2025-09-03 15:45:29,658 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:45:29,658 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:29,658 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:45:29,658 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:45:29,658 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 898 total rows
2025-09-03 15:45:29,658 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 898 total rows
2025-09-03 15:45:29,659 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:45:29,659 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:29,659 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:45:29,659 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 15:45:29,659 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 15:45:29,659 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 898
2025-09-03 15:45:29,661 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:45:29,661 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:29,661 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:45:29,662 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:45:29,662 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 898 total rows
2025-09-03 15:45:29,662 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 898 total rows
2025-09-03 15:45:29,662 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:45:29,662 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:45:29,663 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 15:45:29,663 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:46:10,914 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for BTCUSDT from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:46:10,914 - logging_config - INFO - AppTradingView.py:391 - Email found in session for BTCUSDT request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 15:46:10,923 - logging_config - INFO - utility_endpoints.py:282 - Log stream generator cancelled.
2025-09-03 15:46:10,923 - logging_config - ERROR - websocket_handlers.py:711 - Failed to receive WebSocket message for BTCUSDT: (1001, '')
Traceback (most recent call last):
  File "c:\git\ai-trading-bot-2\websocket_handlers.py", line 706, in stream_combined_data_websocket_endpoint
    message = await asyncio.wait_for(websocket.receive_json(), timeout=1.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1001, '')
2025-09-03 15:46:11,018 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:46:11,018 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 15:46:11,019 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 15:46:11,019 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1679292000000, x_axis_max: 1760551200000
2025-09-03 15:46:11,019 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1679292000000, max_timestamp: 1760551200000
2025-09-03 15:46:11,019 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1679292000.0, max=1760551200.0
2025-09-03 15:46:11,019 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2023-03-20T06:00:00+00:00, max=2025-10-15T18:00:00+00:00
2025-09-03 15:46:11,019 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1679292000000, 'xAxisMax': 1760551200000, 'yAxisMin': 19182.385000000002, 'yAxisMax': 129589.715, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:46:11,052 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 15:46:11,058 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": "2023-03-20T06:00:00.000Z",
  "to_ts": "2025-10-15T18:00:00.000Z"
}
2025-09-03 15:46:11,058 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 15:46:11,058 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 2023-03-20T06:00:00.000Z (type: <class 'str'>)
2025-09-03 15:46:11,058 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 2025-10-15T18:00:00.000Z (type: <class 'str'>)
2025-09-03 15:46:11,058 - logging_config - INFO - websocket_handlers.py:756 - [TIMESTAMP DEBUG] Timestamps are ISO strings (correct format)
2025-09-03 15:46:11,058 - logging_config - INFO - websocket_handlers.py:763 - [TIMESTAMP CONVERSION] ISO strings -> Unix seconds:
2025-09-03 15:46:11,058 - logging_config - INFO - websocket_handlers.py:764 -   2023-03-20T06:00:00.000Z -> 1679292000 (2023-03-20 06:00:00 UTC)
2025-09-03 15:46:11,058 - logging_config - INFO - websocket_handlers.py:765 -   2025-10-15T18:00:00.000Z -> 1760551200 (2025-10-15 18:00:00 UTC)
2025-09-03 15:46:11,058 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 15:46:11,058 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1679292000 (type: <class 'int'>)
2025-09-03 15:46:11,058 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1760551200 (type: <class 'int'>)
2025-09-03 15:46:11,058 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 15:46:11,058 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 15:46:11,058 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 15:46:11,058 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 2023-03-20T06:00:00.000Z (type: <class 'str'>)
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 2025-10-15T18:00:00.000Z (type: <class 'str'>)
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=None, to_ts=None
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1679292000, to_ts=1760551200
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: False
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:846 -     From: 2023-03-20 06:00:00 UTC (1679292000)
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:847 -     To: 2025-10-15 18:00:00 UTC (1760551200)
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:848 -     Range: 81259200 seconds (22572.0 hours)
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:851 -     From: 2023-03-20 08:00:00 Central Europe Summer Time
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:852 -     To: 2025-10-15 20:00:00 Central Europe Summer Time
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1679292000, to_ts=1760551200
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2023-03-20 08:00:00 to 2025-10-15 20:00:00
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 15:46:11,059 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2023-03-20 06:00 to 2025-10-15 18:00
2025-09-03 15:46:11,061 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1760551200
2025-09-03 15:46:11,061 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: False
2025-09-03 15:46:11,061 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:46:11,061 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1679292000, to_ts=1760551200, resolution=1d
2025-09-03 15:46:11,061 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 15:46:11,061 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 15:46:11,061 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 15:46:11,061 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 15:46:11,061 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 15:46:11,061 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 15:46:11,062 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 15:46:11,062 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 15:46:11,062 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 15:46:11,062 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 15:46:11,062 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 15:46:11,062 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1679292000, to_ts=1760551200
2025-09-03 15:46:11,062 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1679292000, 1760551200]
2025-09-03 15:46:11,062 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 15:46:11,063 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1679292000 (type: <class 'int'>)
2025-09-03 15:46:11,063 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1760551200 (type: <class 'int'>)
2025-09-03 15:46:11,063 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1679292000 appears to be in SECONDS (correct for Redis)
2025-09-03 15:46:11,063 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 15:46:11,066 - logging_config - INFO - redis_utils.py:159 - Found 898 cached klines for BTCUSDT 1d between 1679292000 and 1760551200
2025-09-03 15:46:11,066 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 15:46:11,067 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~940
2025-09-03 15:46:11,067 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 898
2025-09-03 15:46:11,067 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 15:46:11,067 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 898 klines from Redis for BTCUSDT
2025-09-03 15:46:11,067 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 898 klines in Redis cache for BTCUSDT
2025-09-03 15:46:11,067 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 15:46:11,067 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:46:11,067 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 898
2025-09-03 15:46:11,067 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 898 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:46:11,069 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1679292000 and 1760551200
2025-09-03 15:46:11,072 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 898, Cleaned data points: 898
2025-09-03 15:46:11,072 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 15:46:11,072 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:11,072 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 15:46:11,074 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:46:11,074 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:11,075 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:46:11,075 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:46:11,075 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 898 total rows
2025-09-03 15:46:11,075 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 898 total rows
2025-09-03 15:46:11,075 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 898 total rows
2025-09-03 15:46:11,075 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:46:11,075 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:11,077 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:46:11,077 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 15:46:11,077 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 15:46:11,077 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 898
2025-09-03 15:46:11,078 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:46:11,079 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:11,079 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:46:11,079 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:46:11,079 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 898 total rows
2025-09-03 15:46:11,079 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 898 total rows
2025-09-03 15:46:11,079 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:46:11,079 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:11,080 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:46:11,080 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 15:46:11,080 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 15:46:11,080 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 898
2025-09-03 15:46:11,081 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:46:11,082 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:11,082 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:46:11,082 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:46:11,082 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 898 total rows
2025-09-03 15:46:11,082 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 898 total rows
2025-09-03 15:46:11,082 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:46:11,082 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:11,083 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:46:11,083 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 15:46:11,083 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 15:46:11,083 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 898
2025-09-03 15:46:11,085 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:46:11,085 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:11,085 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:46:11,086 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:46:11,086 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 898 total rows
2025-09-03 15:46:11,086 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 898 total rows
2025-09-03 15:46:11,086 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:46:11,086 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:11,087 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:46:11,087 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 15:46:11,087 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 15:46:11,087 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 898
2025-09-03 15:46:11,088 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:46:11,089 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:11,089 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:46:11,089 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:46:11,090 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 898 total rows
2025-09-03 15:46:11,090 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 898 total rows
2025-09-03 15:46:11,090 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:46:11,090 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:11,090 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 15:46:11,090 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:46:22,923 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for BTCUSDT from 192.168.1.1. Current session state: authenticated=None, email=None
2025-09-03 15:46:22,923 - logging_config - INFO - AppTradingView.py:384 - No email in session for BTCUSDT request from 192.168.1.1, redirecting to Google OAuth
2025-09-03 15:46:23,196 - logging_config - INFO - AppTradingView.py:257 - OAuthCallback: Received callback from Google with code: 4/0AVMBsJjnMNcgYa3WZh4ajxXzXR1DVSr_qXEKie1uHMw9CxI...
2025-09-03 15:46:23,204 - logging_config - WARNING - AppTradingView.py:271 - No scopes found in client_secret.json at c:/git/VidWebServer/client_secret_655872926127-9fihq5a2rdsiakqltvmt6urj7saanhhd.apps.googleusercontent.com.json. Check file structure.
2025-09-03 15:46:23,419 - logging_config - INFO - AppTradingView.py:315 - OAuthCallback: Successfully verified Google ID token for user 110230689089207649183 (email: klemenzivkovic@gmail.com)
2025-09-03 15:46:23,419 - logging_config - INFO - AppTradingView.py:317 - OAuthCallback: Before setting session - authenticated=None, email=None
2025-09-03 15:46:23,419 - logging_config - INFO - AppTradingView.py:320 - Login user in by google account. Session variable set: session["authenticated"] = True, session["email"] = klemenzivkovic@gmail.com
2025-09-03 15:46:23,419 - logging_config - INFO - AppTradingView.py:321 - OAuthCallback: After setting session - authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:46:23,419 - logging_config - INFO - AppTradingView.py:327 - OAuthCallback: [Placeholder] Creating or updating user in database for user_id: 110230689089207649183, email: klemenzivkovic@gmail.com
2025-09-03 15:46:23,420 - logging_config - INFO - AppTradingView.py:331 - OAuthCallback: [Placeholder] Establishing session for user_id: 110230689089207649183 and email: klemenzivkovic@gmail.com
2025-09-03 15:46:23,434 - logging_config - INFO - AppTradingView.py:147 - Chart page request from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:46:23,434 - logging_config - INFO - AppTradingView.py:166 - Email found in session for 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 15:46:23,443 - logging_config - INFO - utility_endpoints.py:282 - Log stream generator cancelled.
2025-09-03 15:46:23,444 - logging_config - ERROR - websocket_handlers.py:711 - Failed to receive WebSocket message for BTCUSDT: (1001, '')
Traceback (most recent call last):
  File "c:\git\ai-trading-bot-2\websocket_handlers.py", line 706, in stream_combined_data_websocket_endpoint
    message = await asyncio.wait_for(websocket.receive_json(), timeout=1.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1001, '')
2025-09-03 15:46:23,720 - logging_config - INFO - utility_endpoints.py:243 - GET /get_last_symbol request received.
2025-09-03 15:46:23,721 - logging_config - INFO - utility_endpoints.py:251 - Got last selected symbol for user klemenzivkovic@gmail.com: BTCUSDT
2025-09-03 15:46:23,742 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:46:23,743 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 15:46:23,756 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 15:46:23,756 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1679292000000, x_axis_max: 1760551200000
2025-09-03 15:46:23,756 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1679292000000, max_timestamp: 1760551200000
2025-09-03 15:46:23,756 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1679292000.0, max=1760551200.0
2025-09-03 15:46:23,756 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2023-03-20T06:00:00+00:00, max=2025-10-15T18:00:00+00:00
2025-09-03 15:46:23,756 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1679292000000, 'xAxisMax': 1760551200000, 'yAxisMin': 19182.385000000002, 'yAxisMax': 129589.715, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:46:23,826 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 15:46:23,843 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": "2023-03-20T06:00:00.000Z",
  "to_ts": "2025-10-15T18:00:00.000Z"
}
2025-09-03 15:46:23,843 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 15:46:23,843 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 2023-03-20T06:00:00.000Z (type: <class 'str'>)
2025-09-03 15:46:23,843 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 2025-10-15T18:00:00.000Z (type: <class 'str'>)
2025-09-03 15:46:23,843 - logging_config - INFO - websocket_handlers.py:756 - [TIMESTAMP DEBUG] Timestamps are ISO strings (correct format)
2025-09-03 15:46:23,843 - logging_config - INFO - websocket_handlers.py:763 - [TIMESTAMP CONVERSION] ISO strings -> Unix seconds:
2025-09-03 15:46:23,843 - logging_config - INFO - websocket_handlers.py:764 -   2023-03-20T06:00:00.000Z -> 1679292000 (2023-03-20 06:00:00 UTC)
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:765 -   2025-10-15T18:00:00.000Z -> 1760551200 (2025-10-15 18:00:00 UTC)
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1679292000 (type: <class 'int'>)
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1760551200 (type: <class 'int'>)
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 2023-03-20T06:00:00.000Z (type: <class 'str'>)
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 2025-10-15T18:00:00.000Z (type: <class 'str'>)
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=None, to_ts=None
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1679292000, to_ts=1760551200
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: False
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:846 -     From: 2023-03-20 06:00:00 UTC (1679292000)
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:847 -     To: 2025-10-15 18:00:00 UTC (1760551200)
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:848 -     Range: 81259200 seconds (22572.0 hours)
2025-09-03 15:46:23,844 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 15:46:23,846 - logging_config - INFO - websocket_handlers.py:851 -     From: 2023-03-20 08:00:00 Central Europe Summer Time
2025-09-03 15:46:23,846 - logging_config - INFO - websocket_handlers.py:852 -     To: 2025-10-15 20:00:00 Central Europe Summer Time
2025-09-03 15:46:23,846 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 15:46:23,846 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 15:46:23,846 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 15:46:23,846 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 15:46:23,846 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 15:46:23,846 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 15:46:23,846 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1679292000, to_ts=1760551200
2025-09-03 15:46:23,846 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2023-03-20 08:00:00 to 2025-10-15 20:00:00
2025-09-03 15:46:23,846 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 15:46:23,846 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 15:46:23,846 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 15:46:23,846 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 15:46:23,847 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2023-03-20 06:00 to 2025-10-15 18:00
2025-09-03 15:46:23,847 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1760551200
2025-09-03 15:46:23,847 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: False
2025-09-03 15:46:23,847 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:46:23,847 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1679292000, to_ts=1760551200, resolution=1d
2025-09-03 15:46:23,847 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 15:46:23,848 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 15:46:23,848 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 15:46:23,848 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 15:46:23,849 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 15:46:23,849 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 15:46:23,849 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 15:46:23,849 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 15:46:23,850 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 15:46:23,850 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 15:46:23,850 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 15:46:23,850 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1679292000, to_ts=1760551200
2025-09-03 15:46:23,850 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1679292000, 1760551200]
2025-09-03 15:46:23,850 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 15:46:23,850 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1679292000 (type: <class 'int'>)
2025-09-03 15:46:23,850 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1760551200 (type: <class 'int'>)
2025-09-03 15:46:23,850 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1679292000 appears to be in SECONDS (correct for Redis)
2025-09-03 15:46:23,850 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 15:46:23,854 - logging_config - INFO - redis_utils.py:159 - Found 898 cached klines for BTCUSDT 1d between 1679292000 and 1760551200
2025-09-03 15:46:23,854 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 15:46:23,854 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~940
2025-09-03 15:46:23,854 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 898
2025-09-03 15:46:23,854 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 15:46:23,854 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 898 klines from Redis for BTCUSDT
2025-09-03 15:46:23,854 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 898 klines in Redis cache for BTCUSDT
2025-09-03 15:46:23,856 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 15:46:23,856 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:46:23,856 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 898
2025-09-03 15:46:23,856 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 898 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:46:23,857 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1679292000 and 1760551200
2025-09-03 15:46:23,861 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 898, Cleaned data points: 898
2025-09-03 15:46:23,861 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 15:46:23,862 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:23,862 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 15:46:23,864 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:46:23,864 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:23,864 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:46:23,864 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:46:23,864 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 898 total rows
2025-09-03 15:46:23,865 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 898 total rows
2025-09-03 15:46:23,865 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 898 total rows
2025-09-03 15:46:23,865 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:46:23,865 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:23,866 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:46:23,866 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 15:46:23,866 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 15:46:23,866 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 898
2025-09-03 15:46:23,868 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:46:23,868 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:23,868 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:46:23,868 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:46:23,868 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 898 total rows
2025-09-03 15:46:23,868 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 898 total rows
2025-09-03 15:46:23,868 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:46:23,869 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:23,869 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:46:23,869 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 15:46:23,869 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 15:46:23,869 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 898
2025-09-03 15:46:23,871 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:46:23,871 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:23,871 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:46:23,871 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:46:23,872 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 898 total rows
2025-09-03 15:46:23,872 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 898 total rows
2025-09-03 15:46:23,872 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:46:23,872 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:23,872 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:46:23,872 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 15:46:23,873 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 15:46:23,873 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 898
2025-09-03 15:46:23,874 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:46:23,874 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:23,874 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:46:23,875 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:46:23,875 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 898 total rows
2025-09-03 15:46:23,875 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 898 total rows
2025-09-03 15:46:23,876 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:46:23,876 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:23,876 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:46:23,876 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 15:46:23,876 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 15:46:23,876 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 898
2025-09-03 15:46:23,879 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:46:23,879 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:23,879 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:46:23,880 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:46:23,880 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 898 total rows
2025-09-03 15:46:23,880 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 898 total rows
2025-09-03 15:46:23,881 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:46:23,881 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:46:23,881 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 15:46:23,881 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:46:31,707 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 15:47:03,823 - logging_config - ERROR - websocket_handlers.py:711 - Failed to receive WebSocket message for BTCUSDT: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
Traceback (most recent call last):
  File "c:\git\ai-trading-bot-2\websocket_handlers.py", line 706, in stream_combined_data_websocket_endpoint
    message = await asyncio.wait_for(websocket.receive_json(), timeout=1.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-09-03 15:47:38,062 - logging_config - INFO - AppTradingView.py:147 - Chart page request from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:47:38,062 - logging_config - INFO - AppTradingView.py:166 - Email found in session for 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 15:47:38,087 - logging_config - INFO - utility_endpoints.py:282 - Log stream generator cancelled.
2025-09-03 15:47:38,273 - logging_config - INFO - utility_endpoints.py:243 - GET /get_last_symbol request received.
2025-09-03 15:47:38,288 - logging_config - INFO - utility_endpoints.py:251 - Got last selected symbol for user klemenzivkovic@gmail.com: BTCUSDT
2025-09-03 15:47:38,305 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:47:38,306 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 15:47:38,336 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 15:47:38,336 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1679292000000, x_axis_max: 1760551200000
2025-09-03 15:47:38,336 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1679292000000, max_timestamp: 1760551200000
2025-09-03 15:47:38,336 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1679292000.0, max=1760551200.0
2025-09-03 15:47:38,336 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2023-03-20T06:00:00+00:00, max=2025-10-15T18:00:00+00:00
2025-09-03 15:47:38,336 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1679292000000, 'xAxisMax': 1760551200000, 'yAxisMin': 19182.385000000002, 'yAxisMax': 129589.715, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:47:38,394 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 15:47:38,404 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": "2023-03-20T06:00:00.000Z",
  "to_ts": "2025-10-15T18:00:00.000Z"
}
2025-09-03 15:47:38,404 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 15:47:38,404 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 2023-03-20T06:00:00.000Z (type: <class 'str'>)
2025-09-03 15:47:38,404 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 2025-10-15T18:00:00.000Z (type: <class 'str'>)
2025-09-03 15:47:38,404 - logging_config - INFO - websocket_handlers.py:756 - [TIMESTAMP DEBUG] Timestamps are ISO strings (correct format)
2025-09-03 15:47:38,404 - logging_config - INFO - websocket_handlers.py:763 - [TIMESTAMP CONVERSION] ISO strings -> Unix seconds:
2025-09-03 15:47:38,404 - logging_config - INFO - websocket_handlers.py:764 -   2023-03-20T06:00:00.000Z -> 1679292000 (2023-03-20 06:00:00 UTC)
2025-09-03 15:47:38,404 - logging_config - INFO - websocket_handlers.py:765 -   2025-10-15T18:00:00.000Z -> 1760551200 (2025-10-15 18:00:00 UTC)
2025-09-03 15:47:38,404 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 15:47:38,404 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1679292000 (type: <class 'int'>)
2025-09-03 15:47:38,404 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1760551200 (type: <class 'int'>)
2025-09-03 15:47:38,404 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 15:47:38,404 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 15:47:38,405 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 15:47:38,405 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 2023-03-20T06:00:00.000Z (type: <class 'str'>)
2025-09-03 15:47:38,405 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 2025-10-15T18:00:00.000Z (type: <class 'str'>)
2025-09-03 15:47:38,405 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 15:47:38,405 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 15:47:38,405 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 15:47:38,405 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=None, to_ts=None
2025-09-03 15:47:38,405 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1679292000, to_ts=1760551200
2025-09-03 15:47:38,405 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 15:47:38,405 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: False
2025-09-03 15:47:38,405 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 15:47:38,405 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 15:47:38,405 - logging_config - INFO - websocket_handlers.py:846 -     From: 2023-03-20 06:00:00 UTC (1679292000)
2025-09-03 15:47:38,406 - logging_config - INFO - websocket_handlers.py:847 -     To: 2025-10-15 18:00:00 UTC (1760551200)
2025-09-03 15:47:38,406 - logging_config - INFO - websocket_handlers.py:848 -     Range: 81259200 seconds (22572.0 hours)
2025-09-03 15:47:38,406 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 15:47:38,406 - logging_config - INFO - websocket_handlers.py:851 -     From: 2023-03-20 08:00:00 Central Europe Summer Time
2025-09-03 15:47:38,406 - logging_config - INFO - websocket_handlers.py:852 -     To: 2025-10-15 20:00:00 Central Europe Summer Time
2025-09-03 15:47:38,406 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 15:47:38,406 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 15:47:38,406 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 15:47:38,406 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 15:47:38,406 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 15:47:38,406 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 15:47:38,406 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1679292000, to_ts=1760551200
2025-09-03 15:47:38,406 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2023-03-20 08:00:00 to 2025-10-15 20:00:00
2025-09-03 15:47:38,407 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 15:47:38,407 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 15:47:38,407 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 15:47:38,407 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 15:47:38,407 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2023-03-20 06:00 to 2025-10-15 18:00
2025-09-03 15:47:38,407 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1760551200
2025-09-03 15:47:38,407 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: False
2025-09-03 15:47:38,407 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:47:38,407 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1679292000, to_ts=1760551200, resolution=1d
2025-09-03 15:47:38,407 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 15:47:38,407 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 15:47:38,407 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 15:47:38,408 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 15:47:38,408 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 15:47:38,408 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 15:47:38,408 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 15:47:38,408 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 15:47:38,409 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 15:47:38,409 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 15:47:38,409 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 15:47:38,409 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1679292000, to_ts=1760551200
2025-09-03 15:47:38,409 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1679292000, 1760551200]
2025-09-03 15:47:38,409 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 15:47:38,409 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1679292000 (type: <class 'int'>)
2025-09-03 15:47:38,409 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1760551200 (type: <class 'int'>)
2025-09-03 15:47:38,409 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1679292000 appears to be in SECONDS (correct for Redis)
2025-09-03 15:47:38,409 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 15:47:38,414 - logging_config - INFO - redis_utils.py:159 - Found 898 cached klines for BTCUSDT 1d between 1679292000 and 1760551200
2025-09-03 15:47:38,414 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 15:47:38,414 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~940
2025-09-03 15:47:38,414 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 898
2025-09-03 15:47:38,414 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 15:47:38,415 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 898 klines from Redis for BTCUSDT
2025-09-03 15:47:38,415 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 898 klines in Redis cache for BTCUSDT
2025-09-03 15:47:38,415 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 15:47:38,415 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:47:38,415 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 898
2025-09-03 15:47:38,415 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 898 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:47:38,416 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1679292000 and 1760551200
2025-09-03 15:47:38,420 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 898, Cleaned data points: 898
2025-09-03 15:47:38,420 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 15:47:38,420 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:47:38,420 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 15:47:38,423 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:47:38,424 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:47:38,424 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:47:38,424 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:47:38,424 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 898 total rows
2025-09-03 15:47:38,424 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 898 total rows
2025-09-03 15:47:38,424 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 898 total rows
2025-09-03 15:47:38,424 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:47:38,424 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:47:38,425 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:47:38,425 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 15:47:38,425 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 15:47:38,425 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 898
2025-09-03 15:47:38,427 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:47:38,428 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:47:38,428 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:47:38,428 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:47:38,428 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 898 total rows
2025-09-03 15:47:38,428 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 898 total rows
2025-09-03 15:47:38,428 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:47:38,428 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:47:38,429 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:47:38,429 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 15:47:38,429 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 15:47:38,429 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 898
2025-09-03 15:47:38,430 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:47:38,431 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:47:38,431 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:47:38,431 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:47:38,431 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 898 total rows
2025-09-03 15:47:38,431 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 898 total rows
2025-09-03 15:47:38,431 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:47:38,431 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:47:38,432 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:47:38,432 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 15:47:38,432 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 15:47:38,432 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 898
2025-09-03 15:47:38,434 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:47:38,434 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:47:38,434 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:47:38,434 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:47:38,434 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 898 total rows
2025-09-03 15:47:38,434 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 898 total rows
2025-09-03 15:47:38,434 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:47:38,434 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:47:38,434 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:47:38,434 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 15:47:38,434 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 15:47:38,434 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 898
2025-09-03 15:47:38,437 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:47:38,437 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:47:38,437 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:47:38,438 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:47:38,438 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 898 total rows
2025-09-03 15:47:38,438 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 898 total rows
2025-09-03 15:47:38,438 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:47:38,438 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:47:38,438 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 15:47:38,438 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:47:40,848 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 15:48:13,259 - logging_config - INFO - AppTradingView.py:147 - Chart page request from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:48:13,260 - logging_config - INFO - AppTradingView.py:166 - Email found in session for 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 15:48:13,280 - logging_config - ERROR - websocket_handlers.py:711 - Failed to receive WebSocket message for BTCUSDT: (1001, '')
Traceback (most recent call last):
  File "c:\git\ai-trading-bot-2\websocket_handlers.py", line 706, in stream_combined_data_websocket_endpoint
    message = await asyncio.wait_for(websocket.receive_json(), timeout=1.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1001, '')
2025-09-03 15:48:13,281 - logging_config - INFO - utility_endpoints.py:282 - Log stream generator cancelled.
2025-09-03 15:48:13,587 - logging_config - INFO - utility_endpoints.py:243 - GET /get_last_symbol request received.
2025-09-03 15:48:13,603 - logging_config - INFO - utility_endpoints.py:251 - Got last selected symbol for user klemenzivkovic@gmail.com: BTCUSDT
2025-09-03 15:48:13,636 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 15:48:13,637 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 15:48:13,673 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 15:48:13,673 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1679292000000, x_axis_max: 1760551200000
2025-09-03 15:48:13,673 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1679292000000, max_timestamp: 1760551200000
2025-09-03 15:48:13,673 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1679292000.0, max=1760551200.0
2025-09-03 15:48:13,673 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2023-03-20T06:00:00+00:00, max=2025-10-15T18:00:00+00:00
2025-09-03 15:48:13,673 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1679292000000, 'xAxisMax': 1760551200000, 'yAxisMin': 19182.385000000002, 'yAxisMax': 129589.715, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:48:16,920 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 15:48:17,841 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": "2023-03-20T06:00:00.000Z",
  "to_ts": "2025-10-15T18:00:00.000Z"
}
2025-09-03 15:48:17,841 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 15:48:17,841 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 2023-03-20T06:00:00.000Z (type: <class 'str'>)
2025-09-03 15:48:17,841 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 2025-10-15T18:00:00.000Z (type: <class 'str'>)
2025-09-03 15:48:17,842 - logging_config - INFO - websocket_handlers.py:756 - [TIMESTAMP DEBUG] Timestamps are ISO strings (correct format)
2025-09-03 15:48:17,842 - logging_config - INFO - websocket_handlers.py:763 - [TIMESTAMP CONVERSION] ISO strings -> Unix seconds:
2025-09-03 15:48:17,842 - logging_config - INFO - websocket_handlers.py:764 -   2023-03-20T06:00:00.000Z -> 1679292000 (2023-03-20 06:00:00 UTC)
2025-09-03 15:48:17,842 - logging_config - INFO - websocket_handlers.py:765 -   2025-10-15T18:00:00.000Z -> 1760551200 (2025-10-15 18:00:00 UTC)
2025-09-03 15:48:17,842 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 15:48:17,842 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1679292000 (type: <class 'int'>)
2025-09-03 15:48:17,842 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1760551200 (type: <class 'int'>)
2025-09-03 15:48:17,842 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 15:48:17,842 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 15:48:17,842 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 15:48:17,842 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 2023-03-20T06:00:00.000Z (type: <class 'str'>)
2025-09-03 15:48:17,842 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 2025-10-15T18:00:00.000Z (type: <class 'str'>)
2025-09-03 15:48:17,843 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 15:48:17,843 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 15:48:17,843 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 15:48:17,843 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=None, to_ts=None
2025-09-03 15:48:17,843 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1679292000, to_ts=1760551200
2025-09-03 15:48:17,843 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 15:48:17,843 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: False
2025-09-03 15:48:17,843 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 15:48:17,843 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 15:48:17,843 - logging_config - INFO - websocket_handlers.py:846 -     From: 2023-03-20 06:00:00 UTC (1679292000)
2025-09-03 15:48:17,843 - logging_config - INFO - websocket_handlers.py:847 -     To: 2025-10-15 18:00:00 UTC (1760551200)
2025-09-03 15:48:17,843 - logging_config - INFO - websocket_handlers.py:848 -     Range: 81259200 seconds (22572.0 hours)
2025-09-03 15:48:17,844 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 15:48:17,844 - logging_config - INFO - websocket_handlers.py:851 -     From: 2023-03-20 08:00:00 Central Europe Summer Time
2025-09-03 15:48:17,844 - logging_config - INFO - websocket_handlers.py:852 -     To: 2025-10-15 20:00:00 Central Europe Summer Time
2025-09-03 15:48:17,844 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 15:48:17,844 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 15:48:17,844 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 15:48:17,844 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 15:48:17,844 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 15:48:17,844 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 15:48:17,844 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1679292000, to_ts=1760551200
2025-09-03 15:48:17,845 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2023-03-20 08:00:00 to 2025-10-15 20:00:00
2025-09-03 15:48:17,845 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 15:48:17,845 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 15:48:17,845 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 15:48:17,845 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 15:48:17,845 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2023-03-20 06:00 to 2025-10-15 18:00
2025-09-03 15:48:17,845 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1760551200
2025-09-03 15:48:17,845 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: False
2025-09-03 15:48:17,846 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:48:17,846 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1679292000, to_ts=1760551200, resolution=1d
2025-09-03 15:48:17,846 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 15:48:17,846 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 15:48:17,846 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 15:48:17,847 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 15:48:17,847 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 15:48:17,848 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 15:48:17,848 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 15:48:17,848 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 15:48:17,848 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 15:48:17,848 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 15:48:17,849 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 15:48:17,849 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1679292000, to_ts=1760551200
2025-09-03 15:48:17,849 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1679292000, 1760551200]
2025-09-03 15:48:17,849 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 15:48:17,849 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1679292000 (type: <class 'int'>)
2025-09-03 15:48:17,849 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1760551200 (type: <class 'int'>)
2025-09-03 15:48:17,849 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1679292000 appears to be in SECONDS (correct for Redis)
2025-09-03 15:48:17,849 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 15:48:17,853 - logging_config - INFO - redis_utils.py:159 - Found 898 cached klines for BTCUSDT 1d between 1679292000 and 1760551200
2025-09-03 15:48:17,853 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 15:48:17,854 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~940
2025-09-03 15:48:17,854 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 898
2025-09-03 15:48:17,854 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 15:48:17,855 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 898 klines from Redis for BTCUSDT
2025-09-03 15:48:17,855 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 898 klines in Redis cache for BTCUSDT
2025-09-03 15:48:17,855 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 15:48:17,855 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:48:17,855 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 898
2025-09-03 15:48:17,855 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 898 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:48:17,856 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1679292000 and 1760551200
2025-09-03 15:48:17,861 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 898, Cleaned data points: 898
2025-09-03 15:48:17,861 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 15:48:17,862 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:48:17,862 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 15:48:17,864 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:48:17,864 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:48:17,864 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:48:17,864 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:48:17,865 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 898 total rows
2025-09-03 15:48:17,865 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 898 total rows
2025-09-03 15:48:17,865 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 898 total rows
2025-09-03 15:48:17,865 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:48:17,865 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:48:17,866 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:48:17,866 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 15:48:17,866 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 15:48:17,866 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 898
2025-09-03 15:48:17,867 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:48:17,868 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:48:17,868 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:48:17,868 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:48:17,868 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 898 total rows
2025-09-03 15:48:17,869 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 898 total rows
2025-09-03 15:48:17,869 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:48:17,869 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:48:17,870 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:48:17,870 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 15:48:17,870 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 15:48:17,870 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 898
2025-09-03 15:48:17,872 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:48:17,872 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:48:17,872 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:48:17,872 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:48:17,874 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 898 total rows
2025-09-03 15:48:17,874 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 898 total rows
2025-09-03 15:48:17,874 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:48:17,874 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:48:17,874 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:48:17,875 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 15:48:17,875 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 15:48:17,875 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 898
2025-09-03 15:48:17,876 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:48:17,876 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:48:17,876 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:48:17,876 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:48:17,876 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 898 total rows
2025-09-03 15:48:17,877 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 898 total rows
2025-09-03 15:48:17,877 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:48:17,877 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:48:17,877 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 898
2025-09-03 15:48:17,878 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 15:48:17,878 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 15:48:17,878 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 898
2025-09-03 15:48:17,879 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 898 rows
2025-09-03 15:48:17,881 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:48:17,881 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-03-21 00:00:00'), Timestamp('2023-03-22 00:00:00'), Timestamp('2023-03-23 00:00:00'), Timestamp('2023-03-24 00:00:00'), Timestamp('2023-03-25 00:00:00')]
2025-09-03 15:48:17,881 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:48:17,881 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 898 total rows
2025-09-03 15:48:17,881 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 898 total rows
2025-09-03 15:48:17,882 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:48:17,882 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-03-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:48:17,882 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 15:48:17,882 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:48:49,656 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 15:50:00,580 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 15:51:17,263 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 15:52:26,431 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 15:53:35,247 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 15:54:44,402 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 15:55:48,851 - logging_config - INFO - utility_endpoints.py:168 - POST /settings: RAW data received from client for symbol 'BTCUSDT': {'symbol': 'BTCUSDT', 'resolution': '1d', 'range': '30d', 'xAxisMin': 1686552610396, 'xAxisMax': 1760082232530, 'yAxisMin': 25885.018997955398, 'yAxisMax': 125785.70240739951, 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'useLocalOllama': False, 'localOllamaModelName': '', 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'showAgentTrades': False, 'streamDeltaTime': 0, 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:55:48,851 - logging_config - INFO - utility_endpoints.py:199 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: current_symbol_settings compiled for Redis save: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1686552610396, 'xAxisMax': 1760082232530, 'yAxisMin': 25885.018997955398, 'yAxisMax': 125785.70240739951, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:55:48,851 - logging_config - INFO - utility_endpoints.py:201 - POST /settings for BTCUSDT: Client sent streamDeltaTime: 0. Value to be saved in Redis for streamDeltaTime: 0
2025-09-03 15:55:48,851 - logging_config - INFO - utility_endpoints.py:204 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: Settings updated in Redis for BTCUSDT: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1686552610396, 'xAxisMax': 1760082232530, 'yAxisMin': 25885.018997955398, 'yAxisMax': 125785.70240739951, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:55:48,934 - logging_config - INFO - utility_endpoints.py:168 - POST /settings: RAW data received from client for symbol 'BTCUSDT': {'symbol': 'BTCUSDT', 'resolution': '1d', 'range': '30d', 'xAxisMin': 1693125539774, 'xAxisMax': 1759657893216, 'yAxisMin': 31949.81303870539, 'yAxisMax': 122343.68947493462, 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'useLocalOllama': False, 'localOllamaModelName': '', 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'showAgentTrades': False, 'streamDeltaTime': 0, 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:55:48,935 - logging_config - INFO - utility_endpoints.py:199 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: current_symbol_settings compiled for Redis save: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1693125539774, 'xAxisMax': 1759657893216, 'yAxisMin': 31949.81303870539, 'yAxisMax': 122343.68947493462, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:55:48,935 - logging_config - INFO - utility_endpoints.py:201 - POST /settings for BTCUSDT: Client sent streamDeltaTime: 0. Value to be saved in Redis for streamDeltaTime: 0
2025-09-03 15:55:48,935 - logging_config - INFO - utility_endpoints.py:204 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: Settings updated in Redis for BTCUSDT: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1693125539774, 'xAxisMax': 1759657893216, 'yAxisMin': 31949.81303870539, 'yAxisMax': 122343.68947493462, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:55:49,033 - logging_config - INFO - utility_endpoints.py:168 - POST /settings: RAW data received from client for symbol 'BTCUSDT': {'symbol': 'BTCUSDT', 'resolution': '1d', 'range': '30d', 'xAxisMin': 1699076572223, 'xAxisMax': 1759273935126, 'yAxisMin': 37437.465619457485, 'yAxisMax': 119229.22738027672, 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'useLocalOllama': False, 'localOllamaModelName': '', 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'showAgentTrades': False, 'streamDeltaTime': 0, 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:55:49,034 - logging_config - INFO - utility_endpoints.py:199 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: current_symbol_settings compiled for Redis save: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1699076572223, 'xAxisMax': 1759273935126, 'yAxisMin': 37437.465619457485, 'yAxisMax': 119229.22738027672, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:55:49,034 - logging_config - INFO - utility_endpoints.py:201 - POST /settings for BTCUSDT: Client sent streamDeltaTime: 0. Value to be saved in Redis for streamDeltaTime: 0
2025-09-03 15:55:49,035 - logging_config - INFO - utility_endpoints.py:204 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: Settings updated in Redis for BTCUSDT: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1699076572223, 'xAxisMax': 1759273935126, 'yAxisMin': 37437.465619457485, 'yAxisMax': 119229.22738027672, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:55:49,160 - logging_config - INFO - utility_endpoints.py:168 - POST /settings: RAW data received from client for symbol 'BTCUSDT': {'symbol': 'BTCUSDT', 'resolution': '1d', 'range': '30d', 'xAxisMin': 1709327377490, 'xAxisMax': 1758612157184, 'yAxisMin': 46895.80894177308, 'yAxisMax': 113861.23964378348, 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'useLocalOllama': False, 'localOllamaModelName': '', 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'showAgentTrades': False, 'streamDeltaTime': 0, 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:55:49,161 - logging_config - INFO - utility_endpoints.py:199 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: current_symbol_settings compiled for Redis save: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1709327377490, 'xAxisMax': 1758612157184, 'yAxisMin': 46895.80894177308, 'yAxisMax': 113861.23964378348, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:55:49,161 - logging_config - INFO - utility_endpoints.py:201 - POST /settings for BTCUSDT: Client sent streamDeltaTime: 0. Value to be saved in Redis for streamDeltaTime: 0
2025-09-03 15:55:49,162 - logging_config - INFO - utility_endpoints.py:204 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: Settings updated in Redis for BTCUSDT: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1709327377490, 'xAxisMax': 1758612157184, 'yAxisMin': 46895.80894177308, 'yAxisMax': 113861.23964378348, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:55:49,260 - logging_config - INFO - utility_endpoints.py:168 - POST /settings: RAW data received from client for symbol 'BTCUSDT': {'symbol': 'BTCUSDT', 'resolution': '1d', 'range': '30d', 'xAxisMin': 1713729743814, 'xAxisMax': 1758327714035, 'yAxisMin': 50961.16196236529, 'yAxisMax': 111553.98937643835, 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'useLocalOllama': False, 'localOllamaModelName': '', 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'showAgentTrades': False, 'streamDeltaTime': 0, 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:55:49,260 - logging_config - INFO - utility_endpoints.py:199 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: current_symbol_settings compiled for Redis save: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1713729743814, 'xAxisMax': 1758327714035, 'yAxisMin': 50961.16196236529, 'yAxisMax': 111553.98937643835, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:55:49,261 - logging_config - INFO - utility_endpoints.py:201 - POST /settings for BTCUSDT: Client sent streamDeltaTime: 0. Value to be saved in Redis for streamDeltaTime: 0
2025-09-03 15:55:49,261 - logging_config - INFO - utility_endpoints.py:204 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: Settings updated in Redis for BTCUSDT: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1713729743814, 'xAxisMax': 1758327714035, 'yAxisMin': 50961.16196236529, 'yAxisMax': 111553.98937643835, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:55:50,006 - logging_config - INFO - utility_endpoints.py:168 - POST /settings: RAW data received from client for symbol 'BTCUSDT': {'symbol': 'BTCUSDT', 'resolution': '1d', 'range': '30d', 'xAxisMin': 1723775326215, 'xAxisMax': 1768376896437, 'yAxisMin': 67298.04518603167, 'yAxisMax': 127890.87260010473, 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'useLocalOllama': False, 'localOllamaModelName': '', 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'showAgentTrades': False, 'streamDeltaTime': 0, 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:55:50,007 - logging_config - INFO - utility_endpoints.py:199 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: current_symbol_settings compiled for Redis save: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1723775326215, 'xAxisMax': 1768376896437, 'yAxisMin': 67298.04518603167, 'yAxisMax': 127890.87260010473, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:55:50,007 - logging_config - INFO - utility_endpoints.py:201 - POST /settings for BTCUSDT: Client sent streamDeltaTime: 0. Value to be saved in Redis for streamDeltaTime: 0
2025-09-03 15:55:50,008 - logging_config - INFO - utility_endpoints.py:204 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: Settings updated in Redis for BTCUSDT: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1723775326215, 'xAxisMax': 1768376896437, 'yAxisMin': 67298.04518603167, 'yAxisMax': 127890.87260010473, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:55:53,223 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": 1701474541104,
  "to_ts": 1790677681548
}
2025-09-03 15:55:53,223 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 15:55:53,223 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 1701474541104 (type: <class 'int'>)
2025-09-03 15:55:53,224 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 1790677681548 (type: <class 'int'>)
2025-09-03 15:55:53,224 - logging_config - WARNING - websocket_handlers.py:771 - [TIMESTAMP DEBUG] from_ts 1701474541104 appears to be in MILLISECONDS (should be seconds)
2025-09-03 15:55:53,224 - logging_config - INFO - websocket_handlers.py:772 -   Converting to seconds: 1701474541
2025-09-03 15:55:53,224 - logging_config - INFO - websocket_handlers.py:776 - [TIMESTAMP CONVERSION] Client milliseconds -> Server seconds:
2025-09-03 15:55:53,224 - logging_config - INFO - websocket_handlers.py:777 -   1701474541104 -> 1701474541 (2023-12-01 23:49:01 UTC)
2025-09-03 15:55:53,224 - logging_config - INFO - websocket_handlers.py:778 -   1790677681548 -> 1790677681 (2026-09-29 10:28:01 UTC)
2025-09-03 15:55:53,224 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 15:55:53,224 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1701474541 (type: <class 'int'>)
2025-09-03 15:55:53,224 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1790677681 (type: <class 'int'>)
2025-09-03 15:55:53,224 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 15:55:53,224 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 15:55:53,224 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 15:55:53,224 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 1701474541104 (type: <class 'int'>)
2025-09-03 15:55:53,225 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 1790677681548 (type: <class 'int'>)
2025-09-03 15:55:53,225 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 15:55:53,225 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 15:55:53,225 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 15:55:53,225 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=1679292000, to_ts=1760551200
2025-09-03 15:55:53,225 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1701474541, to_ts=1790677681
2025-09-03 15:55:53,225 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 15:55:53,225 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: True
2025-09-03 15:55:53,225 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 15:55:53,225 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 15:55:53,225 - logging_config - INFO - websocket_handlers.py:846 -     From: 2023-12-01 23:49:01 UTC (1701474541)
2025-09-03 15:55:53,225 - logging_config - INFO - websocket_handlers.py:847 -     To: 2026-09-29 10:28:01 UTC (1790677681)
2025-09-03 15:55:53,225 - logging_config - INFO - websocket_handlers.py:848 -     Range: 89203140 seconds (24778.7 hours)
2025-09-03 15:55:53,225 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 15:55:53,225 - logging_config - INFO - websocket_handlers.py:851 -     From: 2023-12-02 01:49:01 Central Europe Summer Time
2025-09-03 15:55:53,225 - logging_config - INFO - websocket_handlers.py:852 -     To: 2026-09-29 12:28:01 Central Europe Summer Time
2025-09-03 15:55:53,226 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 15:55:53,226 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 15:55:53,226 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 15:55:53,226 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 15:55:53,226 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 15:55:53,226 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 15:55:53,226 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1701474541, to_ts=1790677681
2025-09-03 15:55:53,226 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2023-12-02 01:49:01 to 2026-09-29 12:28:01
2025-09-03 15:55:53,226 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 15:55:53,226 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 15:55:53,226 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 15:55:53,226 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 15:55:53,226 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2023-12-01 23:49 to 2026-09-29 10:28
2025-09-03 15:55:53,226 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1790677681
2025-09-03 15:55:53,226 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: True
2025-09-03 15:55:53,226 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:55:53,227 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1701474541, to_ts=1790677681, resolution=1d
2025-09-03 15:55:53,227 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 15:55:53,227 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 15:55:53,227 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 15:55:53,227 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 15:55:53,227 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 15:55:53,228 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 15:55:53,229 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 15:55:53,229 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 15:55:53,229 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 15:55:53,229 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 15:55:53,229 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 15:55:53,229 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1701474541, to_ts=1790677681
2025-09-03 15:55:53,230 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1701474541, 1790677681]
2025-09-03 15:55:53,230 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 15:55:53,230 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1701474541 (type: <class 'int'>)
2025-09-03 15:55:53,230 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1790677681 (type: <class 'int'>)
2025-09-03 15:55:53,230 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1701474541 appears to be in SECONDS (correct for Redis)
2025-09-03 15:55:53,230 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 15:55:53,234 - logging_config - INFO - redis_utils.py:159 - Found 642 cached klines for BTCUSDT 1d between 1701474541 and 1790677681
2025-09-03 15:55:53,234 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 15:55:53,234 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~1032
2025-09-03 15:55:53,234 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 642
2025-09-03 15:55:53,234 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 15:55:53,235 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 642 klines from Redis for BTCUSDT
2025-09-03 15:55:53,235 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 642 klines in Redis cache for BTCUSDT
2025-09-03 15:55:53,235 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 15:55:53,235 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:55:53,235 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 642
2025-09-03 15:55:53,235 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 642 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:55:53,237 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1701474541 and 1790677681
2025-09-03 15:55:53,240 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 642, Cleaned data points: 642
2025-09-03 15:55:53,240 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 15:55:53,240 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2023-12-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:55:53,241 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 15:55:53,243 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 642 rows
2025-09-03 15:55:53,244 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-12-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:55:53,244 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-12-02 00:00:00'), Timestamp('2023-12-03 00:00:00'), Timestamp('2023-12-04 00:00:00'), Timestamp('2023-12-05 00:00:00'), Timestamp('2023-12-06 00:00:00')]
2025-09-03 15:55:53,244 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:55:53,244 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 642 total rows
2025-09-03 15:55:53,245 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 642 total rows
2025-09-03 15:55:53,245 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 642 total rows
2025-09-03 15:55:53,245 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:55:53,245 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-12-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:55:53,246 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 642
2025-09-03 15:55:53,246 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 15:55:53,246 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 15:55:53,246 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 642
2025-09-03 15:55:53,248 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 642 rows
2025-09-03 15:55:53,248 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-12-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:55:53,248 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-12-02 00:00:00'), Timestamp('2023-12-03 00:00:00'), Timestamp('2023-12-04 00:00:00'), Timestamp('2023-12-05 00:00:00'), Timestamp('2023-12-06 00:00:00')]
2025-09-03 15:55:53,248 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:55:53,248 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 642 total rows
2025-09-03 15:55:53,249 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 642 total rows
2025-09-03 15:55:53,249 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:55:53,249 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-12-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:55:53,249 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 642
2025-09-03 15:55:53,249 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 15:55:53,249 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 15:55:53,249 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 642
2025-09-03 15:55:53,252 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 642 rows
2025-09-03 15:55:53,252 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-12-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:55:53,252 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-12-02 00:00:00'), Timestamp('2023-12-03 00:00:00'), Timestamp('2023-12-04 00:00:00'), Timestamp('2023-12-05 00:00:00'), Timestamp('2023-12-06 00:00:00')]
2025-09-03 15:55:53,252 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:55:53,253 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 642 total rows
2025-09-03 15:55:53,253 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 642 total rows
2025-09-03 15:55:53,253 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:55:53,253 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-12-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:55:53,254 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 642
2025-09-03 15:55:53,254 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 15:55:53,254 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 15:55:53,254 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 642
2025-09-03 15:55:53,256 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 642 rows
2025-09-03 15:55:53,256 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-12-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:55:53,256 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-12-02 00:00:00'), Timestamp('2023-12-03 00:00:00'), Timestamp('2023-12-04 00:00:00'), Timestamp('2023-12-05 00:00:00'), Timestamp('2023-12-06 00:00:00')]
2025-09-03 15:55:53,256 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:55:53,256 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 642 total rows
2025-09-03 15:55:53,256 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 642 total rows
2025-09-03 15:55:53,257 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:55:53,257 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-12-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:55:53,257 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 642
2025-09-03 15:55:53,257 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 15:55:53,258 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 15:55:53,258 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 642
2025-09-03 15:55:53,259 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 642 rows
2025-09-03 15:55:53,259 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2023-12-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:55:53,259 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2023-12-02 00:00:00'), Timestamp('2023-12-03 00:00:00'), Timestamp('2023-12-04 00:00:00'), Timestamp('2023-12-05 00:00:00'), Timestamp('2023-12-06 00:00:00')]
2025-09-03 15:55:53,260 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 15:55:53,260 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 642 total rows
2025-09-03 15:55:53,260 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 642 total rows
2025-09-03 15:55:53,260 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 15:55:53,261 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2023-12-02 00:00:00 to 2025-09-03 00:00:00
2025-09-03 15:55:53,262 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 15:55:53,262 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 15:55:55,596 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 15:56:17,057 - logging_config - ERROR - websocket_handlers.py:711 - Failed to receive WebSocket message for BTCUSDT: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
Traceback (most recent call last):
  File "c:\git\ai-trading-bot-2\websocket_handlers.py", line 706, in stream_combined_data_websocket_endpoint
    message = await asyncio.wait_for(websocket.receive_json(), timeout=1.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-09-03 15:56:35,848 - logging_config - INFO - utility_endpoints.py:168 - POST /settings: RAW data received from client for symbol 'BTCUSDT': {'symbol': 'BTCUSDT', 'resolution': '1d', 'range': '30d', 'xAxisMin': 1745973141950, 'xAxisMax': 1766015901711, 'yAxisMin': 94961.50637481551, 'yAxisMax': 122187.61874971454, 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'useLocalOllama': False, 'localOllamaModelName': '', 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'showAgentTrades': False, 'streamDeltaTime': 0, 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:56:35,848 - logging_config - INFO - utility_endpoints.py:199 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: current_symbol_settings compiled for Redis save: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1745973141950, 'xAxisMax': 1766015901711, 'yAxisMin': 94961.50637481551, 'yAxisMax': 122187.61874971454, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:56:35,849 - logging_config - INFO - utility_endpoints.py:201 - POST /settings for BTCUSDT: Client sent streamDeltaTime: 0. Value to be saved in Redis for streamDeltaTime: 0
2025-09-03 15:56:35,849 - logging_config - INFO - utility_endpoints.py:204 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: Settings updated in Redis for BTCUSDT: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1745973141950, 'xAxisMax': 1766015901711, 'yAxisMin': 94961.50637481551, 'yAxisMax': 122187.61874971454, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:56:35,872 - logging_config - INFO - utility_endpoints.py:168 - POST /settings: RAW data received from client for symbol 'BTCUSDT': {'symbol': 'BTCUSDT', 'resolution': '1d', 'range': '30d', 'xAxisMin': 1726827056036, 'xAxisMax': 1767184568262, 'yAxisMin': 70088.1515358795, 'yAxisMax': 124914.80904472788, 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'useLocalOllama': False, 'localOllamaModelName': '', 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'showAgentTrades': False, 'streamDeltaTime': 0, 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:56:35,872 - logging_config - INFO - utility_endpoints.py:199 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: current_symbol_settings compiled for Redis save: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1726827056036, 'xAxisMax': 1767184568262, 'yAxisMin': 70088.1515358795, 'yAxisMax': 124914.80904472788, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:56:35,872 - logging_config - INFO - utility_endpoints.py:201 - POST /settings for BTCUSDT: Client sent streamDeltaTime: 0. Value to be saved in Redis for streamDeltaTime: 0
2025-09-03 15:56:35,873 - logging_config - INFO - utility_endpoints.py:204 - POST /settings for BTCUSDT and email klemenzivkovic@gmail.com: Settings updated in Redis for BTCUSDT: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1726827056036, 'xAxisMax': 1767184568262, 'yAxisMin': 70088.1515358795, 'yAxisMax': 124914.80904472788, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 15:57:05,975 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 15:58:16,707 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 15:59:27,157 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 16:00:23,142 - logging_config - INFO - AppTradingView.py:147 - Chart page request from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:00:23,142 - logging_config - INFO - AppTradingView.py:166 - Email found in session for 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:00:23,152 - logging_config - INFO - utility_endpoints.py:282 - Log stream generator cancelled.
2025-09-03 16:00:23,520 - logging_config - INFO - utility_endpoints.py:243 - GET /get_last_symbol request received.
2025-09-03 16:00:23,521 - logging_config - INFO - utility_endpoints.py:251 - Got last selected symbol for user klemenzivkovic@gmail.com: BTCUSDT
2025-09-03 16:00:23,569 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:00:23,570 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:00:23,602 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 16:00:23,602 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1726827056036, x_axis_max: 1767184568262
2025-09-03 16:00:23,602 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1726827056036, max_timestamp: 1767184568262
2025-09-03 16:00:23,602 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1726827056.036, max=1767184568.262
2025-09-03 16:00:23,602 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2024-09-20T10:10:56.036000+00:00, max=2025-12-31T12:36:08.262000+00:00
2025-09-03 16:00:23,602 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1726827056036, 'xAxisMax': 1767184568262, 'yAxisMin': 70088.1515358795, 'yAxisMax': 124914.80904472788, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 16:00:27,554 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 16:00:37,605 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 16:01:07,908 - logging_config - ERROR - websocket_handlers.py:711 - Failed to receive WebSocket message for BTCUSDT: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
Traceback (most recent call last):
  File "c:\git\ai-trading-bot-2\websocket_handlers.py", line 706, in stream_combined_data_websocket_endpoint
    message = await asyncio.wait_for(websocket.receive_json(), timeout=1.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-09-03 16:01:10,562 - logging_config - INFO - AppTradingView.py:147 - Chart page request from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:01:10,563 - logging_config - INFO - AppTradingView.py:166 - Email found in session for 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:01:10,575 - logging_config - INFO - utility_endpoints.py:282 - Log stream generator cancelled.
2025-09-03 16:01:10,903 - logging_config - INFO - utility_endpoints.py:243 - GET /get_last_symbol request received.
2025-09-03 16:01:10,904 - logging_config - INFO - utility_endpoints.py:251 - Got last selected symbol for user klemenzivkovic@gmail.com: BTCUSDT
2025-09-03 16:01:10,945 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:01:10,946 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:01:10,971 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 16:01:10,971 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1726827056036, x_axis_max: 1767184568262
2025-09-03 16:01:10,971 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1726827056036, max_timestamp: 1767184568262
2025-09-03 16:01:10,971 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1726827056.036, max=1767184568.262
2025-09-03 16:01:10,971 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2024-09-20T10:10:56.036000+00:00, max=2025-12-31T12:36:08.262000+00:00
2025-09-03 16:01:10,971 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1726827056036, 'xAxisMax': 1767184568262, 'yAxisMin': 70088.1515358795, 'yAxisMax': 124914.80904472788, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 16:01:11,012 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 16:01:11,026 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": "2024-09-20T10:10:56.036Z",
  "to_ts": "2025-12-31T12:36:08.262Z"
}
2025-09-03 16:01:11,027 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 16:01:11,027 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 2024-09-20T10:10:56.036Z (type: <class 'str'>)
2025-09-03 16:01:11,027 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 2025-12-31T12:36:08.262Z (type: <class 'str'>)
2025-09-03 16:01:11,027 - logging_config - INFO - websocket_handlers.py:756 - [TIMESTAMP DEBUG] Timestamps are ISO strings (correct format)
2025-09-03 16:01:11,027 - logging_config - INFO - websocket_handlers.py:763 - [TIMESTAMP CONVERSION] ISO strings -> Unix seconds:
2025-09-03 16:01:11,027 - logging_config - INFO - websocket_handlers.py:764 -   2024-09-20T10:10:56.036Z -> 1726827056 (2024-09-20 10:10:56 UTC)
2025-09-03 16:01:11,027 - logging_config - INFO - websocket_handlers.py:765 -   2025-12-31T12:36:08.262Z -> 1767184568 (2025-12-31 12:36:08 UTC)
2025-09-03 16:01:11,027 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 16:01:11,027 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1726827056 (type: <class 'int'>)
2025-09-03 16:01:11,027 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1767184568 (type: <class 'int'>)
2025-09-03 16:01:11,028 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 16:01:11,028 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 16:01:11,028 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 16:01:11,028 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 2024-09-20T10:10:56.036Z (type: <class 'str'>)
2025-09-03 16:01:11,028 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 2025-12-31T12:36:08.262Z (type: <class 'str'>)
2025-09-03 16:01:11,028 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 16:01:11,028 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 16:01:11,028 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 16:01:11,028 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=None, to_ts=None
2025-09-03 16:01:11,028 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1726827056, to_ts=1767184568
2025-09-03 16:01:11,028 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 16:01:11,028 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: False
2025-09-03 16:01:11,028 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 16:01:11,028 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 16:01:11,029 - logging_config - INFO - websocket_handlers.py:846 -     From: 2024-09-20 10:10:56 UTC (1726827056)
2025-09-03 16:01:11,029 - logging_config - INFO - websocket_handlers.py:847 -     To: 2025-12-31 12:36:08 UTC (1767184568)
2025-09-03 16:01:11,029 - logging_config - INFO - websocket_handlers.py:848 -     Range: 40357512 seconds (11210.4 hours)
2025-09-03 16:01:11,029 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 16:01:11,029 - logging_config - INFO - websocket_handlers.py:851 -     From: 2024-09-20 12:10:56 Central Europe Summer Time
2025-09-03 16:01:11,029 - logging_config - INFO - websocket_handlers.py:852 -     To: 2025-12-31 14:36:08 Central Europe Summer Time
2025-09-03 16:01:11,029 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 16:01:11,029 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 16:01:11,029 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 16:01:11,029 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 16:01:11,029 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 16:01:11,029 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 16:01:11,029 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1726827056, to_ts=1767184568
2025-09-03 16:01:11,029 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2024-09-20 12:10:56 to 2025-12-31 14:36:08
2025-09-03 16:01:11,029 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 16:01:11,029 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 16:01:11,029 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 16:01:11,029 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 16:01:11,030 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2024-09-20 10:10 to 2025-12-31 12:36
2025-09-03 16:01:11,030 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1767184568
2025-09-03 16:01:11,030 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: False
2025-09-03 16:01:11,030 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:01:11,030 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1726827056, to_ts=1767184568, resolution=1d
2025-09-03 16:01:11,030 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 16:01:11,030 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 16:01:11,030 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 16:01:11,030 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 16:01:11,031 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 16:01:11,031 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 16:01:11,031 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 16:01:11,031 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 16:01:11,032 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 16:01:11,032 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 16:01:11,032 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 16:01:11,033 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1726827056, to_ts=1767184568
2025-09-03 16:01:11,033 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1726827056, 1767184568]
2025-09-03 16:01:11,033 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 16:01:11,033 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1726827056 (type: <class 'int'>)
2025-09-03 16:01:11,033 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1767184568 (type: <class 'int'>)
2025-09-03 16:01:11,033 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1726827056 appears to be in SECONDS (correct for Redis)
2025-09-03 16:01:11,033 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 16:01:11,036 - logging_config - INFO - redis_utils.py:159 - Found 348 cached klines for BTCUSDT 1d between 1726827056 and 1767184568
2025-09-03 16:01:11,036 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 16:01:11,036 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~467
2025-09-03 16:01:11,036 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 348
2025-09-03 16:01:11,037 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 16:01:11,037 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 348 klines from Redis for BTCUSDT
2025-09-03 16:01:11,037 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 348 klines in Redis cache for BTCUSDT
2025-09-03 16:01:11,037 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 16:01:11,037 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:01:11,037 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 348
2025-09-03 16:01:11,038 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 348 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:01:11,039 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1726827056 and 1767184568
2025-09-03 16:01:11,043 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 348, Cleaned data points: 348
2025-09-03 16:01:11,043 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 16:01:11,044 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:11,044 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 16:01:11,047 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:01:11,047 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:11,047 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:01:11,047 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:01:11,047 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 348 total rows
2025-09-03 16:01:11,048 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 348 total rows
2025-09-03 16:01:11,048 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 348 total rows
2025-09-03 16:01:11,048 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:01:11,048 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:11,049 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:01:11,049 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 16:01:11,049 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 16:01:11,049 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 348
2025-09-03 16:01:11,051 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:01:11,052 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:11,052 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:01:11,052 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:01:11,052 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 348 total rows
2025-09-03 16:01:11,052 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 348 total rows
2025-09-03 16:01:11,052 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:01:11,053 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:11,053 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:01:11,053 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 16:01:11,053 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 16:01:11,053 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 348
2025-09-03 16:01:11,055 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:01:11,055 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:11,056 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:01:11,056 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:01:11,056 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 348 total rows
2025-09-03 16:01:11,056 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 348 total rows
2025-09-03 16:01:11,056 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:01:11,057 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:11,057 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:01:11,057 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 16:01:11,057 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 16:01:11,057 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 348
2025-09-03 16:01:11,059 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:01:11,059 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:11,059 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:01:11,059 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:01:11,059 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 348 total rows
2025-09-03 16:01:11,060 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 348 total rows
2025-09-03 16:01:11,060 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:01:11,060 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:11,061 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:01:11,061 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 16:01:11,061 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 16:01:11,061 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 348
2025-09-03 16:01:11,063 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:01:11,064 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:11,064 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:01:11,064 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:01:11,064 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 348 total rows
2025-09-03 16:01:11,065 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 348 total rows
2025-09-03 16:01:11,065 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:01:11,065 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:11,066 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 16:01:11,066 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:01:40,151 - logging_config - INFO - AppTradingView.py:147 - Chart page request from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:01:40,152 - logging_config - INFO - AppTradingView.py:166 - Email found in session for 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:01:40,356 - logging_config - INFO - utility_endpoints.py:243 - GET /get_last_symbol request received.
2025-09-03 16:01:40,366 - logging_config - INFO - utility_endpoints.py:251 - Got last selected symbol for user klemenzivkovic@gmail.com: BTCUSDT
2025-09-03 16:01:40,396 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:01:40,396 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:01:40,420 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 16:01:40,420 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1726827056036, x_axis_max: 1767184568262
2025-09-03 16:01:40,421 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1726827056036, max_timestamp: 1767184568262
2025-09-03 16:01:40,421 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1726827056.036, max=1767184568.262
2025-09-03 16:01:40,421 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2024-09-20T10:10:56.036000+00:00, max=2025-12-31T12:36:08.262000+00:00
2025-09-03 16:01:40,421 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1726827056036, 'xAxisMax': 1767184568262, 'yAxisMin': 70088.1515358795, 'yAxisMax': 124914.80904472788, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 16:01:40,527 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 16:01:40,531 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": "2024-09-20T10:10:56.036Z",
  "to_ts": "2025-12-31T12:36:08.262Z"
}
2025-09-03 16:01:40,531 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 16:01:40,531 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 2024-09-20T10:10:56.036Z (type: <class 'str'>)
2025-09-03 16:01:40,532 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 2025-12-31T12:36:08.262Z (type: <class 'str'>)
2025-09-03 16:01:40,532 - logging_config - INFO - websocket_handlers.py:756 - [TIMESTAMP DEBUG] Timestamps are ISO strings (correct format)
2025-09-03 16:01:40,532 - logging_config - INFO - websocket_handlers.py:763 - [TIMESTAMP CONVERSION] ISO strings -> Unix seconds:
2025-09-03 16:01:40,532 - logging_config - INFO - websocket_handlers.py:764 -   2024-09-20T10:10:56.036Z -> 1726827056 (2024-09-20 10:10:56 UTC)
2025-09-03 16:01:40,532 - logging_config - INFO - websocket_handlers.py:765 -   2025-12-31T12:36:08.262Z -> 1767184568 (2025-12-31 12:36:08 UTC)
2025-09-03 16:01:40,532 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 16:01:40,532 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1726827056 (type: <class 'int'>)
2025-09-03 16:01:40,532 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1767184568 (type: <class 'int'>)
2025-09-03 16:01:40,532 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 16:01:40,532 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 16:01:40,532 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 16:01:40,533 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 2024-09-20T10:10:56.036Z (type: <class 'str'>)
2025-09-03 16:01:40,533 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 2025-12-31T12:36:08.262Z (type: <class 'str'>)
2025-09-03 16:01:40,533 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 16:01:40,533 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 16:01:40,533 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 16:01:40,533 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=None, to_ts=None
2025-09-03 16:01:40,533 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1726827056, to_ts=1767184568
2025-09-03 16:01:40,533 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 16:01:40,533 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: False
2025-09-03 16:01:40,533 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 16:01:40,534 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 16:01:40,534 - logging_config - INFO - websocket_handlers.py:846 -     From: 2024-09-20 10:10:56 UTC (1726827056)
2025-09-03 16:01:40,534 - logging_config - INFO - websocket_handlers.py:847 -     To: 2025-12-31 12:36:08 UTC (1767184568)
2025-09-03 16:01:40,534 - logging_config - INFO - websocket_handlers.py:848 -     Range: 40357512 seconds (11210.4 hours)
2025-09-03 16:01:40,534 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 16:01:40,534 - logging_config - INFO - websocket_handlers.py:851 -     From: 2024-09-20 12:10:56 Central Europe Summer Time
2025-09-03 16:01:40,534 - logging_config - INFO - websocket_handlers.py:852 -     To: 2025-12-31 14:36:08 Central Europe Summer Time
2025-09-03 16:01:40,534 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 16:01:40,534 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 16:01:40,534 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 16:01:40,535 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 16:01:40,535 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 16:01:40,535 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 16:01:40,535 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1726827056, to_ts=1767184568
2025-09-03 16:01:40,535 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2024-09-20 12:10:56 to 2025-12-31 14:36:08
2025-09-03 16:01:40,536 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 16:01:40,536 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 16:01:40,536 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 16:01:40,536 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 16:01:40,536 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2024-09-20 10:10 to 2025-12-31 12:36
2025-09-03 16:01:40,536 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1767184568
2025-09-03 16:01:40,536 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: False
2025-09-03 16:01:40,536 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:01:40,536 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1726827056, to_ts=1767184568, resolution=1d
2025-09-03 16:01:40,536 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 16:01:40,536 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 16:01:40,536 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 16:01:40,537 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 16:01:40,537 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 16:01:40,537 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 16:01:40,537 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 16:01:40,537 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 16:01:40,538 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 16:01:40,538 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 16:01:40,538 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 16:01:40,538 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1726827056, to_ts=1767184568
2025-09-03 16:01:40,538 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1726827056, 1767184568]
2025-09-03 16:01:40,538 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 16:01:40,538 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1726827056 (type: <class 'int'>)
2025-09-03 16:01:40,538 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1767184568 (type: <class 'int'>)
2025-09-03 16:01:40,539 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1726827056 appears to be in SECONDS (correct for Redis)
2025-09-03 16:01:40,539 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 16:01:40,540 - logging_config - INFO - redis_utils.py:159 - Found 348 cached klines for BTCUSDT 1d between 1726827056 and 1767184568
2025-09-03 16:01:40,541 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 16:01:40,541 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~467
2025-09-03 16:01:40,541 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 348
2025-09-03 16:01:40,541 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 16:01:40,541 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 348 klines from Redis for BTCUSDT
2025-09-03 16:01:40,541 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 348 klines in Redis cache for BTCUSDT
2025-09-03 16:01:40,541 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 16:01:40,541 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:01:40,542 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 348
2025-09-03 16:01:40,542 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 348 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:01:40,543 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1726827056 and 1767184568
2025-09-03 16:01:40,546 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 348, Cleaned data points: 348
2025-09-03 16:01:40,546 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 16:01:40,546 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:40,547 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 16:01:40,548 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:01:40,549 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:40,549 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:01:40,549 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:01:40,550 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 348 total rows
2025-09-03 16:01:40,550 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 348 total rows
2025-09-03 16:01:40,550 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 348 total rows
2025-09-03 16:01:40,550 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:01:40,550 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:40,551 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:01:40,551 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 16:01:40,551 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 16:01:40,551 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 348
2025-09-03 16:01:40,553 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:01:40,554 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:40,554 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:01:40,554 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:01:40,554 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 348 total rows
2025-09-03 16:01:40,554 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 348 total rows
2025-09-03 16:01:40,554 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:01:40,555 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:40,555 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:01:40,555 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 16:01:40,555 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 16:01:40,555 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 348
2025-09-03 16:01:40,557 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:01:40,557 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:40,557 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:01:40,557 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:01:40,557 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 348 total rows
2025-09-03 16:01:40,557 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 348 total rows
2025-09-03 16:01:40,557 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:01:40,558 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:40,558 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:01:40,558 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 16:01:40,558 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 16:01:40,558 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 348
2025-09-03 16:01:40,560 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:01:40,560 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:40,561 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:01:40,561 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:01:40,561 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 348 total rows
2025-09-03 16:01:40,561 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 348 total rows
2025-09-03 16:01:40,561 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:01:40,561 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:40,562 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:01:40,562 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 16:01:40,562 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 16:01:40,562 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 348
2025-09-03 16:01:40,564 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:01:40,564 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:40,564 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:01:40,564 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:01:40,565 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 348 total rows
2025-09-03 16:01:40,565 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 348 total rows
2025-09-03 16:01:40,565 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:01:40,565 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:01:40,565 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 16:01:40,565 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:01:49,110 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 16:02:23,846 - logging_config - INFO - AppTradingView.py:147 - Chart page request from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:02:23,846 - logging_config - INFO - AppTradingView.py:166 - Email found in session for 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:02:23,857 - logging_config - INFO - utility_endpoints.py:282 - Log stream generator cancelled.
2025-09-03 16:02:23,859 - logging_config - ERROR - websocket_handlers.py:711 - Failed to receive WebSocket message for BTCUSDT: (1001, '')
Traceback (most recent call last):
  File "c:\git\ai-trading-bot-2\websocket_handlers.py", line 706, in stream_combined_data_websocket_endpoint
    message = await asyncio.wait_for(websocket.receive_json(), timeout=1.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1001, '')
2025-09-03 16:02:23,978 - logging_config - INFO - utility_endpoints.py:243 - GET /get_last_symbol request received.
2025-09-03 16:02:23,999 - logging_config - INFO - utility_endpoints.py:251 - Got last selected symbol for user klemenzivkovic@gmail.com: BTCUSDT
2025-09-03 16:02:24,000 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:02:24,000 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:02:24,041 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 16:02:24,041 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1726827056036, x_axis_max: 1767184568262
2025-09-03 16:02:24,042 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1726827056036, max_timestamp: 1767184568262
2025-09-03 16:02:24,042 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1726827056.036, max=1767184568.262
2025-09-03 16:02:24,042 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2024-09-20T10:10:56.036000+00:00, max=2025-12-31T12:36:08.262000+00:00
2025-09-03 16:02:24,042 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1726827056036, 'xAxisMax': 1767184568262, 'yAxisMin': 70088.1515358795, 'yAxisMax': 124914.80904472788, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 16:02:24,101 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 16:02:24,118 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": "2024-09-20T10:10:56.036Z",
  "to_ts": "2025-12-31T12:36:08.262Z"
}
2025-09-03 16:02:24,119 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 16:02:24,119 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 2024-09-20T10:10:56.036Z (type: <class 'str'>)
2025-09-03 16:02:24,119 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 2025-12-31T12:36:08.262Z (type: <class 'str'>)
2025-09-03 16:02:24,119 - logging_config - INFO - websocket_handlers.py:756 - [TIMESTAMP DEBUG] Timestamps are ISO strings (correct format)
2025-09-03 16:02:24,119 - logging_config - INFO - websocket_handlers.py:763 - [TIMESTAMP CONVERSION] ISO strings -> Unix seconds:
2025-09-03 16:02:24,119 - logging_config - INFO - websocket_handlers.py:764 -   2024-09-20T10:10:56.036Z -> 1726827056 (2024-09-20 10:10:56 UTC)
2025-09-03 16:02:24,119 - logging_config - INFO - websocket_handlers.py:765 -   2025-12-31T12:36:08.262Z -> 1767184568 (2025-12-31 12:36:08 UTC)
2025-09-03 16:02:24,119 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 16:02:24,119 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1726827056 (type: <class 'int'>)
2025-09-03 16:02:24,120 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1767184568 (type: <class 'int'>)
2025-09-03 16:02:24,120 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 16:02:24,120 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 16:02:24,120 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 16:02:24,120 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 2024-09-20T10:10:56.036Z (type: <class 'str'>)
2025-09-03 16:02:24,120 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 2025-12-31T12:36:08.262Z (type: <class 'str'>)
2025-09-03 16:02:24,120 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 16:02:24,120 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 16:02:24,120 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 16:02:24,121 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=None, to_ts=None
2025-09-03 16:02:24,121 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1726827056, to_ts=1767184568
2025-09-03 16:02:24,121 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 16:02:24,121 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: False
2025-09-03 16:02:24,121 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 16:02:24,121 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 16:02:24,121 - logging_config - INFO - websocket_handlers.py:846 -     From: 2024-09-20 10:10:56 UTC (1726827056)
2025-09-03 16:02:24,121 - logging_config - INFO - websocket_handlers.py:847 -     To: 2025-12-31 12:36:08 UTC (1767184568)
2025-09-03 16:02:24,121 - logging_config - INFO - websocket_handlers.py:848 -     Range: 40357512 seconds (11210.4 hours)
2025-09-03 16:02:24,121 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 16:02:24,121 - logging_config - INFO - websocket_handlers.py:851 -     From: 2024-09-20 12:10:56 Central Europe Summer Time
2025-09-03 16:02:24,121 - logging_config - INFO - websocket_handlers.py:852 -     To: 2025-12-31 14:36:08 Central Europe Summer Time
2025-09-03 16:02:24,121 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 16:02:24,121 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 16:02:24,122 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 16:02:24,122 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 16:02:24,122 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 16:02:24,122 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 16:02:24,122 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1726827056, to_ts=1767184568
2025-09-03 16:02:24,122 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2024-09-20 12:10:56 to 2025-12-31 14:36:08
2025-09-03 16:02:24,122 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 16:02:24,122 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 16:02:24,122 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 16:02:24,123 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 16:02:24,123 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2024-09-20 10:10 to 2025-12-31 12:36
2025-09-03 16:02:24,123 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1767184568
2025-09-03 16:02:24,123 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: False
2025-09-03 16:02:24,123 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:02:24,123 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1726827056, to_ts=1767184568, resolution=1d
2025-09-03 16:02:24,123 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 16:02:24,123 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 16:02:24,123 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 16:02:24,124 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 16:02:24,124 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 16:02:24,124 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 16:02:24,125 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 16:02:24,125 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 16:02:24,125 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 16:02:24,125 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 16:02:24,126 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 16:02:24,126 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1726827056, to_ts=1767184568
2025-09-03 16:02:24,126 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1726827056, 1767184568]
2025-09-03 16:02:24,126 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 16:02:24,126 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1726827056 (type: <class 'int'>)
2025-09-03 16:02:24,126 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1767184568 (type: <class 'int'>)
2025-09-03 16:02:24,126 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1726827056 appears to be in SECONDS (correct for Redis)
2025-09-03 16:02:24,126 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 16:02:24,129 - logging_config - INFO - redis_utils.py:159 - Found 348 cached klines for BTCUSDT 1d between 1726827056 and 1767184568
2025-09-03 16:02:24,129 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 16:02:24,129 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~467
2025-09-03 16:02:24,129 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 348
2025-09-03 16:02:24,129 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 16:02:24,130 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 348 klines from Redis for BTCUSDT
2025-09-03 16:02:24,130 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 348 klines in Redis cache for BTCUSDT
2025-09-03 16:02:24,130 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 16:02:24,130 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:02:24,130 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 348
2025-09-03 16:02:24,130 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 348 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:02:24,132 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1726827056 and 1767184568
2025-09-03 16:02:24,135 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 348, Cleaned data points: 348
2025-09-03 16:02:24,135 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 16:02:24,135 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:02:24,135 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 16:02:24,137 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:02:24,138 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:02:24,138 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:02:24,138 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:02:24,138 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 348 total rows
2025-09-03 16:02:24,138 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 348 total rows
2025-09-03 16:02:24,138 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 348 total rows
2025-09-03 16:02:24,139 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:02:24,139 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:02:24,140 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:02:24,140 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 16:02:24,140 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 16:02:24,140 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 348
2025-09-03 16:02:24,142 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:02:24,142 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:02:24,142 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:02:24,142 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:02:24,143 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 348 total rows
2025-09-03 16:02:24,143 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 348 total rows
2025-09-03 16:02:24,143 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:02:24,143 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:02:24,144 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:02:24,144 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 16:02:24,144 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 16:02:24,144 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 348
2025-09-03 16:02:24,146 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:02:24,147 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:02:24,147 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:02:24,147 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:02:24,148 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 348 total rows
2025-09-03 16:02:24,148 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 348 total rows
2025-09-03 16:02:24,148 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:02:24,148 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:02:24,148 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:02:24,149 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 16:02:24,149 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 16:02:24,149 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 348
2025-09-03 16:02:24,151 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:02:24,151 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:02:24,152 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:02:24,152 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:02:24,152 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 348 total rows
2025-09-03 16:02:24,152 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 348 total rows
2025-09-03 16:02:24,152 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:02:24,152 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:02:24,153 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:02:24,153 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 16:02:24,153 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 16:02:24,153 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 348
2025-09-03 16:02:24,156 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:02:24,156 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:02:24,156 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:02:24,156 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:02:24,156 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 348 total rows
2025-09-03 16:02:24,156 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 348 total rows
2025-09-03 16:02:24,157 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:02:24,157 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:02:24,157 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 16:02:24,157 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:02:59,536 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 16:03:02,323 - logging_config - INFO - AppTradingView.py:147 - Chart page request from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:03:02,323 - logging_config - INFO - AppTradingView.py:166 - Email found in session for 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:03:02,509 - logging_config - INFO - utility_endpoints.py:282 - Log stream generator cancelled.
2025-09-03 16:03:02,693 - logging_config - ERROR - websocket_handlers.py:711 - Failed to receive WebSocket message for BTCUSDT: (1001, '')
Traceback (most recent call last):
  File "c:\git\ai-trading-bot-2\websocket_handlers.py", line 706, in stream_combined_data_websocket_endpoint
    message = await asyncio.wait_for(websocket.receive_json(), timeout=1.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1001, '')
2025-09-03 16:03:03,248 - logging_config - INFO - utility_endpoints.py:243 - GET /get_last_symbol request received.
2025-09-03 16:03:03,249 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:03:03,249 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:03:03,268 - logging_config - INFO - utility_endpoints.py:251 - Got last selected symbol for user klemenzivkovic@gmail.com: BTCUSDT
2025-09-03 16:03:04,015 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 16:03:04,015 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1726827056036, x_axis_max: 1767184568262
2025-09-03 16:03:04,015 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1726827056036, max_timestamp: 1767184568262
2025-09-03 16:03:04,015 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1726827056.036, max=1767184568.262
2025-09-03 16:03:04,015 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2024-09-20T10:10:56.036000+00:00, max=2025-12-31T12:36:08.262000+00:00
2025-09-03 16:03:04,015 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1726827056036, 'xAxisMax': 1767184568262, 'yAxisMin': 70088.1515358795, 'yAxisMax': 124914.80904472788, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 16:03:04,204 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 16:03:04,394 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": "2024-09-20T10:10:56.036Z",
  "to_ts": "2025-12-31T12:36:08.262Z"
}
2025-09-03 16:03:04,394 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 16:03:04,394 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 2024-09-20T10:10:56.036Z (type: <class 'str'>)
2025-09-03 16:03:04,394 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 2025-12-31T12:36:08.262Z (type: <class 'str'>)
2025-09-03 16:03:04,395 - logging_config - INFO - websocket_handlers.py:756 - [TIMESTAMP DEBUG] Timestamps are ISO strings (correct format)
2025-09-03 16:03:04,395 - logging_config - INFO - websocket_handlers.py:763 - [TIMESTAMP CONVERSION] ISO strings -> Unix seconds:
2025-09-03 16:03:04,395 - logging_config - INFO - websocket_handlers.py:764 -   2024-09-20T10:10:56.036Z -> 1726827056 (2024-09-20 10:10:56 UTC)
2025-09-03 16:03:04,395 - logging_config - INFO - websocket_handlers.py:765 -   2025-12-31T12:36:08.262Z -> 1767184568 (2025-12-31 12:36:08 UTC)
2025-09-03 16:03:04,395 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 16:03:04,395 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1726827056 (type: <class 'int'>)
2025-09-03 16:03:04,395 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1767184568 (type: <class 'int'>)
2025-09-03 16:03:04,395 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 16:03:04,395 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 16:03:04,395 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 16:03:04,395 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 2024-09-20T10:10:56.036Z (type: <class 'str'>)
2025-09-03 16:03:04,395 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 2025-12-31T12:36:08.262Z (type: <class 'str'>)
2025-09-03 16:03:04,396 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 16:03:04,396 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 16:03:04,396 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 16:03:04,396 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=None, to_ts=None
2025-09-03 16:03:04,396 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1726827056, to_ts=1767184568
2025-09-03 16:03:04,396 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 16:03:04,396 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: False
2025-09-03 16:03:04,396 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 16:03:04,396 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 16:03:04,396 - logging_config - INFO - websocket_handlers.py:846 -     From: 2024-09-20 10:10:56 UTC (1726827056)
2025-09-03 16:03:04,396 - logging_config - INFO - websocket_handlers.py:847 -     To: 2025-12-31 12:36:08 UTC (1767184568)
2025-09-03 16:03:04,397 - logging_config - INFO - websocket_handlers.py:848 -     Range: 40357512 seconds (11210.4 hours)
2025-09-03 16:03:04,397 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 16:03:04,397 - logging_config - INFO - websocket_handlers.py:851 -     From: 2024-09-20 12:10:56 Central Europe Summer Time
2025-09-03 16:03:04,397 - logging_config - INFO - websocket_handlers.py:852 -     To: 2025-12-31 14:36:08 Central Europe Summer Time
2025-09-03 16:03:04,397 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 16:03:04,397 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 16:03:04,397 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 16:03:04,397 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 16:03:04,397 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 16:03:04,398 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 16:03:04,398 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1726827056, to_ts=1767184568
2025-09-03 16:03:04,398 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2024-09-20 12:10:56 to 2025-12-31 14:36:08
2025-09-03 16:03:04,398 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 16:03:04,398 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 16:03:04,398 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 16:03:04,398 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 16:03:04,398 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2024-09-20 10:10 to 2025-12-31 12:36
2025-09-03 16:03:04,398 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1767184568
2025-09-03 16:03:04,398 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: False
2025-09-03 16:03:04,398 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:03:04,398 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1726827056, to_ts=1767184568, resolution=1d
2025-09-03 16:03:04,398 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 16:03:04,398 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 16:03:04,398 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 16:03:04,400 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 16:03:04,400 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 16:03:04,400 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 16:03:04,401 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 16:03:04,401 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 16:03:04,401 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 16:03:04,401 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 16:03:04,401 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 16:03:04,401 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1726827056, to_ts=1767184568
2025-09-03 16:03:04,401 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1726827056, 1767184568]
2025-09-03 16:03:04,402 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 16:03:04,402 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1726827056 (type: <class 'int'>)
2025-09-03 16:03:04,402 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1767184568 (type: <class 'int'>)
2025-09-03 16:03:04,402 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1726827056 appears to be in SECONDS (correct for Redis)
2025-09-03 16:03:04,402 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 16:03:04,403 - logging_config - INFO - redis_utils.py:159 - Found 348 cached klines for BTCUSDT 1d between 1726827056 and 1767184568
2025-09-03 16:03:04,404 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 16:03:04,404 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~467
2025-09-03 16:03:04,404 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 348
2025-09-03 16:03:04,404 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 16:03:04,404 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 348 klines from Redis for BTCUSDT
2025-09-03 16:03:04,404 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 348 klines in Redis cache for BTCUSDT
2025-09-03 16:03:04,404 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 16:03:04,404 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:03:04,404 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 348
2025-09-03 16:03:04,404 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 348 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:03:04,592 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1726827056 and 1767184568
2025-09-03 16:03:04,596 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 348, Cleaned data points: 348
2025-09-03 16:03:04,596 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 16:03:04,596 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:03:04,597 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 16:03:04,599 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:03:04,599 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:03:04,599 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:03:04,599 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:03:04,599 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 348 total rows
2025-09-03 16:03:04,600 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 348 total rows
2025-09-03 16:03:04,600 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 348 total rows
2025-09-03 16:03:04,600 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:03:04,600 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:03:04,600 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:03:04,600 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 16:03:04,601 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 16:03:04,601 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 348
2025-09-03 16:03:04,602 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:03:04,602 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:03:04,602 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:03:04,603 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:03:04,603 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 348 total rows
2025-09-03 16:03:04,603 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 348 total rows
2025-09-03 16:03:04,604 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:03:04,604 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:03:04,604 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:03:04,604 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 16:03:04,604 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 16:03:04,604 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 348
2025-09-03 16:03:04,606 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:03:04,606 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:03:04,606 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:03:04,606 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:03:04,606 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 348 total rows
2025-09-03 16:03:04,606 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 348 total rows
2025-09-03 16:03:04,606 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:03:04,607 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:03:04,607 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:03:04,607 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 16:03:04,607 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 16:03:04,607 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 348
2025-09-03 16:03:04,609 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:03:04,609 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:03:04,610 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:03:04,610 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:03:04,610 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 348 total rows
2025-09-03 16:03:04,611 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 348 total rows
2025-09-03 16:03:04,611 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:03:04,611 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:03:04,611 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:03:04,611 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 16:03:04,611 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 16:03:04,612 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 348
2025-09-03 16:03:04,613 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:03:04,613 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:03:04,613 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:03:04,613 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:03:04,613 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 348 total rows
2025-09-03 16:03:04,614 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 348 total rows
2025-09-03 16:03:04,614 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:03:04,614 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:03:04,614 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 16:03:04,614 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:04:08,812 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 16:04:25,782 - logging_config - INFO - AppTradingView.py:147 - Chart page request from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:04:25,782 - logging_config - INFO - AppTradingView.py:166 - Email found in session for 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:04:25,796 - logging_config - INFO - utility_endpoints.py:282 - Log stream generator cancelled.
2025-09-03 16:04:25,878 - logging_config - ERROR - websocket_handlers.py:711 - Failed to receive WebSocket message for BTCUSDT: (1001, '')
Traceback (most recent call last):
  File "c:\git\ai-trading-bot-2\websocket_handlers.py", line 706, in stream_combined_data_websocket_endpoint
    message = await asyncio.wait_for(websocket.receive_json(), timeout=1.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1001, '')
2025-09-03 16:04:25,880 - logging_config - INFO - utility_endpoints.py:243 - GET /get_last_symbol request received.
2025-09-03 16:04:25,881 - logging_config - INFO - utility_endpoints.py:251 - Got last selected symbol for user klemenzivkovic@gmail.com: BTCUSDT
2025-09-03 16:04:25,916 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:04:25,916 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:04:25,944 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 16:04:25,944 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1726827056036, x_axis_max: 1767184568262
2025-09-03 16:04:25,944 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1726827056036, max_timestamp: 1767184568262
2025-09-03 16:04:25,944 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1726827056.036, max=1767184568.262
2025-09-03 16:04:25,944 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2024-09-20T10:10:56.036000+00:00, max=2025-12-31T12:36:08.262000+00:00
2025-09-03 16:04:25,944 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1726827056036, 'xAxisMax': 1767184568262, 'yAxisMin': 70088.1515358795, 'yAxisMax': 124914.80904472788, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 16:04:25,978 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 16:04:25,982 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": "2024-09-20T10:10:56.036Z",
  "to_ts": "2025-12-31T12:36:08.262Z"
}
2025-09-03 16:04:25,982 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 16:04:25,982 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 2024-09-20T10:10:56.036Z (type: <class 'str'>)
2025-09-03 16:04:25,982 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 2025-12-31T12:36:08.262Z (type: <class 'str'>)
2025-09-03 16:04:25,982 - logging_config - INFO - websocket_handlers.py:756 - [TIMESTAMP DEBUG] Timestamps are ISO strings (correct format)
2025-09-03 16:04:25,982 - logging_config - INFO - websocket_handlers.py:763 - [TIMESTAMP CONVERSION] ISO strings -> Unix seconds:
2025-09-03 16:04:25,982 - logging_config - INFO - websocket_handlers.py:764 -   2024-09-20T10:10:56.036Z -> 1726827056 (2024-09-20 10:10:56 UTC)
2025-09-03 16:04:25,982 - logging_config - INFO - websocket_handlers.py:765 -   2025-12-31T12:36:08.262Z -> 1767184568 (2025-12-31 12:36:08 UTC)
2025-09-03 16:04:25,982 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 16:04:25,983 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1726827056 (type: <class 'int'>)
2025-09-03 16:04:25,983 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1767184568 (type: <class 'int'>)
2025-09-03 16:04:25,983 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 16:04:25,983 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 16:04:25,983 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 16:04:25,983 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 2024-09-20T10:10:56.036Z (type: <class 'str'>)
2025-09-03 16:04:25,983 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 2025-12-31T12:36:08.262Z (type: <class 'str'>)
2025-09-03 16:04:25,983 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 16:04:25,983 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 16:04:25,983 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 16:04:25,983 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=None, to_ts=None
2025-09-03 16:04:25,983 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1726827056, to_ts=1767184568
2025-09-03 16:04:25,983 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 16:04:25,983 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: False
2025-09-03 16:04:25,983 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 16:04:25,984 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 16:04:25,984 - logging_config - INFO - websocket_handlers.py:846 -     From: 2024-09-20 10:10:56 UTC (1726827056)
2025-09-03 16:04:25,984 - logging_config - INFO - websocket_handlers.py:847 -     To: 2025-12-31 12:36:08 UTC (1767184568)
2025-09-03 16:04:25,984 - logging_config - INFO - websocket_handlers.py:848 -     Range: 40357512 seconds (11210.4 hours)
2025-09-03 16:04:25,984 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 16:04:25,984 - logging_config - INFO - websocket_handlers.py:851 -     From: 2024-09-20 12:10:56 Central Europe Summer Time
2025-09-03 16:04:25,984 - logging_config - INFO - websocket_handlers.py:852 -     To: 2025-12-31 14:36:08 Central Europe Summer Time
2025-09-03 16:04:25,984 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 16:04:25,984 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 16:04:25,984 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 16:04:25,984 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 16:04:25,984 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 16:04:25,984 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 16:04:25,984 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1726827056, to_ts=1767184568
2025-09-03 16:04:25,984 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2024-09-20 12:10:56 to 2025-12-31 14:36:08
2025-09-03 16:04:25,984 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 16:04:25,984 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 16:04:25,985 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 16:04:25,985 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 16:04:25,985 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2024-09-20 10:10 to 2025-12-31 12:36
2025-09-03 16:04:25,985 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1767184568
2025-09-03 16:04:25,985 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: False
2025-09-03 16:04:25,985 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:04:25,985 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1726827056, to_ts=1767184568, resolution=1d
2025-09-03 16:04:25,985 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 16:04:25,985 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 16:04:25,985 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 16:04:25,986 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 16:04:25,986 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 16:04:25,986 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 16:04:25,986 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 16:04:25,986 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 16:04:25,986 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 16:04:25,986 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 16:04:25,987 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 16:04:25,987 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1726827056, to_ts=1767184568
2025-09-03 16:04:25,987 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1726827056, 1767184568]
2025-09-03 16:04:25,987 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 16:04:25,987 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1726827056 (type: <class 'int'>)
2025-09-03 16:04:25,987 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1767184568 (type: <class 'int'>)
2025-09-03 16:04:25,987 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1726827056 appears to be in SECONDS (correct for Redis)
2025-09-03 16:04:25,987 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 16:04:25,988 - logging_config - INFO - redis_utils.py:159 - Found 348 cached klines for BTCUSDT 1d between 1726827056 and 1767184568
2025-09-03 16:04:25,988 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 16:04:25,988 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~467
2025-09-03 16:04:25,990 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 348
2025-09-03 16:04:25,990 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 16:04:25,990 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 348 klines from Redis for BTCUSDT
2025-09-03 16:04:25,990 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 348 klines in Redis cache for BTCUSDT
2025-09-03 16:04:25,990 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 16:04:25,990 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:04:25,990 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 348
2025-09-03 16:04:25,991 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 348 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:04:25,991 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1726827056 and 1767184568
2025-09-03 16:04:25,994 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 348, Cleaned data points: 348
2025-09-03 16:04:25,995 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 16:04:25,995 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:04:25,995 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 16:04:25,997 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:04:25,997 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:04:25,997 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:04:25,998 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:04:25,998 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 348 total rows
2025-09-03 16:04:25,998 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 348 total rows
2025-09-03 16:04:25,998 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 348 total rows
2025-09-03 16:04:25,998 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:04:25,998 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:04:25,998 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:04:25,998 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 16:04:26,000 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 16:04:26,000 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 348
2025-09-03 16:04:26,001 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:04:26,001 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:04:26,002 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:04:26,002 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:04:26,002 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 348 total rows
2025-09-03 16:04:26,002 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 348 total rows
2025-09-03 16:04:26,002 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:04:26,003 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:04:26,003 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:04:26,003 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 16:04:26,003 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 16:04:26,003 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 348
2025-09-03 16:04:26,005 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:04:26,005 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:04:26,005 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:04:26,005 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:04:26,006 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 348 total rows
2025-09-03 16:04:26,006 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 348 total rows
2025-09-03 16:04:26,006 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:04:26,006 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:04:26,007 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:04:26,007 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 16:04:26,007 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 16:04:26,007 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 348
2025-09-03 16:04:26,009 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:04:26,009 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:04:26,009 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:04:26,009 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:04:26,009 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 348 total rows
2025-09-03 16:04:26,009 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 348 total rows
2025-09-03 16:04:26,009 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:04:26,009 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:04:26,010 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:04:26,010 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 16:04:26,010 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 16:04:26,010 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 348
2025-09-03 16:04:26,011 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:04:26,012 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:04:26,012 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:04:26,012 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:04:26,012 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 348 total rows
2025-09-03 16:04:26,013 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 348 total rows
2025-09-03 16:04:26,013 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:04:26,013 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:04:26,013 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 16:04:26,013 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:05:18,071 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 16:05:26,150 - logging_config - ERROR - websocket_handlers.py:711 - Failed to receive WebSocket message for BTCUSDT: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
Traceback (most recent call last):
  File "c:\git\ai-trading-bot-2\websocket_handlers.py", line 706, in stream_combined_data_websocket_endpoint
    message = await asyncio.wait_for(websocket.receive_json(), timeout=1.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-09-03 16:05:35,675 - logging_config - INFO - AppTradingView.py:147 - Chart page request from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:05:35,675 - logging_config - INFO - AppTradingView.py:166 - Email found in session for 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:05:35,686 - logging_config - INFO - utility_endpoints.py:282 - Log stream generator cancelled.
2025-09-03 16:05:35,772 - logging_config - INFO - utility_endpoints.py:243 - GET /get_last_symbol request received.
2025-09-03 16:05:35,796 - logging_config - INFO - utility_endpoints.py:251 - Got last selected symbol for user klemenzivkovic@gmail.com: BTCUSDT
2025-09-03 16:05:35,798 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:05:35,798 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:05:35,855 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 16:05:35,855 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1726827056036, x_axis_max: 1767184568262
2025-09-03 16:05:35,855 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1726827056036, max_timestamp: 1767184568262
2025-09-03 16:05:35,855 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1726827056.036, max=1767184568.262
2025-09-03 16:05:35,855 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2024-09-20T10:10:56.036000+00:00, max=2025-12-31T12:36:08.262000+00:00
2025-09-03 16:05:35,855 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1726827056036, 'xAxisMax': 1767184568262, 'yAxisMin': 70088.1515358795, 'yAxisMax': 124914.80904472788, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 16:05:35,890 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 16:05:35,898 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": "2024-09-20T10:10:56.036Z",
  "to_ts": "2025-12-31T12:36:08.262Z"
}
2025-09-03 16:05:35,898 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 16:05:35,898 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 2024-09-20T10:10:56.036Z (type: <class 'str'>)
2025-09-03 16:05:35,898 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 2025-12-31T12:36:08.262Z (type: <class 'str'>)
2025-09-03 16:05:35,898 - logging_config - INFO - websocket_handlers.py:756 - [TIMESTAMP DEBUG] Timestamps are ISO strings (correct format)
2025-09-03 16:05:35,898 - logging_config - INFO - websocket_handlers.py:763 - [TIMESTAMP CONVERSION] ISO strings -> Unix seconds:
2025-09-03 16:05:35,899 - logging_config - INFO - websocket_handlers.py:764 -   2024-09-20T10:10:56.036Z -> 1726827056 (2024-09-20 10:10:56 UTC)
2025-09-03 16:05:35,899 - logging_config - INFO - websocket_handlers.py:765 -   2025-12-31T12:36:08.262Z -> 1767184568 (2025-12-31 12:36:08 UTC)
2025-09-03 16:05:35,899 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 16:05:35,899 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1726827056 (type: <class 'int'>)
2025-09-03 16:05:35,899 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1767184568 (type: <class 'int'>)
2025-09-03 16:05:35,899 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 16:05:35,899 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 16:05:35,899 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 16:05:35,899 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 2024-09-20T10:10:56.036Z (type: <class 'str'>)
2025-09-03 16:05:35,899 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 2025-12-31T12:36:08.262Z (type: <class 'str'>)
2025-09-03 16:05:35,899 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 16:05:35,899 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 16:05:35,900 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 16:05:35,900 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=None, to_ts=None
2025-09-03 16:05:35,900 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1726827056, to_ts=1767184568
2025-09-03 16:05:35,900 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 16:05:35,900 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: False
2025-09-03 16:05:35,900 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 16:05:35,900 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 16:05:35,900 - logging_config - INFO - websocket_handlers.py:846 -     From: 2024-09-20 10:10:56 UTC (1726827056)
2025-09-03 16:05:35,900 - logging_config - INFO - websocket_handlers.py:847 -     To: 2025-12-31 12:36:08 UTC (1767184568)
2025-09-03 16:05:35,900 - logging_config - INFO - websocket_handlers.py:848 -     Range: 40357512 seconds (11210.4 hours)
2025-09-03 16:05:35,900 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 16:05:35,900 - logging_config - INFO - websocket_handlers.py:851 -     From: 2024-09-20 12:10:56 Central Europe Summer Time
2025-09-03 16:05:35,900 - logging_config - INFO - websocket_handlers.py:852 -     To: 2025-12-31 14:36:08 Central Europe Summer Time
2025-09-03 16:05:35,900 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1726827056, to_ts=1767184568
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2024-09-20 12:10:56 to 2025-12-31 14:36:08
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2024-09-20 10:10 to 2025-12-31 12:36
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1767184568
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: False
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1726827056, to_ts=1767184568, resolution=1d
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 16:05:35,901 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 16:05:35,902 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 16:05:35,902 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 16:05:35,902 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 16:05:35,903 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 16:05:35,903 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 16:05:35,903 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 16:05:35,903 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 16:05:35,903 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 16:05:35,903 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1726827056, to_ts=1767184568
2025-09-03 16:05:35,903 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1726827056, 1767184568]
2025-09-03 16:05:35,903 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 16:05:35,903 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1726827056 (type: <class 'int'>)
2025-09-03 16:05:35,903 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1767184568 (type: <class 'int'>)
2025-09-03 16:05:35,903 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1726827056 appears to be in SECONDS (correct for Redis)
2025-09-03 16:05:35,903 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 16:05:35,906 - logging_config - INFO - redis_utils.py:159 - Found 348 cached klines for BTCUSDT 1d between 1726827056 and 1767184568
2025-09-03 16:05:35,906 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 16:05:35,906 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~467
2025-09-03 16:05:35,906 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 348
2025-09-03 16:05:35,906 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 16:05:35,907 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 348 klines from Redis for BTCUSDT
2025-09-03 16:05:35,907 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 348 klines in Redis cache for BTCUSDT
2025-09-03 16:05:35,907 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 16:05:35,907 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:05:35,907 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 348
2025-09-03 16:05:35,907 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 348 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:05:35,908 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1726827056 and 1767184568
2025-09-03 16:05:35,911 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 348, Cleaned data points: 348
2025-09-03 16:05:35,911 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 16:05:35,912 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:05:35,912 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 16:05:35,914 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:05:35,914 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:05:35,914 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:05:35,914 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:05:35,915 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 348 total rows
2025-09-03 16:05:35,915 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 348 total rows
2025-09-03 16:05:35,915 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 348 total rows
2025-09-03 16:05:35,915 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:05:35,915 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:05:35,916 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:05:35,916 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 16:05:35,916 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 16:05:35,916 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 348
2025-09-03 16:05:35,918 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:05:35,918 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:05:35,918 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:05:35,918 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:05:35,918 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 348 total rows
2025-09-03 16:05:35,918 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 348 total rows
2025-09-03 16:05:35,918 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:05:35,918 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:05:35,919 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:05:35,919 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 16:05:35,920 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 16:05:35,920 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 348
2025-09-03 16:05:35,921 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:05:35,921 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:05:35,922 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:05:35,922 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:05:35,922 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 348 total rows
2025-09-03 16:05:35,922 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 348 total rows
2025-09-03 16:05:35,922 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:05:35,922 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:05:35,923 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:05:35,923 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 16:05:35,923 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 16:05:35,923 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 348
2025-09-03 16:05:35,924 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:05:35,924 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:05:35,924 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:05:35,924 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:05:35,926 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 348 total rows
2025-09-03 16:05:35,926 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 348 total rows
2025-09-03 16:05:35,926 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:05:35,926 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:05:35,927 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:05:35,927 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 16:05:35,927 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 16:05:35,927 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 348
2025-09-03 16:05:35,928 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:05:35,928 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:05:35,929 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:05:35,929 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:05:35,929 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 348 total rows
2025-09-03 16:05:35,929 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 348 total rows
2025-09-03 16:05:35,929 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:05:35,930 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:05:35,930 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 16:05:35,930 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:06:27,200 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 16:06:56,035 - logging_config - ERROR - websocket_handlers.py:711 - Failed to receive WebSocket message for BTCUSDT: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
Traceback (most recent call last):
  File "c:\git\ai-trading-bot-2\websocket_handlers.py", line 706, in stream_combined_data_websocket_endpoint
    message = await asyncio.wait_for(websocket.receive_json(), timeout=1.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-09-03 16:06:56,871 - logging_config - ERROR - websocket_handlers.py:711 - Failed to receive WebSocket message for BTCUSDT: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
Traceback (most recent call last):
  File "c:\git\ai-trading-bot-2\websocket_handlers.py", line 706, in stream_combined_data_websocket_endpoint
    message = await asyncio.wait_for(websocket.receive_json(), timeout=1.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-09-03 16:07:00,485 - logging_config - INFO - AppTradingView.py:147 - Chart page request from 185.156.73.166. Current session state: authenticated=None, email=None
2025-09-03 16:07:00,485 - logging_config - INFO - AppTradingView.py:159 - No email in session for 185.156.73.166, redirecting to Google OAuth
2025-09-03 16:07:38,095 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 16:07:48,255 - logging_config - INFO - AppTradingView.py:147 - Chart page request from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:07:48,255 - logging_config - INFO - AppTradingView.py:166 - Email found in session for 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:07:48,263 - logging_config - INFO - utility_endpoints.py:282 - Log stream generator cancelled.
2025-09-03 16:07:48,556 - logging_config - INFO - utility_endpoints.py:243 - GET /get_last_symbol request received.
2025-09-03 16:07:48,557 - logging_config - INFO - utility_endpoints.py:251 - Got last selected symbol for user klemenzivkovic@gmail.com: BTCUSDT
2025-09-03 16:07:48,607 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:07:48,607 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:07:48,652 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 16:07:48,652 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1726827056036, x_axis_max: 1767184568262
2025-09-03 16:07:48,652 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1726827056036, max_timestamp: 1767184568262
2025-09-03 16:07:48,652 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1726827056.036, max=1767184568.262
2025-09-03 16:07:48,652 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2024-09-20T10:10:56.036000+00:00, max=2025-12-31T12:36:08.262000+00:00
2025-09-03 16:07:48,652 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1726827056036, 'xAxisMax': 1767184568262, 'yAxisMin': 70088.1515358795, 'yAxisMax': 124914.80904472788, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 16:07:48,706 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 16:07:48,711 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": "2024-09-20T10:10:56.036Z",
  "to_ts": "2025-12-31T12:36:08.262Z"
}
2025-09-03 16:07:48,711 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 16:07:48,711 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 2024-09-20T10:10:56.036Z (type: <class 'str'>)
2025-09-03 16:07:48,711 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 2025-12-31T12:36:08.262Z (type: <class 'str'>)
2025-09-03 16:07:48,711 - logging_config - INFO - websocket_handlers.py:756 - [TIMESTAMP DEBUG] Timestamps are ISO strings (correct format)
2025-09-03 16:07:48,711 - logging_config - INFO - websocket_handlers.py:763 - [TIMESTAMP CONVERSION] ISO strings -> Unix seconds:
2025-09-03 16:07:48,711 - logging_config - INFO - websocket_handlers.py:764 -   2024-09-20T10:10:56.036Z -> 1726827056 (2024-09-20 10:10:56 UTC)
2025-09-03 16:07:48,711 - logging_config - INFO - websocket_handlers.py:765 -   2025-12-31T12:36:08.262Z -> 1767184568 (2025-12-31 12:36:08 UTC)
2025-09-03 16:07:48,711 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 16:07:48,712 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1726827056 (type: <class 'int'>)
2025-09-03 16:07:48,712 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1767184568 (type: <class 'int'>)
2025-09-03 16:07:48,712 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 16:07:48,712 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 16:07:48,712 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 16:07:48,712 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 2024-09-20T10:10:56.036Z (type: <class 'str'>)
2025-09-03 16:07:48,712 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 2025-12-31T12:36:08.262Z (type: <class 'str'>)
2025-09-03 16:07:48,712 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 16:07:48,712 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 16:07:48,712 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 16:07:48,712 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=None, to_ts=None
2025-09-03 16:07:48,712 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1726827056, to_ts=1767184568
2025-09-03 16:07:48,712 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 16:07:48,712 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: False
2025-09-03 16:07:48,712 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:846 -     From: 2024-09-20 10:10:56 UTC (1726827056)
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:847 -     To: 2025-12-31 12:36:08 UTC (1767184568)
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:848 -     Range: 40357512 seconds (11210.4 hours)
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:851 -     From: 2024-09-20 12:10:56 Central Europe Summer Time
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:852 -     To: 2025-12-31 14:36:08 Central Europe Summer Time
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1726827056, to_ts=1767184568
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2024-09-20 12:10:56 to 2025-12-31 14:36:08
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 16:07:48,713 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 16:07:48,714 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2024-09-20 10:10 to 2025-12-31 12:36
2025-09-03 16:07:48,714 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1767184568
2025-09-03 16:07:48,714 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: False
2025-09-03 16:07:48,714 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:07:48,714 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1726827056, to_ts=1767184568, resolution=1d
2025-09-03 16:07:48,714 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 16:07:48,714 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 16:07:48,714 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 16:07:48,714 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 16:07:48,714 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 16:07:48,714 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 16:07:48,715 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 16:07:48,715 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 16:07:48,715 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 16:07:48,715 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1758557646, 'start_price': 95880.69052160707, 'end_price': 97453.69827545321, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 16:07:48,715 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 16:07:48,715 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1726827056, to_ts=1767184568
2025-09-03 16:07:48,715 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1726827056, 1767184568]
2025-09-03 16:07:48,715 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 16:07:48,715 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1726827056 (type: <class 'int'>)
2025-09-03 16:07:48,715 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1767184568 (type: <class 'int'>)
2025-09-03 16:07:48,716 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1726827056 appears to be in SECONDS (correct for Redis)
2025-09-03 16:07:48,716 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 16:07:48,718 - logging_config - INFO - redis_utils.py:159 - Found 348 cached klines for BTCUSDT 1d between 1726827056 and 1767184568
2025-09-03 16:07:48,718 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 16:07:48,718 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~467
2025-09-03 16:07:48,718 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 348
2025-09-03 16:07:48,718 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 16:07:48,719 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 348 klines from Redis for BTCUSDT
2025-09-03 16:07:48,719 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 348 klines in Redis cache for BTCUSDT
2025-09-03 16:07:48,719 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 16:07:48,719 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:07:48,719 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 348
2025-09-03 16:07:48,719 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 348 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:07:48,720 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1726827056 and 1767184568
2025-09-03 16:07:48,723 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 348, Cleaned data points: 348
2025-09-03 16:07:48,724 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 16:07:48,724 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:07:48,724 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 16:07:48,726 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:07:48,726 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:07:48,726 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:07:48,727 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:07:48,727 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 348 total rows
2025-09-03 16:07:48,727 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 348 total rows
2025-09-03 16:07:48,727 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 348 total rows
2025-09-03 16:07:48,727 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:07:48,727 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:07:48,728 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:07:48,728 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 16:07:48,728 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 16:07:48,728 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 348
2025-09-03 16:07:48,730 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:07:48,730 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:07:48,730 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:07:48,730 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:07:48,730 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 348 total rows
2025-09-03 16:07:48,730 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 348 total rows
2025-09-03 16:07:48,731 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:07:48,731 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:07:48,732 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:07:48,732 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 16:07:48,732 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 16:07:48,732 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 348
2025-09-03 16:07:48,733 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:07:48,734 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:07:48,734 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:07:48,734 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:07:48,734 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 348 total rows
2025-09-03 16:07:48,735 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 348 total rows
2025-09-03 16:07:48,735 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:07:48,735 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:07:48,735 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:07:48,735 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 16:07:48,735 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 16:07:48,735 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 348
2025-09-03 16:07:48,737 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:07:48,737 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:07:48,737 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:07:48,737 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:07:48,737 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 348 total rows
2025-09-03 16:07:48,737 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 348 total rows
2025-09-03 16:07:48,738 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:07:48,738 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:07:48,738 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:07:48,738 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 16:07:48,738 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 16:07:48,738 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 348
2025-09-03 16:07:48,740 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:07:48,740 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:07:48,740 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:07:48,740 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:07:48,741 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 348 total rows
2025-09-03 16:07:48,741 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 348 total rows
2025-09-03 16:07:48,741 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:07:48,741 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:07:48,741 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 16:07:48,741 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:07:54,120 - logging_config - INFO - drawing_endpoints.py:37 - PUT /update_drawing/BTCUSDT/fef4177f-74e7-44bd-aa3b-9f362208d9cd request received
2025-09-03 16:07:54,121 - logging_config - INFO - drawing_manager.py:115 - Drawing fef4177f-74e7-44bd-aa3b-9f362208d9cd updated.
2025-09-03 16:07:54,121 - logging_config - INFO - drawing_endpoints.py:44 - PUT /update_drawing/BTCUSDT/fef4177f-74e7-44bd-aa3b-9f362208d9cd request completed successfully
2025-09-03 16:07:56,652 - logging_config - INFO - drawing_endpoints.py:37 - PUT /update_drawing/BTCUSDT/fef4177f-74e7-44bd-aa3b-9f362208d9cd request received
2025-09-03 16:07:56,653 - logging_config - INFO - drawing_manager.py:115 - Drawing fef4177f-74e7-44bd-aa3b-9f362208d9cd updated.
2025-09-03 16:07:56,653 - logging_config - INFO - drawing_endpoints.py:44 - PUT /update_drawing/BTCUSDT/fef4177f-74e7-44bd-aa3b-9f362208d9cd request completed successfully
2025-09-03 16:08:45,421 - logging_config - INFO - AppTradingView.py:147 - Chart page request from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:08:45,421 - logging_config - INFO - AppTradingView.py:166 - Email found in session for 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:08:45,435 - logging_config - ERROR - websocket_handlers.py:711 - Failed to receive WebSocket message for BTCUSDT: (1001, '')
Traceback (most recent call last):
  File "c:\git\ai-trading-bot-2\websocket_handlers.py", line 706, in stream_combined_data_websocket_endpoint
    message = await asyncio.wait_for(websocket.receive_json(), timeout=1.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1001, '')
2025-09-03 16:08:45,436 - logging_config - INFO - utility_endpoints.py:282 - Log stream generator cancelled.
2025-09-03 16:08:45,735 - logging_config - INFO - utility_endpoints.py:243 - GET /get_last_symbol request received.
2025-09-03 16:08:45,736 - logging_config - INFO - utility_endpoints.py:251 - Got last selected symbol for user klemenzivkovic@gmail.com: BTCUSDT
2025-09-03 16:08:45,798 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:08:45,798 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:08:45,832 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 16:08:45,832 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1726827056036, x_axis_max: 1767184568262
2025-09-03 16:08:45,832 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1726827056036, max_timestamp: 1767184568262
2025-09-03 16:08:45,832 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1726827056.036, max=1767184568.262
2025-09-03 16:08:45,832 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2024-09-20T10:10:56.036000+00:00, max=2025-12-31T12:36:08.262000+00:00
2025-09-03 16:08:45,832 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1726827056036, 'xAxisMax': 1767184568262, 'yAxisMin': 70088.1515358795, 'yAxisMax': 124914.80904472788, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 16:08:45,895 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 16:08:45,904 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": "2024-09-20T10:10:56.036Z",
  "to_ts": "2025-12-31T12:36:08.262Z"
}
2025-09-03 16:08:45,904 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 16:08:45,904 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 2024-09-20T10:10:56.036Z (type: <class 'str'>)
2025-09-03 16:08:45,904 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 2025-12-31T12:36:08.262Z (type: <class 'str'>)
2025-09-03 16:08:45,904 - logging_config - INFO - websocket_handlers.py:756 - [TIMESTAMP DEBUG] Timestamps are ISO strings (correct format)
2025-09-03 16:08:45,904 - logging_config - INFO - websocket_handlers.py:763 - [TIMESTAMP CONVERSION] ISO strings -> Unix seconds:
2025-09-03 16:08:45,904 - logging_config - INFO - websocket_handlers.py:764 -   2024-09-20T10:10:56.036Z -> 1726827056 (2024-09-20 10:10:56 UTC)
2025-09-03 16:08:45,904 - logging_config - INFO - websocket_handlers.py:765 -   2025-12-31T12:36:08.262Z -> 1767184568 (2025-12-31 12:36:08 UTC)
2025-09-03 16:08:45,905 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 16:08:45,905 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1726827056 (type: <class 'int'>)
2025-09-03 16:08:45,905 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1767184568 (type: <class 'int'>)
2025-09-03 16:08:45,905 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 16:08:45,905 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 16:08:45,905 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 16:08:45,905 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 2024-09-20T10:10:56.036Z (type: <class 'str'>)
2025-09-03 16:08:45,905 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 2025-12-31T12:36:08.262Z (type: <class 'str'>)
2025-09-03 16:08:45,905 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 16:08:45,905 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 16:08:45,905 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 16:08:45,905 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=None, to_ts=None
2025-09-03 16:08:45,906 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1726827056, to_ts=1767184568
2025-09-03 16:08:45,906 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 16:08:45,906 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: False
2025-09-03 16:08:45,906 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 16:08:45,906 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 16:08:45,906 - logging_config - INFO - websocket_handlers.py:846 -     From: 2024-09-20 10:10:56 UTC (1726827056)
2025-09-03 16:08:45,906 - logging_config - INFO - websocket_handlers.py:847 -     To: 2025-12-31 12:36:08 UTC (1767184568)
2025-09-03 16:08:45,906 - logging_config - INFO - websocket_handlers.py:848 -     Range: 40357512 seconds (11210.4 hours)
2025-09-03 16:08:45,906 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 16:08:45,906 - logging_config - INFO - websocket_handlers.py:851 -     From: 2024-09-20 12:10:56 Central Europe Summer Time
2025-09-03 16:08:45,906 - logging_config - INFO - websocket_handlers.py:852 -     To: 2025-12-31 14:36:08 Central Europe Summer Time
2025-09-03 16:08:45,906 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 16:08:45,906 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 16:08:45,906 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 16:08:45,906 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 16:08:45,906 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 16:08:45,906 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 16:08:45,907 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1726827056, to_ts=1767184568
2025-09-03 16:08:45,907 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2024-09-20 12:10:56 to 2025-12-31 14:36:08
2025-09-03 16:08:45,907 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 16:08:45,907 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 16:08:45,907 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 16:08:45,907 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 16:08:45,907 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2024-09-20 10:10 to 2025-12-31 12:36
2025-09-03 16:08:45,907 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1767184568
2025-09-03 16:08:45,907 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: False
2025-09-03 16:08:45,907 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:08:45,907 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1726827056, to_ts=1767184568, resolution=1d
2025-09-03 16:08:45,907 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 16:08:45,907 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 16:08:45,907 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 16:08:45,908 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 16:08:45,908 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1760056105, 'start_price': 95880.69052160707, 'end_price': 109701.78958988334, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 16:08:45,908 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 16:08:45,909 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 16:08:45,909 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 16:08:45,909 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 16:08:45,909 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1758067202, 'end_time': 1760056105, 'start_price': 95880.69052160707, 'end_price': 109701.78958988334, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 16:08:45,909 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 16:08:45,909 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1726827056, to_ts=1767184568
2025-09-03 16:08:45,910 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1726827056, 1767184568]
2025-09-03 16:08:45,910 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 16:08:45,910 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1726827056 (type: <class 'int'>)
2025-09-03 16:08:45,910 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1767184568 (type: <class 'int'>)
2025-09-03 16:08:45,910 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1726827056 appears to be in SECONDS (correct for Redis)
2025-09-03 16:08:45,910 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 16:08:45,912 - logging_config - INFO - redis_utils.py:159 - Found 348 cached klines for BTCUSDT 1d between 1726827056 and 1767184568
2025-09-03 16:08:45,912 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 16:08:45,913 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~467
2025-09-03 16:08:45,913 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 348
2025-09-03 16:08:45,913 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 16:08:45,913 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 348 klines from Redis for BTCUSDT
2025-09-03 16:08:45,913 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 348 klines in Redis cache for BTCUSDT
2025-09-03 16:08:45,913 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 16:08:45,913 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:08:45,913 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 348
2025-09-03 16:08:45,913 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 348 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:08:45,915 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1726827056 and 1767184568
2025-09-03 16:08:45,918 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 348, Cleaned data points: 348
2025-09-03 16:08:45,918 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 16:08:45,918 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:08:45,918 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 16:08:45,921 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:08:45,921 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:08:45,922 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:08:45,922 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:08:45,922 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 348 total rows
2025-09-03 16:08:45,922 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 348 total rows
2025-09-03 16:08:45,922 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 348 total rows
2025-09-03 16:08:45,922 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:08:45,922 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:08:45,923 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:08:45,923 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 16:08:45,923 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 16:08:45,923 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 348
2025-09-03 16:08:45,924 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:08:45,925 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:08:45,925 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:08:45,925 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:08:45,925 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 348 total rows
2025-09-03 16:08:45,925 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 348 total rows
2025-09-03 16:08:45,925 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:08:45,925 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:08:45,926 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:08:45,926 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 16:08:45,926 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 16:08:45,926 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 348
2025-09-03 16:08:45,928 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:08:45,928 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:08:45,928 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:08:45,929 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:08:45,929 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 348 total rows
2025-09-03 16:08:45,929 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 348 total rows
2025-09-03 16:08:45,929 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:08:45,929 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:08:45,930 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:08:45,930 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 16:08:45,930 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 16:08:45,930 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 348
2025-09-03 16:08:45,931 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:08:45,931 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:08:45,931 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:08:45,933 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:08:45,933 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 348 total rows
2025-09-03 16:08:45,933 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 348 total rows
2025-09-03 16:08:45,933 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:08:45,933 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:08:45,933 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:08:45,934 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 16:08:45,934 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 16:08:45,934 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 348
2025-09-03 16:08:45,936 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:08:45,937 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:08:45,937 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:08:45,937 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:08:45,937 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 348 total rows
2025-09-03 16:08:45,937 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 348 total rows
2025-09-03 16:08:45,937 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:08:45,938 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:08:45,938 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 16:08:45,938 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:08:46,964 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
2025-09-03 16:08:52,645 - logging_config - INFO - drawing_endpoints.py:37 - PUT /update_drawing/BTCUSDT/fef4177f-74e7-44bd-aa3b-9f362208d9cd request received
2025-09-03 16:08:52,828 - logging_config - INFO - drawing_manager.py:115 - Drawing fef4177f-74e7-44bd-aa3b-9f362208d9cd updated.
2025-09-03 16:08:52,828 - logging_config - INFO - drawing_endpoints.py:44 - PUT /update_drawing/BTCUSDT/fef4177f-74e7-44bd-aa3b-9f362208d9cd request completed successfully
2025-09-03 16:08:57,857 - logging_config - INFO - drawing_endpoints.py:37 - PUT /update_drawing/BTCUSDT/fef4177f-74e7-44bd-aa3b-9f362208d9cd request received
2025-09-03 16:08:57,857 - logging_config - INFO - drawing_manager.py:115 - Drawing fef4177f-74e7-44bd-aa3b-9f362208d9cd updated.
2025-09-03 16:08:57,858 - logging_config - INFO - drawing_endpoints.py:44 - PUT /update_drawing/BTCUSDT/fef4177f-74e7-44bd-aa3b-9f362208d9cd request completed successfully
2025-09-03 16:09:00,704 - logging_config - INFO - drawing_endpoints.py:37 - PUT /update_drawing/BTCUSDT/fef4177f-74e7-44bd-aa3b-9f362208d9cd request received
2025-09-03 16:09:00,705 - logging_config - INFO - drawing_manager.py:115 - Drawing fef4177f-74e7-44bd-aa3b-9f362208d9cd updated.
2025-09-03 16:09:00,705 - logging_config - INFO - drawing_endpoints.py:44 - PUT /update_drawing/BTCUSDT/fef4177f-74e7-44bd-aa3b-9f362208d9cd request completed successfully
2025-09-03 16:09:15,391 - logging_config - INFO - drawing_endpoints.py:37 - PUT /update_drawing/BTCUSDT/fef4177f-74e7-44bd-aa3b-9f362208d9cd request received
2025-09-03 16:09:15,392 - logging_config - INFO - drawing_manager.py:115 - Drawing fef4177f-74e7-44bd-aa3b-9f362208d9cd updated.
2025-09-03 16:09:15,392 - logging_config - INFO - drawing_endpoints.py:44 - PUT /update_drawing/BTCUSDT/fef4177f-74e7-44bd-aa3b-9f362208d9cd request completed successfully
2025-09-03 16:09:18,211 - logging_config - INFO - AppTradingView.py:147 - Chart page request from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:09:18,211 - logging_config - INFO - AppTradingView.py:166 - Email found in session for 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:09:18,230 - logging_config - ERROR - websocket_handlers.py:711 - Failed to receive WebSocket message for BTCUSDT: (1001, '')
Traceback (most recent call last):
  File "c:\git\ai-trading-bot-2\websocket_handlers.py", line 706, in stream_combined_data_websocket_endpoint
    message = await asyncio.wait_for(websocket.receive_json(), timeout=1.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
  File "C:\Users\Admin\AppData\Local\Programs\Python\Python312\Lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1001, '')
2025-09-03 16:09:18,231 - logging_config - INFO - utility_endpoints.py:282 - Log stream generator cancelled.
2025-09-03 16:09:18,517 - logging_config - INFO - utility_endpoints.py:243 - GET /get_last_symbol request received.
2025-09-03 16:09:18,539 - logging_config - INFO - utility_endpoints.py:251 - Got last selected symbol for user klemenzivkovic@gmail.com: BTCUSDT
2025-09-03 16:09:18,564 - logging_config - INFO - AppTradingView.py:372 - Symbol chart page request for favicon.ico from 192.168.1.1. Current session state: authenticated=True, email=klemenzivkovic@gmail.com
2025-09-03 16:09:18,564 - logging_config - INFO - AppTradingView.py:391 - Email found in session for favicon.ico request from 192.168.1.1: klemenzivkovic@gmail.com
2025-09-03 16:09:18,598 - logging_config - INFO - utility_endpoints.py:59 - DEBUG: Timestamp conversion for BTCUSDT:
2025-09-03 16:09:18,598 - logging_config - INFO - utility_endpoints.py:60 -   Raw x_axis_min: 1726827056036, x_axis_max: 1767184568262
2025-09-03 16:09:18,598 - logging_config - INFO - utility_endpoints.py:61 -   Converted min_timestamp: 1726827056036, max_timestamp: 1767184568262
2025-09-03 16:09:18,598 - logging_config - INFO - utility_endpoints.py:62 -   Timestamp seconds: min=1726827056.036, max=1767184568.262
2025-09-03 16:09:18,598 - logging_config - INFO - utility_endpoints.py:68 -   Final dates: min=2024-09-20T10:10:56.036000+00:00, max=2025-12-31T12:36:08.262000+00:00
2025-09-03 16:09:18,598 - logging_config - INFO - utility_endpoints.py:141 - GET /settings for BTCUSDT: Retrieved from Redis: {'resolution': '1d', 'range': '30d', 'xAxisMin': 1726827056036, 'xAxisMax': 1767184568262, 'yAxisMin': 70088.1515358795, 'yAxisMax': 124914.80904472788, 'activeIndicators': ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], 'liveDataEnabled': False, 'streamDeltaTime': 0, 'useLocalOllama': False, 'localOllamaModelName': '', 'showAgentTrades': False, 'symbol': 'BTCUSDT', 'replayFrom': '', 'replayTo': '', 'replaySpeed': '1', 'last_selected_symbol': 'BTCUSDT'}
2025-09-03 16:09:18,663 - logging_config - INFO - websocket_handlers.py:257 - WebSocket connection accepted for combined data: BTCUSDT
2025-09-03 16:09:18,673 - logging_config - INFO - websocket_handlers.py:744 - üì® RAW MESSAGE RECEIVED for BTCUSDT: {
  "type": "config",
  "symbol": "BTCUSDT",
  "indicators": [
    "macd",
    "stochrsi_9_3",
    "stochrsi_14_3",
    "stochrsi_40_4",
    "stochrsi_60_10"
  ],
  "resolution": "1d",
  "from_ts": "2024-09-20T10:10:56.036Z",
  "to_ts": "2025-12-31T12:36:08.262Z"
}
2025-09-03 16:09:18,673 - logging_config - INFO - websocket_handlers.py:749 - [TIMESTAMP DEBUG] websocket_handlers.py - Received timestamps:
2025-09-03 16:09:18,673 - logging_config - INFO - websocket_handlers.py:750 -   from_ts: 2024-09-20T10:10:56.036Z (type: <class 'str'>)
2025-09-03 16:09:18,674 - logging_config - INFO - websocket_handlers.py:751 -   to_ts: 2025-12-31T12:36:08.262Z (type: <class 'str'>)
2025-09-03 16:09:18,674 - logging_config - INFO - websocket_handlers.py:756 - [TIMESTAMP DEBUG] Timestamps are ISO strings (correct format)
2025-09-03 16:09:18,674 - logging_config - INFO - websocket_handlers.py:763 - [TIMESTAMP CONVERSION] ISO strings -> Unix seconds:
2025-09-03 16:09:18,674 - logging_config - INFO - websocket_handlers.py:764 -   2024-09-20T10:10:56.036Z -> 1726827056 (2024-09-20 10:10:56 UTC)
2025-09-03 16:09:18,674 - logging_config - INFO - websocket_handlers.py:765 -   2025-12-31T12:36:08.262Z -> 1767184568 (2025-12-31 12:36:08 UTC)
2025-09-03 16:09:18,674 - logging_config - INFO - websocket_handlers.py:797 - [TIMESTAMP FIX] Final timestamps set:
2025-09-03 16:09:18,674 - logging_config - INFO - websocket_handlers.py:798 -   from_ts: 1726827056 (type: <class 'int'>)
2025-09-03 16:09:18,675 - logging_config - INFO - websocket_handlers.py:799 -   to_ts: 1767184568 (type: <class 'int'>)
2025-09-03 16:09:18,675 - logging_config - INFO - websocket_handlers.py:809 - Client config updated for BTCUSDT: indicators=['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'], resolution=1d
2025-09-03 16:09:18,675 - logging_config - INFO - websocket_handlers.py:810 - üìä MESSAGE FIELD VALUES for BTCUSDT:
2025-09-03 16:09:18,675 - logging_config - INFO - websocket_handlers.py:811 -   symbol: BTCUSDT (fallback: BTCUSDT)
2025-09-03 16:09:18,675 - logging_config - INFO - websocket_handlers.py:812 -   from_ts: 2024-09-20T10:10:56.036Z (type: <class 'str'>)
2025-09-03 16:09:18,675 - logging_config - INFO - websocket_handlers.py:813 -   to_ts: 2025-12-31T12:36:08.262Z (type: <class 'str'>)
2025-09-03 16:09:18,675 - logging_config - INFO - websocket_handlers.py:814 -   indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10'] (type: <class 'list'>)
2025-09-03 16:09:18,675 - logging_config - INFO - websocket_handlers.py:815 -   resolution: 1d (type: <class 'str'>)
2025-09-03 16:09:18,675 - logging_config - INFO - websocket_handlers.py:821 - üìä SERVER TIME RANGE ANALYSIS for BTCUSDT:
2025-09-03 16:09:18,676 - logging_config - INFO - websocket_handlers.py:822 -   Old range: from_ts=None, to_ts=None
2025-09-03 16:09:18,676 - logging_config - INFO - websocket_handlers.py:823 -   New range: from_ts=1726827056, to_ts=1767184568
2025-09-03 16:09:18,676 - logging_config - INFO - websocket_handlers.py:824 -   Time range changed: True
2025-09-03 16:09:18,676 - logging_config - INFO - websocket_handlers.py:825 -   Historical sent: False
2025-09-03 16:09:18,676 - logging_config - INFO - websocket_handlers.py:826 -   Has timestamps: from_ts=True, to_ts=True
2025-09-03 16:09:18,676 - logging_config - INFO - websocket_handlers.py:845 -   üìÖ SERVER RECEIVED RANGE (UTC):
2025-09-03 16:09:18,677 - logging_config - INFO - websocket_handlers.py:846 -     From: 2024-09-20 10:10:56 UTC (1726827056)
2025-09-03 16:09:18,677 - logging_config - INFO - websocket_handlers.py:847 -     To: 2025-12-31 12:36:08 UTC (1767184568)
2025-09-03 16:09:18,677 - logging_config - INFO - websocket_handlers.py:848 -     Range: 40357512 seconds (11210.4 hours)
2025-09-03 16:09:18,677 - logging_config - INFO - websocket_handlers.py:850 -   üìÖ SERVER RECEIVED RANGE (Local Time):
2025-09-03 16:09:18,677 - logging_config - INFO - websocket_handlers.py:851 -     From: 2024-09-20 12:10:56 Central Europe Summer Time
2025-09-03 16:09:18,677 - logging_config - INFO - websocket_handlers.py:852 -     To: 2025-12-31 14:36:08 Central Europe Summer Time
2025-09-03 16:09:18,677 - logging_config - INFO - websocket_handlers.py:855 -   üåç TIMEZONE ANALYSIS:
2025-09-03 16:09:18,677 - logging_config - INFO - websocket_handlers.py:856 -     Server timezone: Central Europe Summer Time (UTC+2.0)
2025-09-03 16:09:18,677 - logging_config - INFO - websocket_handlers.py:857 -     User timezone (from logs): Europe/Ljubljana (UTC+2)
2025-09-03 16:09:18,677 - logging_config - INFO - websocket_handlers.py:858 -     Timezone difference: 0.0 hours
2025-09-03 16:09:18,677 - logging_config - INFO - websocket_handlers.py:861 -   üì§ DATA TO BE SENT TO CLIENT:
2025-09-03 16:09:18,677 - logging_config - INFO - websocket_handlers.py:862 -     Timestamps will be sent as seconds (not milliseconds)
2025-09-03 16:09:18,677 - logging_config - INFO - websocket_handlers.py:863 -     Client will receive: from_ts=1726827056, to_ts=1767184568
2025-09-03 16:09:18,677 - logging_config - INFO - websocket_handlers.py:864 -     Client local time equivalent: 2024-09-20 12:10:56 to 2025-12-31 14:36:08
2025-09-03 16:09:18,677 - logging_config - INFO - websocket_handlers.py:869 -   üìä USER'S CHART VIEW STATE:
2025-09-03 16:09:18,677 - logging_config - INFO - websocket_handlers.py:870 -     X-Axis Min: 30/08/2025, 10:31:39
2025-09-03 16:09:18,678 - logging_config - INFO - websocket_handlers.py:871 -     X-Axis Max: 04/09/2025, 01:58:37
2025-09-03 16:09:18,678 - logging_config - INFO - websocket_handlers.py:872 -     Expected local time range: 2025-08-30 10:31 to 2025-09-04 01:58
2025-09-03 16:09:18,678 - logging_config - INFO - websocket_handlers.py:873 -     Server received UTC equivalent: 2024-09-20 10:10 to 2025-12-31 12:36
2025-09-03 16:09:18,678 - logging_config - INFO - websocket_handlers.py:883 - Should send historical data: 1767184568
2025-09-03 16:09:18,678 - logging_config - INFO - websocket_handlers.py:886 - Sending historical data for BTCUSDT - time range changed: True, historical_sent: False
2025-09-03 16:09:18,678 - logging_config - INFO - websocket_handlers.py:301 - Sending historical data for BTCUSDT with indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:09:18,679 - logging_config - INFO - websocket_handlers.py:302 - Time range: from_ts=1726827056, to_ts=1767184568, resolution=1d
2025-09-03 16:09:18,679 - logging_config - INFO - websocket_handlers.py:312 - WebSocket session email found: klemenzivkovic@gmail.com
2025-09-03 16:09:18,679 - logging_config - INFO - websocket_handlers.py:317 - Looking for drawings: symbol=BTCUSDT, resolution=1d, email=klemenzivkovic@gmail.com
2025-09-03 16:09:18,679 - logging_config - INFO - websocket_handlers.py:322 - Redis key for drawings: drawings:klemenzivkovic@gmail.com:BTCUSDT
2025-09-03 16:09:18,679 - logging_config - INFO - drawing_manager.py:60 - get_drawings for BTCUSDT with resolution '1d': found 5 total, returning 4 filtered.
2025-09-03 16:09:18,679 - logging_config - INFO - websocket_handlers.py:330 - get_drawings() returned: [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1757468061, 'end_time': 1761404565, 'start_price': 95037.82414090491, 'end_price': 105478.29723706697, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]
2025-09-03 16:09:18,680 - logging_config - INFO - websocket_handlers.py:331 - Drawings type: <class 'list'>
2025-09-03 16:09:18,680 - logging_config - INFO - websocket_handlers.py:334 - Drawings length: 4
2025-09-03 16:09:18,680 - logging_config - INFO - websocket_handlers.py:335 - First drawing sample: {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}
2025-09-03 16:09:18,680 - logging_config - INFO - websocket_handlers.py:338 - Sending 4 existing drawings for BTCUSDT
2025-09-03 16:09:18,680 - logging_config - INFO - websocket_handlers.py:344 - Sending drawing message: {'type': 'drawings', 'symbol': 'BTCUSDT', 'data': [{'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754858689, 'end_time': 1758075483, 'start_price': 126573.94307196565, 'end_price': 98674.1090225564, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '2093fc4f-5cd4-4488-b6e8-cce8d27bbf0f'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1755053030, 'end_time': 1757334518, 'start_price': 115045.13963480131, 'end_price': 101963.8829215897, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': '550b24b1-1b92-4864-b779-ed74ed7ed282'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1757468061, 'end_time': 1761404565, 'start_price': 95037.82414090491, 'end_price': 105478.29723706697, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {}, 'id': 'fef4177f-74e7-44bd-aa3b-9f362208d9cd'}, {'symbol': 'BTCUSDT', 'type': 'line', 'start_time': 1754834563, 'end_time': 1758106478, 'start_price': 125654.72871123493, 'end_price': 103155.81197247906, 'subplot_name': 'BTCUSDT', 'resolution': '1d', 'properties': {'buyOnCross': False, 'sellOnCross': False, 'sendEmailOnCross': True}, 'id': 'a8369b54-997f-455e-9cea-d9fecb571bd3'}]}
2025-09-03 16:09:18,681 - logging_config - INFO - websocket_handlers.py:346 - Successfully sent drawings message to client
2025-09-03 16:09:18,681 - logging_config - INFO - websocket_handlers.py:359 - üîç REDIS QUERY: Requesting klines for BTCUSDT, resolution=1d, from_ts=1726827056, to_ts=1767184568
2025-09-03 16:09:18,681 - logging_config - INFO - redis_utils.py:103 - Querying sorted set 'zset:kline:BTCUSDT:1d' for range [1726827056, 1767184568]
2025-09-03 16:09:18,681 - logging_config - INFO - redis_utils.py:106 - [TIMESTAMP DEBUG] redis_utils.py - get_cached_klines query:
2025-09-03 16:09:18,681 - logging_config - INFO - redis_utils.py:107 -   start_ts: 1726827056 (type: <class 'int'>)
2025-09-03 16:09:18,681 - logging_config - INFO - redis_utils.py:108 -   end_ts: 1767184568 (type: <class 'int'>)
2025-09-03 16:09:18,681 - logging_config - INFO - redis_utils.py:115 - [TIMESTAMP DEBUG] start_ts 1726827056 appears to be in SECONDS (correct for Redis)
2025-09-03 16:09:18,681 - logging_config - INFO - redis_utils.py:120 - [TIMESTAMP DEBUG] Checking Redis data sample for comparison...
2025-09-03 16:09:18,683 - logging_config - INFO - redis_utils.py:159 - Found 348 cached klines for BTCUSDT 1d between 1726827056 and 1767184568
2025-09-03 16:09:18,683 - logging_config - INFO - redis_utils.py:163 - üîç DATA GAP ANALYSIS for BTCUSDT 1d:
2025-09-03 16:09:18,683 - logging_config - INFO - redis_utils.py:164 -   Expected data points based on time range: ~467
2025-09-03 16:09:18,683 - logging_config - INFO - redis_utils.py:165 -   Actual data points retrieved: 348
2025-09-03 16:09:18,683 - logging_config - INFO - redis_utils.py:194 - ‚úÖ No data gaps detected - data appears continuous
2025-09-03 16:09:18,684 - logging_config - INFO - websocket_handlers.py:361 - ‚úÖ REDIS SUCCESS: Retrieved 348 klines from Redis for BTCUSDT
2025-09-03 16:09:18,684 - logging_config - INFO - websocket_handlers.py:397 - ‚úÖ CACHE HIT: Found 348 klines in Redis cache for BTCUSDT
2025-09-03 16:09:18,684 - logging_config - INFO - websocket_handlers.py:401 - üîç SERVER DEBUG: About to calculate indicators for BTCUSDT
2025-09-03 16:09:18,684 - logging_config - INFO - websocket_handlers.py:402 - üîç SERVER DEBUG: Indicators requested: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:09:18,684 - logging_config - INFO - websocket_handlers.py:403 - üîç SERVER DEBUG: Klines count: 348
2025-09-03 16:09:18,684 - logging_config - INFO - websocket_handlers.py:616 - üîç SERVER DEBUG: calculate_indicators_for_data called with 348 klines and indicators: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:09:18,686 - logging_config - INFO - redis_utils.py:265 - Found 272 cached Open Interest entries for BTCUSDT 1d between 1726827056 and 1767184568
2025-09-03 16:09:18,689 - logging_config - INFO - indicators.py:144 - üîç MACD GAP DEBUG: Original data points: 348, Cleaned data points: 348
2025-09-03 16:09:18,689 - logging_config - INFO - indicators.py:145 - üîç MACD GAP DEBUG: Required minimum: 35 points
2025-09-03 16:09:18,689 - logging_config - INFO - indicators.py:146 - üîç MACD GAP DEBUG: Data timeframe: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:09:18,690 - logging_config - INFO - indicators.py:147 - üîç MACD GAP DEBUG: Gap from original start: 0.0 days
2025-09-03 16:09:18,692 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:09:18,692 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:09:18,692 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:09:18,692 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:09:18,692 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACD_12_26_9' has 25 NaN values out of 348 total rows
2025-09-03 16:09:18,692 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDs_12_26_9' has 33 NaN values out of 348 total rows
2025-09-03 16:09:18,694 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'MACDh_12_26_9' has 33 NaN values out of 348 total rows
2025-09-03 16:09:18,694 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:09:18,694 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:09:18,694 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:09:18,694 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=9, Stoch=9, K=3, D=3
2025-09-03 16:09:18,694 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(9) + Stoch(9) + smoothing = ~24 points
2025-09-03 16:09:18,694 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 24, Available: 348
2025-09-03 16:09:18,697 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:09:18,697 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:09:18,697 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:09:18,697 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:09:18,697 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_9_9_3_3' has 19 NaN values out of 348 total rows
2025-09-03 16:09:18,697 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_9_9_3_3' has 21 NaN values out of 348 total rows
2025-09-03 16:09:18,698 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:09:18,698 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:09:18,698 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:09:18,698 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=14, Stoch=14, K=3, D=3
2025-09-03 16:09:18,698 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(14) + Stoch(14) + smoothing = ~34 points
2025-09-03 16:09:18,698 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 34, Available: 348
2025-09-03 16:09:18,700 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:09:18,700 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:09:18,700 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:09:18,700 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:09:18,701 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_14_14_3_3' has 29 NaN values out of 348 total rows
2025-09-03 16:09:18,701 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_14_14_3_3' has 31 NaN values out of 348 total rows
2025-09-03 16:09:18,701 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:09:18,701 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:09:18,702 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:09:18,702 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=40, Stoch=40, K=4, D=4
2025-09-03 16:09:18,702 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(40) + Stoch(40) + smoothing = ~88 points
2025-09-03 16:09:18,702 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 88, Available: 348
2025-09-03 16:09:18,704 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:09:18,704 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:09:18,704 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:09:18,704 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:09:18,705 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_40_40_4_4' has 82 NaN values out of 348 total rows
2025-09-03 16:09:18,705 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_40_40_4_4' has 85 NaN values out of 348 total rows
2025-09-03 16:09:18,705 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:09:18,705 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:09:18,706 - logging_config - INFO - indicators.py:269 - üîç STOCHRSI GAP DEBUG: Input data points: 348
2025-09-03 16:09:18,706 - logging_config - INFO - indicators.py:270 - üîç STOCHRSI GAP DEBUG: Parameters: RSI=60, Stoch=60, K=10, D=10
2025-09-03 16:09:18,706 - logging_config - INFO - indicators.py:271 - üîç STOCHRSI GAP DEBUG: Estimated warmup period: RSI(60) + Stoch(60) + smoothing = ~140 points
2025-09-03 16:09:18,706 - logging_config - INFO - indicators.py:275 - üîç STOCHRSI VALIDATION: Minimum required data points: 140, Available: 348
2025-09-03 16:09:18,708 - logging_config - INFO - indicators.py:67 - üîç GAP ANALYSIS: Before NaN drop - DataFrame has 348 rows
2025-09-03 16:09:18,708 - logging_config - INFO - indicators.py:68 - üîç GAP ANALYSIS: Original time range: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:09:18,708 - logging_config - INFO - indicators.py:69 - üîç GAP ANALYSIS: First 5 timestamps: [Timestamp('2024-09-21 00:00:00'), Timestamp('2024-09-22 00:00:00'), Timestamp('2024-09-23 00:00:00'), Timestamp('2024-09-24 00:00:00'), Timestamp('2024-09-25 00:00:00')]
2025-09-03 16:09:18,709 - logging_config - INFO - indicators.py:70 - üîç GAP ANALYSIS: Last 5 timestamps: [Timestamp('2025-08-30 00:00:00'), Timestamp('2025-08-31 00:00:00'), Timestamp('2025-09-01 00:00:00'), Timestamp('2025-09-02 00:00:00'), Timestamp('2025-09-03 00:00:00')]
2025-09-03 16:09:18,709 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSIk_60_60_10_10' has 128 NaN values out of 348 total rows
2025-09-03 16:09:18,709 - logging_config - INFO - indicators.py:75 - üîç GAP ANALYSIS: Column 'STOCHRSId_60_60_10_10' has 137 NaN values out of 348 total rows
2025-09-03 16:09:18,709 - logging_config - INFO - indicators.py:79 - üîç GAP ANALYSIS: PRESERVING ALL TIMESTAMPS - No rows dropped
2025-09-03 16:09:18,709 - logging_config - INFO - indicators.py:80 - üîç GAP ANALYSIS: Full time range maintained: 2024-09-21 00:00:00 to 2025-09-03 00:00:00
2025-09-03 16:09:18,709 - logging_config - INFO - websocket_handlers.py:405 - üîç SERVER DEBUG: Indicators calculation completed for BTCUSDT
2025-09-03 16:09:18,709 - logging_config - INFO - websocket_handlers.py:406 - üîç SERVER DEBUG: Indicators data keys: ['macd', 'stochrsi_9_3', 'stochrsi_14_3', 'stochrsi_40_4', 'stochrsi_60_10']
2025-09-03 16:09:29,964 - logging_config - INFO - drawing_endpoints.py:37 - PUT /update_drawing/BTCUSDT/fef4177f-74e7-44bd-aa3b-9f362208d9cd request received
2025-09-03 16:09:29,966 - logging_config - INFO - drawing_manager.py:115 - Drawing fef4177f-74e7-44bd-aa3b-9f362208d9cd updated.
2025-09-03 16:09:29,966 - logging_config - INFO - drawing_endpoints.py:44 - PUT /update_drawing/BTCUSDT/fef4177f-74e7-44bd-aa3b-9f362208d9cd request completed successfully
2025-09-03 16:09:56,134 - logging_config - INFO - background_tasks.py:75 - üìä STARTING OPEN INTEREST: Data fetch cycle
